# Hey Emacs, this is a -*- sh -*- file
## .inputrc --- my Readline Init File

# Copyright (C) 2005-2020 Fabrice Niessen

# Author: Fabrice Niessen <(concat "fniessen" at-sign "pirilampo.org")>
# Keywords: readline, dotfile, config

# First, include any system-wide settings.
$include /etc/inputrc

# Allow Meta (Alt) key bindings [line added to the top of my `.inputrc'].
set convert-meta on

# Behave like Emacs when editing.
set editing-mode emacs                  # Ctrl-a/e      Start/End of line.
                                        # Ctrl-f/b      Forward/Backward one character.
                                        # Ctrl-d        Delete one character.
                                        # Ctrl-k        Kill line.
                                        # Ctrl-p/n      Previous/Next command in history.
                                        # Ctrl-r        Search for command in history.
                                        # Ctrl-i/TAB    File name completion.

# Some defaults / modifications for the Emacs mode.
$if mode=emacs

# <C-up/down> for searching matching commands from the history.
"\e[1;5A": history-search-backward
"\e[1;5B": history-search-forward

# <C-left/right> to move by whole words.
"\e[1;5C": forward-word
"\e[1;5D": backward-word

Meta-p: history-search-backward
Meta-n: history-search-forward

$endif

# Ignore case while completing.
set completion-ignore-case on

# # Display all alternatives for completion after one tab keypress.
# set show-all-if-ambiguous on

# # Get Bash to display accented characters (Emacs *Meta Key* Problems in XTerm)

# # Don't strip characters to 7 bits when reading.
# set input-meta on
# # (Synonym of 'meta-flag'.)

# # Display characters with the eighth bit set directly rather than as
# # meta-prefixed characters.
# set output-meta on


$if mode=emacs

Meta-Control-h: backward-kill-word

# # Arrow keys in keypad mode
# "\M-OD": backward-char
# "\M-OC": forward-char
# "\M-OA": previous-history
# "\M-OB": next-history

# Arrow keys in ANSI mode
"\M-[D": backward-char
"\M-[C": forward-char
"\M-[A": previous-history
"\M-[B": next-history

# # Arrow keys in 8 bit keypad mode
# "\M-\C-OD": backward-char
# "\M-\C-OC": forward-char
# "\M-\C-OA": previous-history
# "\M-\C-OB": next-history

# # Arrow keys in 8 bit ANSI mode
# "\M-\C-[D": backward-char
# "\M-\C-[C": forward-char
# "\M-\C-[A": previous-history
# "\M-\C-[B": next-history

"\C-q": quoted-insert

$endif

# An old-style binding, this happens to be the default
TAB: menu-complete
"\e[Z": menu-complete-backward

# Macros that are convenient for shell interaction
$if Bash
# Edit the path
"\C-xp": "PATH=${PATH}\e\C-e\C-a\ef\C-f"
# Insert open and close double quotes and move to just after the open quote
"\C-x\"": "\"\"\C-b"
# Insert a backslash (testing backslash escapes in sequences and macros)
"\C-x\\": "\\"
# Quote the current or previous word
"\C-xq": "\eb\"\ef\""
# Add a binding to refresh the line, which is unbound
"\C-xr": redraw-current-line
# Edit variable on current line
"\M-\C-v": "\C-a\C-k$\C-y\M-\C-e\C-a\C-y="
$endif

# Mappings for ctrl-left and ctrl-right for word moving
"\e[1;5C": forward-word
"\e[1;5D": backward-word
"\e[5C": forward-word
"\e[5D": backward-word
"\e\e[C": forward-word
"\e\e[D": backward-word

# Adds punctuation as word delimiters
set bind-tty-special-chars off

# Use a visible bell if one is available
set bell-style none

# Useful stuff for UTF-8
set meta-flag on

# Don't strip characters to 7 bits when reading
set input-meta on

# Allow iso-latin1 characters to be inserted rather than converted to
# prefix-meta sequences
set convert-meta off

# Display characters with the eighth bit set directly rather than as
# meta-prefixed characters
set output-meta on

# If there are more than 150 possible completions for a word, ask the user if he
# wants to see all of them
set completion-query-items 150

# Completion Options
set page-completions on
set completion-ignore-case on
set show-all-if-ambiguous on
set show-all-if-unmodified on
set menu-complete-display-prefix on
set visible-stats on

# Color Options
set colored-completion-prefix on
set colored-stats on

# For FTP
$if Ftp
"\C-xg": "get \M-?"
"\C-xt": "put \M-?"
"\M-.": yank-last-arg
$endif

set keymap emacs
