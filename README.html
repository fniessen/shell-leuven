<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>ShellRC-Leuven</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Fabrice Niessen" />
<link rel="stylesheet" type="text/css" href="d:/Users/fni/src/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="d:/Users/fni/src/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="d:/Users/fni/src/org-html-themes/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="d:/Users/fni/src/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">ShellRC-Leuven</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">Summary</a></li>
<li><a href="#orgheadline12">Getting started</a>
<ul>
<li><a href="#orgheadline2">Prerequisites for Windows</a>
<ul>
<li><a href="#orgheadline3">Notes</a></li>
<li><a href="#orgheadline4">Change your Cygwin <code>HOME</code> folder</a></li>
<li><a href="#orgheadline5">Packages</a></li>
<li><a href="#orgheadline6">Terminal emulators</a></li>
<li><a href="#orgheadline7">GnuPG</a></li>
<li><a href="#orgheadline8">Suppress the Cygwin DOS path warning</a></li>
<li><a href="#orgheadline9">Suppress the annoying &ldquo;tty option&rdquo; warning</a></li>
</ul>
</li>
<li><a href="#orgheadline10">Basic installation</a></li>
<li><a href="#orgheadline11">Custom directory</a></li>
</ul>
</li>
<li><a href="#orgheadline13">Startup files</a>
<ul>
<li><a href="#orgheadline14">What to put where?</a></li>
<li><a href="#orgheadline15">What to put in your Zsh startup files</a></li>
</ul>
</li>
<li><a href="#orgheadline16">Bash specific</a>
<ul>
<li><a href="#orgheadline17">Preamble</a></li>
<li><a href="#orgheadline18">Source global rc file (if any)</a></li>
<li><a href="#orgheadline19">Command history</a></li>
<li><a href="#orgheadline20">Prompt</a></li>
<li><a href="#orgheadline21">Default permissions</a></li>
<li><a href="#orgheadline22">Shell options</a></li>
<li><a href="#orgheadline23">Miscellaneous</a></li>
<li><a href="#orgheadline24">Source common file</a></li>
<li><a href="#orgheadline25">Postamble</a></li>
<li><a href="#orgheadline26">InputRC</a></li>
</ul>
</li>
<li><a href="#orgheadline27">Zsh specific</a>
<ul>
<li><a href="#orgheadline28">Examples</a></li>
<li><a href="#orgheadline29">Preamble</a></li>
<li><a href="#orgheadline30">Oh-my-Zsh Agnoster theme</a></li>
<li><a href="#orgheadline31">Command history</a></li>
<li><a href="#orgheadline32">Prompt</a>
<ul>
<li><a href="#orgheadline33">Right prompt with Zsh-Git-prompt</a></li>
<li><a href="#orgheadline34">Right prompt with Git-prompt</a></li>
</ul>
</li>
<li><a href="#orgheadline35">Aliasing</a>
<ul>
<li><a href="#orgheadline36">Common aliases</a></li>
<li><a href="#orgheadline37">Directories</a></li>
</ul>
</li>
<li><a href="#orgheadline38">Ledger</a></li>
<li><a href="#orgheadline39">Zsh line editor</a></li>
<li><a href="#orgheadline40">19. Completion Widgets</a></li>
<li><a href="#orgheadline41">20. Completion System</a></li>
<li><a href="#orgheadline42">Zsh Modules</a></li>
<li><a href="#orgheadline43">Others</a></li>
<li><a href="#orgheadline44">Source common file</a></li>
</ul>
</li>
<li><a href="#orgheadline45">System-wide configuration file</a>
<ul>
<li><a href="#orgheadline46">Preamble</a></li>
<li><a href="#orgheadline50">Paths</a>
<ul>
<li><a href="#orgheadline47">Search path</a></li>
<li><a href="#orgheadline48">Manpath</a></li>
<li><a href="#orgheadline49">Infopath</a></li>
</ul>
</li>
<li><a href="#orgheadline51">Pager</a>
<ul>
<li><a href="#orgheadline52">Less</a></li>
<li><a href="#orgheadline53">Most</a></li>
</ul>
</li>
<li><a href="#orgheadline54">Misc</a></li>
<li><a href="#orgheadline55">Terminal types</a></li>
<li><a href="#orgheadline56">Emacs (default editor)</a></li>
<li><a href="#orgheadline57">Plugins</a>
<ul>
<li><a href="#orgheadline58">Common aliases</a></li>
<li><a href="#orgheadline59">Directories</a></li>
<li><a href="#orgheadline60">Single char shortcuts for some commands</a></li>
<li><a href="#orgheadline61">Git</a></li>
<li><a href="#orgheadline62">SVN</a></li>
<li><a href="#orgheadline63">History</a></li>
<li><a href="#orgheadline64">Screen</a></li>
<li><a href="#orgheadline65">SSH agent / GPG agent</a></li>
<li><a href="#orgheadline66">Debian</a></li>
<li><a href="#orgheadline67">System admin (NMAP, etc.)</a></li>
<li><a href="#orgheadline68">Org</a></li>
<li><a href="#orgheadline69">Grep</a></li>
<li><a href="#orgheadline70">GraphicsMagick</a></li>
<li><a href="#orgheadline71">Other things to sort</a></li>
<li><a href="#orgheadline72">MCit tools</a></li>
</ul>
</li>
<li><a href="#orgheadline73">Postamble</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Summary</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
ShellRC-Leuven is a set of configuration files to take advantage of Bash and
Zsh on Mac OS X, Linux and Windows (with Cygwin).
</p>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-2">
<h2 id="orgheadline12">Getting started</h2>
<div class="outline-text-2" id="text-orgheadline12">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">Prerequisites for Windows</h3>
<div class="outline-text-3" id="text-orgheadline2">
<p>
Install <a href="https://www.cygwin.com/">Cygwin</a>.
</p>
</div>

<div id="outline-container-orgheadline3" class="outline-4">
<h4 id="orgheadline3">Notes</h4>
<div class="outline-text-4" id="text-orgheadline3">
<ul class="org-ul">
<li>After Cygwin is installed, modify the System <code>PATH</code> variable: append
<code>C:\cygwin\bin</code> before <code>%SystemRoot%\system32</code></li>

<li>If you add other directories (such as <code>~/bin</code> or <code>~/winbin</code>) in the <code>PATH</code> before
Cygwin, please check that those directories don&rsquo;t contain <code>cygwin1.dll</code> or
such. That was why I had troubles running <code>git</code> commands&#x2026;</li>
</ul>

<p>
In <code>c:/cygwin64/etc/profile</code>,
</p>

<ul class="org-ul">
<li><p>
<code>/usr/local/bin</code> is appended to the <code>PATH</code>!!
</p>

<p>
And, except when root, it is almost always wrong to have <code>/usr/local/bin</code> after
any system path.
</p></li>

<li><code>TZ</code> (time zone) is set&#x2026; which gives wrong times (1 hour difference) in Emacs
when called from <code>c:/cygwin/Cygwin.bat</code>!!</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4">Change your Cygwin <code>HOME</code> folder</h4>
<div class="outline-text-4" id="text-orgheadline4">
<p>
Programs like <code>ssh</code> don&rsquo;t rely on your environment variable <code>HOME</code> for the location
of your <b>home directory</b>.
</p>

<p>
If you installed Cygwin prior to 1.7.34 or have run its <code>mkpasswd</code> utility so that
you have an <code>/etc/passwd</code> file, you can change your Cygwin <code>HOME</code> directory by
editing your user&rsquo;s entry in that file. Your <code>HOME</code> directory is the penultimate
element on your user&rsquo;s line in <code>/etc/passwd</code> (the <code>HOME</code> environment variable is set
from that field).
</p>

<p>
Starting with Cygwin 1.7.34, the recommended way to do this is to add a custom
<code>db_home</code> setting to <code>/etc/nsswitch.conf</code>.
</p>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5">Packages</h4>
<div class="outline-text-4" id="text-orgheadline5">
<div class="inlinetask">
<b><span class="todo TODO">TODO</span> See <a href="http://www.4thinker.com/cygwin-setup.html">http://www.4thinker.com/cygwin-setup.html</a></b><br  />
nil</div>

<p>
<a href="http://cygwin.com/cgi-bin2/package-grep.cgi">Cygwin Package Search</a>
</p>

<p>
Install extra packages:
</p>

<ul class="org-ul">
<li>Archive
<ul class="org-ul">
<li class="off">&#x2610; <code>zip</code> used by the &ldquo;Org to ODT&rdquo; exporter</li>
<li class="off">&#x2610; <code>unzip</code></li>
</ul></li>

<li>Devel
<ul class="org-ul">
<li class="on">&#x2611; <code>git</code></li>
<li class="on">&#x2611; <code>subversion</code> (for <code>svn</code> command)</li>
<li class="on">&#x2611; <code>gdb</code></li>
<li class="on">&#x2611; <code>make</code> (for making info for Git Org mode)</li>
<li class="off">&#x2610; <code>autoconf</code></li>
<li class="off">&#x2610; <code>bzr</code></li>
<li class="off">&#x2610; <code>cvs</code></li>
<li class="off">&#x2610; <code>ctags</code> (Exuberant Ctags)</li>
<li class="off">&#x2610; <code>gcc-core</code> (C compiler)</li>
<li class="off">&#x2610; <code>gcc4</code> (needed for installing some Perl packages, for CSV2Ledger)</li>
<li class="off">&#x2610; <code>mercurial</code> (for <code>hg</code> command, used by Beamer)</li>
</ul></li>

<li>Editors
<ul class="org-ul">
<li class="on">&#x2611; <code>emacs</code></li>
<li class="on">&#x2611; <code>emacs-w32</code> (for graphical Cygwin Emacs with the w32 graphics toolkit)</li>
<li class="on">&#x2611; <code>emacs-el</code> (needed to get more up-to-date sources, such as for Org)</li>
</ul></li>

<li>Graphics
<ul class="org-ul">
<li class="on">&#x2611; <code>ghostscript</code> (needed by various utilities &#x2013; <code>texlive</code> for example)</li>
<li class="off">&#x2610; <code>gnuplot</code></li>
</ul></li>

<li>Interpreters
<ul class="org-ul">
<li class="off">&#x2610; <code>m4</code></li>
</ul></li>

<li>Libs
<ul class="org-ul">
<li class="off">&#x2610; <code>libbz2-devel</code> (needed for installing RODBC inside R)</li>
<li class="off">&#x2610; <code>libiconv</code></li>
<li class="off">&#x2610; <code>libicu-devel</code> (needed for installing RODBC inside R)</li>
<li class="off">&#x2610; <code>libiodbc-devel</code> (needed for installing RODBC inside R)</li>
</ul></li>

<li>Math
<ul class="org-ul">
<li class="on">&#x2611; <code>R</code></li>
</ul></li>

<li>Net
<ul class="org-ul">
<li class="off">&#x2610; <code>bind-utils</code> (for <code>dig</code>, <code>host</code>, <code>nslookup</code>, etc.)</li>
<li class="off">&#x2610; <code>inetutils</code> (for getting <code>telnet</code> to work with expect)</li>
<li class="off">&#x2610; <code>nc</code> (see socat)</li>
<li class="off">&#x2610; <code>openssh</code></li>
<li class="off">&#x2610; <code>ping</code> (Note: Allow to &ldquo;Run this program as an administrator&rdquo;)</li>
<li class="off">&#x2610; <code>rsync</code></li>
<li class="off">&#x2610; <code>socat</code> (see nc)</li>
</ul></li>

<li>Perl
<ul class="org-ul">
<li class="off">&#x2610; <code>perl</code></li>
</ul></li>

<li>Publishing
<ul class="org-ul">
<li class="on">&#x2611; <code>texlive</code> (= TeX only, not LaTeX!  It requires <code>fontconfig</code> and <code>ghostscript</code>)</li>
<li class="on">&#x2611; <code>texlive-collection-latex</code></li>
<li class="on">&#x2611; <code>texlive-collection-latexextra</code> (for <code>draftwatermark.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-genericrecommended</code> (for <code>ulem.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-fontsrecommended</code> (for <code>marvosym.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-science</code> (for <code>siunitx.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-binextra</code> (for <code>latexmk</code>)</li>
<li class="on">&#x2611; <code>texlive-collection-langfrench</code> (for <code>frenchb</code>)</li>
</ul></li>
<li>Python
<ul class="org-ul">
<li class="on">&#x2611; <code>python</code></li>
</ul></li>

<li>Ruby
<ul class="org-ul">
<li class="off">&#x2610; <code>ruby</code></li>
</ul></li>

<li>Shells
<ul class="org-ul">
<li class="on">&#x2611; ~zsh</li>
<li class="off">&#x2610; <code>rxvt</code></li>
</ul></li>

<li>System
<ul class="org-ul">
<li class="off">&#x2610; <code>procps</code> (to get <code>top</code>)</li>
<li class="off">&#x2610; <code>psmisc</code> (to get <code>killall</code>)</li>
</ul></li>

<li>Tcl
<ul class="org-ul">
<li class="off">&#x2610; <code>expect</code></li>
</ul></li>

<li>Text
<ul class="org-ul">
<li class="on">&#x2611; <code>texinfo</code> (for <code>makeinfo</code>)</li>
<li class="off">&#x2610; <code>antiword</code></li>
<li class="off">&#x2610; <code>aspell</code> (Note that the Win32 binary has <b>much</b> more dictionaries! Use that
one instead&#x2026;)</li>
<li class="off">&#x2610; <code>most</code></li>
<li class="off">&#x2610; <code>opensp</code> (for <code>nsgmls</code> validator)</li>
<li class="off">&#x2610; <code>tidy</code></li>
</ul></li>

<li>Utils
<ul class="org-ul">
<li class="on">&#x2611; <code>gnupg</code> (<code>gpg</code>)</li>
<li class="on">&#x2611; <code>ncurses</code> (provides the <code>clear</code> command used by the TeX Live installer,
though you can use <code>C-l</code> to get the same result)</li>
<li class="on">&#x2611; <code>cygutils</code> (for <code>unix2dos</code>)</li>
<li class="on">&#x2611; <code>tig</code> (Git browser)</li>
<li class="off">&#x2610; <code>fdupes</code></li>
<li class="off">&#x2610; <code>file</code> to determine file type</li>
<li class="off">&#x2610; <code>flog</code> (logger, to syslog)</li>
<li class="off">&#x2610; <code>patch</code> and <code>patchutils</code></li>
<li class="off">&#x2610; <code>screen</code></li>
</ul></li>

<li>X11
<ul class="org-ul">
<li class="off">&#x2610; <code>fontconfig</code> (needed by XeTeX)</li>
</ul></li>

<li>Web
<ul class="org-ul">
<li class="on">&#x2611; <code>curl</code></li>
<li class="off">&#x2610; <code>w3m</code></li>
<li class="off">&#x2610; <code>wget</code></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6">Terminal emulators</h4>
<div class="outline-text-4" id="text-orgheadline6">
<p>
For a better Emacs experience than with the Cygwin console, use:
</p>

<ul class="org-ul">
<li>MinTTY</li>
<li>(u)rxvt</li>
<li>xterm</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7">GnuPG</h4>
<div class="outline-text-4" id="text-orgheadline7">
<p>
When first running <code>gpg</code>:
</p>

<ul class="org-ul">
<li>Directory <code>~/.gnupg</code> created</li>
<li>New configuration file <code>~/.gnupg/gpg.conf</code> created</li>
<li>Keyring <code>~/.gnupg/secring.gpg</code> created</li>
<li>Keyring <code>~/.gnupg/pubring.gpg</code> created</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8">Suppress the Cygwin DOS path warning</h4>
<div class="outline-text-4" id="text-orgheadline8">
<p>
When first running <code>M-x ediff-buffers</code>, I got this Cygwin warning:
</p>

<pre class="example">
MS-DOS style path detected: c:/Users/...
Preferred POSIX equivalent is: /cygdrive/c/Users/...
CYGWIN environment variable option "nodosfilewarning" turns off this warning.
Consult the user's guide for more details about POSIX paths:
  http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
</pre>

<p>
Though, setting it in <code>.bashrc</code> or something like that does not work. A good
place to set it is in the global <b>Windows environment variables</b>.
</p>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9">Suppress the annoying &ldquo;tty option&rdquo; warning</h4>
<div class="outline-text-4" id="text-orgheadline9">
<pre class="example">
"tty" option detected in CYGWIN environment variable.
CYGWIN=tty is no longer supported.  Please remove it from your
CYGWIN environment variable and use a terminal emulator like mintty,
xterm, or rxvt.
</pre>

<p>
This is not a Cygwin problem: <code>Emacs-w3m</code> used to set the <code>CYGWIN</code> environment
variable in <code>w3m.el</code>. Just edit that file and remove the setting. Alternatively,
it looks like you could solve the problem by customizing
<code>w3m-command-environment</code>.
</p>

<p>
Though, downloading (via the anonymous CVS server) the latest source code from
<a href="http://emacs-w3m.namazu.org/">http://emacs-w3m.namazu.org/</a> also solves the problem.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10">Basic installation</h3>
<div class="outline-text-3" id="text-orgheadline10">
<p>
ShellRC-Leuven is installed by doing the following:
</p>

<ol class="org-ol">
<li><p>
<b>Clone the repository:</b>
</p>

<div class="org-src-container">

<pre class="src src-shell">git clone git@github.com:fniessen/shellrc-leuven.git ~/.shellrc-leuven
</pre>
</div></li>

<li><p>
<b>Source ShellRC-Leuven configuration files</b>
</p>

<div class="org-src-container">

<pre class="src src-shell">. ~/.shellrc-leuven/etc/bash_profile
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell">. ~/.shellrc-leuven/etc/zprofile
</pre>
</div>

<p>
Or&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-keyword">if</span> [ -d <span class="org-string">"$HOME/.shellrc-leuven/src"</span> ]; <span class="org-keyword">then</span>
    <span class="org-variable-name">PATH</span>=<span class="org-string">"$HOME/.shellrc-leuven/src:$PATH"</span>
<span class="org-keyword">fi</span>
</pre>
</div></li>
</ol>

<p>
Once you open up a new terminal window with Bash or Zsh, it should load with
ShellRC-Leuven&rsquo;s configuration.
</p>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11">Custom directory</h3>
<div class="outline-text-3" id="text-orgheadline11">
<p>
If you&rsquo;d like to change the install directory with the <code>ZSH</code> environment variable,
either by running export ZSH=/your/path before installing,
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-2">
<h2 id="orgheadline13">Startup files</h2>
<div class="outline-text-2" id="text-orgheadline13">
<p>
There are 3 <b>types of shells</b>:
</p>

<ul class="org-ul">
<li><p>
(interactive) <b>login</b>
</p>

<p>
(for which <code>c:/cygwin/etc/profile</code> and <code>.profile</code> are read, which sources <code>.bashrc</code>
as well)
</p>

<div class="note">
<p>
Launching Cygwin Terminal (login shell) does not load <code>.bashrc</code> on its own, it
only loads <code>.bash_profile</code>. Hence, the need to have a <code>.bash_profile</code> sourcing
<code>.bashrc</code>&#x2026;
</p>

</div></li>

<li><p>
<b>interactive</b> (non-login)
</p>

<p>
(for which <code>.bashrc</code> is read)
</p></li>

<li><p>
normal shell
</p>

<p>
i.e. one that&rsquo;s running a <b>script</b> (Bash does not execute any initialization
file in this case!)
</p>

<p>
<code>$tty</code> is empty.
</p></li>
</ul>

<p>
We just let <code>.profile</code> also read <code>.bashrc</code> and put everything in <code>.bashrc</code>.
</p>

<p>
<b>Read</b> <a href="http://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/">Zsh/Bash startup files loading order</a>:
</p>

<ul class="org-ul">
<li>For Bash, put stuff in <code>~/.bashrc</code>, and make <code>~/.bash_profile</code> source it.</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">User dependent .bash_profile file</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Source the user's .bashrc if it exists.</span>
<span class="org-keyword">if</span> [ -f <span class="org-string">"${HOME}/.bashrc"</span> ]; <span class="org-keyword">then</span>
  <span class="org-builtin">source</span> <span class="org-string">"${HOME}/.bashrc"</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<ul class="org-ul">
<li>For Zsh, put stuff in <code>~/zprofile</code>, which is always executed.</li>
</ul>

<p>
To recover the default Bash configuration files, get their copy from
<code>/etc/skel</code>.
</p>

<div class="note">
<p>
If you get a couple of &ldquo;command not found&rdquo; errors and a corrupt prompt at
startup, then your <code>.bashrc</code> is probably in Windows text format (<code>\r\n</code> line
endings).  Make sure your editor is in Unix format when creating text files.
</p>

</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">What to put where?</h3>
<div class="outline-text-3" id="text-orgheadline14">
<p>
Login shell runs <code>.profile</code> (or <code>.bash_profile</code> or <code>.bash_login</code>) on startup. Set your
env variables in there, because sub-shells will inherit the env vars. Then make
<code>.profile</code> run your <code>.bashrc</code>:
</p>

<div class="org-src-container">

<pre class="src src-shell">. .bashrc
</pre>
</div>

<p>
Interactive runs <code>.bashrc</code>. Since it inherits envs, but not aliases, put your
aliases in this file.
</p>

<p>
Shell scripts, cron jobs, and the like, run with a bare shell: no bashrc or
profiles are run. No kidding you get 4 env vars set, the bare minimum. Therefore
your <code>PATH</code> won&rsquo;t work very well so you often have to give an absolute pathname
like in <code>crontab</code>:
</p>

<div class="org-src-container">

<pre class="src src-shell">right: 0 0 * * 2 /usr/sbin/apachectl restart
wrong: 0 0 * * 2 apachectl restart
</pre>
</div>

<p>
From <a href="https://www.linuxquestions.org/questions/linux-general-1/difference-between-normal-shell-and-login-shell-14983/#post4828786">https://www.linuxquestions.org/questions/linux-general-1/difference-between-normal-shell-and-login-shell-14983/#post4828786</a>
</p>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">What to put in your Zsh startup files</h3>
<div class="outline-text-3" id="text-orgheadline15">
<p>
See <a href="http://zsh.sourceforge.net/Guide/zshguide02.html">http://zsh.sourceforge.net/Guide/zshguide02.html</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16">Bash specific</h2>
<div class="outline-text-2" id="text-orgheadline16">
<p>
Le <code>!</code> en shell permet plein de trucs sympa.
</p>

<ul class="org-ul">
<li><code>!!</code> refait la dernière commande</li>
<li><code>!cmd</code> refait la dernière commande commençant par <code>cmd</code></li>
<li><code>!cmd:p</code> permet de visualiser sans éxecuter la dernière commande commençant
par <code>cmd</code></li>
<li><code>!$</code> est le dernier mot de la ligne de commande précédente</li>
<li><code>!cmd:$</code> est le dernier mot du dernier ligne de commande commençant par <code>cmd</code></li>
<li><code>!*</code> est l&rsquo;ensemble de la dernière ligne de commande à part le premier mot</li>
</ul>

<p>
Pourquoi ce dernier est-il utile ?  Pense à ceci :
</p>

<div class="org-src-container">

<pre class="src src-shell">$ gm convret -size 120x120 input.png -resize 120x120 -draw <span class="org-string">"gravity southeast text 0,0 'Dave Neary'"</span> output.jpg
bash: convret: command not found
$ gm convert !*
</pre>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">Preamble</h3>
<div class="outline-text-3" id="text-orgheadline17">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">## </span><span class="org-comment">bash_profile --- Bourne Again Shell configuration file (for interactive shells)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2003-2015 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: bash, dotfile, config</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Code:</span>
</pre>
</div>

<p>
Prevent &ldquo;stdin is not a tty&rdquo; errors when <code>ssh</code>&rsquo;ing to a remote machine (or using
<code>rsync</code>):
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">If not running interactively, don't do anything.</span>
[[ <span class="org-string">"$-"</span> != *i* ]] &amp;&amp; <span class="org-keyword">return</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">Source global rc file (if any)</h3>
<div class="outline-text-3" id="text-orgheadline18">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Source global definitions only if the session is interactive.</span>
<span class="org-keyword">if</span> ([ $(expr index <span class="org-string">"$-"</span> i) -ne 0 ] &amp;&amp; [ -f /etc/bashrc ]); <span class="org-keyword">then</span>
    . /etc/bashrc
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
A common cause is <code>mesg y</code> in <code>/etc/bashrc</code> on the remote machine, hence the user
has to try avoiding sourcing it (on the <b>remote</b> machine) in non-interactive
sessions.
</p>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19">Command history</h3>
<div class="outline-text-3" id="text-orgheadline19">
<p>
Access and modify commands that you had previously typed at the command line.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">History.</span>
<span class="org-variable-name">HISTFILE</span>=$<span class="org-variable-name">HOME</span>/.bash_history            <span class="org-comment-delimiter"># </span><span class="org-comment">If paranoiac, `/dev/null'.</span>
<span class="org-variable-name">HISTSIZE</span>=1000
<span class="org-variable-name">HISTFILESIZE</span>=1000
<span class="org-variable-name">HISTIGNORE</span>=<span class="org-string">"&amp;:[bf]g:exit"</span>
<span class="org-variable-name">HISTCONTROL</span>=ignoredups
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20">Prompt</h3>
<div class="outline-text-3" id="text-orgheadline20">
<p>
Appearance of the prompt.
</p>

<p>
Note <code>\[...\]</code> used by the shell to count proper length.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">** Controlling the Prompt</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Regular colors.</span>
<span class="org-variable-name">green</span>=<span class="org-string">"\[\e[0;32m\]"</span>
<span class="org-variable-name">yellow</span>=<span class="org-string">"\[\e[0;33m\]"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Bold colors.</span>
<span class="org-variable-name">BLACK</span>=<span class="org-string">"\[\e[1;30m\]"</span>
<span class="org-variable-name">RED</span>=<span class="org-string">"\[\e[1;31m\]"</span>
<span class="org-variable-name">GREEN</span>=<span class="org-string">"\[\e[1;32m\]"</span>

<span class="org-variable-name">reset</span>=<span class="org-string">"\[\e[0m\]"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PROMPT_COMMAND + PS1 --- Default interaction prompt</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">To be called just before the prompt is printed.</span>
<span class="org-function-name">leuven-before-prompt</span> ()
{
    <span class="org-variable-name">RET</span>=$<span class="org-variable-name">?</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Set a color prompt (unless in Emacs).</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">TERM</span><span class="org-keyword"> in</span>
        cygwin|xterm*|rxvt-unicode)
            <span class="org-comment-delimiter"># </span><span class="org-comment">`M-x shell' under Cygwin Emacs.</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">`M-x term' under Cygwin Emacs.</span>
            <span class="org-builtin">local</span> <span class="org-variable-name">color_prompt</span>=yes
            ;;
        emacs)
            <span class="org-comment-delimiter"># </span><span class="org-comment">`M-x shell' under EmacsW32.</span>
            <span class="org-builtin">local</span> <span class="org-variable-name">color_prompt</span>=no
            ;;
    <span class="org-keyword">esac</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Colorful prompt, based on whether the previous command succeeded or not.</span>
    <span class="org-keyword">if</span> [ $<span class="org-variable-name">RET</span> -eq 0 ]; <span class="org-keyword">then</span>
        <span class="org-variable-name">HILIT_RET</span>=${<span class="org-variable-name">GREEN</span>}
    <span class="org-keyword">else</span>
        <span class="org-variable-name">HILIT_RET</span>=${<span class="org-variable-name">RED</span>}
    <span class="org-keyword">fi</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Replace the `$HOME' prefix by `~' in the current directory.</span>
    <span class="org-keyword">if</span> [ <span class="org-string">"$HOME"</span> = <span class="org-string">"${PWD:0:${#HOME}}"</span> ]; <span class="org-keyword">then</span>
        <span class="org-variable-name">myPWD</span>=<span class="org-string">"~${PWD:${#HOME}}"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">myPWD</span>=$<span class="org-variable-name">PWD</span>
    <span class="org-keyword">fi</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">How many characters of the path should be kept.</span>
    <span class="org-builtin">local</span> <span class="org-variable-name">pwd_max_length</span>=15

    <span class="org-keyword">if</span> [ ${#<span class="org-variable-name">myPWD</span>} -gt $<span class="org-variable-name">pwd_max_length</span> ]; <span class="org-keyword">then</span>
        <span class="org-builtin">local</span> <span class="org-variable-name">pwd_offset</span>=$(( ${#<span class="org-variable-name">myPWD</span>} - $<span class="org-variable-name">pwd_max_length</span> ))
        <span class="org-variable-name">myPWD</span>=<span class="org-string">"...${myPWD:$pwd_offset:$pwd_max_length}"</span>
    <span class="org-keyword">fi</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Prompt character.</span>
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -eq 0 ]]; <span class="org-keyword">then</span>
        <span class="org-builtin">local</span> <span class="org-variable-name">PROMPTCHAR</span>=<span class="org-string">"#"</span>
    <span class="org-keyword">else</span>
        <span class="org-builtin">local</span> <span class="org-variable-name">PROMPTCHAR</span>=<span class="org-string">"$"</span>
    <span class="org-keyword">fi</span>

    <span class="org-keyword">if</span> [ <span class="org-string">"$color_prompt"</span> = <span class="org-string">"yes"</span> ]; <span class="org-keyword">then</span>
        <span class="org-variable-name">PS1</span>=<span class="org-string">"${green}\u@\h${BLACK}:${yellow}${myPWD}${HILIT_RET} ${RET}${reset}${PROMPTCHAR} "</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">PS1</span>=<span class="org-string">"\u@\h:${myPWD} ${RET}${PROMPTCHAR} "</span>
    <span class="org-keyword">fi</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">Execute the content of the `PROMPT_COMMAND' just before displaying the `PS1'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">variable.</span>
<span class="org-keyword">case</span> <span class="org-string">"$TERM"</span><span class="org-keyword"> in</span>
    <span class="org-string">"dumb"</span>)
        <span class="org-comment-delimiter"># </span><span class="org-comment">No fancy multi-line prompt for TRAMP (see `tramp-terminal-type').</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Don't confuse it!</span>
        <span class="org-variable-name">PS1</span>=<span class="org-string">"&gt; "</span>
        ;;
    *)
        <span class="org-variable-name">PROMPT_COMMAND</span>=leuven-before-prompt
        ;;
<span class="org-keyword">esac</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PS2 --- Continuation interactive prompt</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PS3 --- Prompt used by "select" inside shell script</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PS4 --- Used by "set -x" to prefix tracing output</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Get line numbers when you run with `-x'.</span>
<span class="org-variable-name">PS4</span>=<span class="org-string">'+'</span>${<span class="org-variable-name">green</span>}<span class="org-string">'[$0:${LINENO}]+ '</span>${<span class="org-variable-name">reset</span>}
</pre>
</div>

<div class="note">
<p>
Single quotes around <code>LINENO</code> in <code>PS4</code>; otherwise, <b>this</b> line number is taken&#x2026;
</p>

</div>

<div class="tip">
<p>
If you are looking at performance issues, put <code>$SECONDS</code> in the PS4 prompt as
well.
</p>

</div>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21">Default permissions</h3>
<div class="outline-text-3" id="text-orgheadline21">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Permissions on newly created files.</span>
<span class="org-builtin">umask</span> 022                               <span class="org-comment-delimiter"># </span><span class="org-comment">Prevent new dirs and files from being</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">group and world writable.</span>
<span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -eq 0 ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">umask</span> 077                           <span class="org-comment-delimiter"># </span><span class="org-comment">Stricter.</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22">Shell options</h3>
<div class="outline-text-3" id="text-orgheadline22">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Correct minor misspellings of cd pathnames.</span>
shopt -s cdspell
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23">Miscellaneous</h3>
<div class="outline-text-3" id="text-orgheadline23">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">** 8.6 Programmable Completion</span>

complete -A helptopic help
complete -A hostname ssh telnet nmap ftp ping host traceroute nslookup
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment"># Get a file's basename, dirname, extension, etc</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Get extension; everything after last '.'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ext=${file##*.}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Basename.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">basename=`basename "$file"`</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Everything after last '/'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">basename=${file##*/}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Dirname.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">dirname=`dirname "$file"`</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Everything before last '/'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">basename=${file%/*}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24">Source common file</h3>
<div class="outline-text-3" id="text-orgheadline24">
<p>
<code>commonprofile</code> contains miscellaneous settings common to Bash and Zsh.
</p>

<p>
An <b>alias</b> is a simple string substitution.
</p>

<div class="note">
<p>
By default, it is <b>not expanded in non-interactive shells</b> (scripts, and even
functions called in an interactive shell!).
</p>

</div>

<p>
In general, it should not do more than <b>change the default options of a command</b>.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Source common settings.</span>
: ${<span class="org-variable-name">SHELLRC_LEUVEN</span>:=<span class="org-string">"$HOME/src/shellrc-leuven"</span>} <span class="org-comment-delimiter"># </span><span class="org-comment">Necessary to use $HOME!</span>
. $<span class="org-variable-name">SHELLRC_LEUVEN</span>/etc/commonprofile
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-3">
<h3 id="orgheadline25">Postamble</h3>
<div class="outline-text-3" id="text-orgheadline25">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* Local Variables</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: outline-minor</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">sh-shell: bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">bash_profile ends here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline26" class="outline-3">
<h3 id="orgheadline26">InputRC</h3>
<div class="outline-text-3" id="text-orgheadline26">
<p>
This file controls the behavior of line input editing for programs that use
the Gnu <b>Readline</b> library. Existing programs include FTP, Bash, and Gdb.
</p>

<div class="note">
<p>
Zsh doesn&rsquo;t use the <code>inputrc</code> file.
</p>

</div>

<p>
See <a href="https://code.google.com/p/mintty/wiki/Tips#Readline_configuration">https://code.google.com/p/mintty/wiki/Tips#Readline_configuration</a>.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">## </span><span class="org-comment">.inputrc --- my Readline Init File</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2005-2015 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: readline, dotfile, config</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">First, include any system-wide settings (ignored if one has his own</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">`.inputrc').</span>
$<span class="org-variable-name">include</span> /etc/skel/.inputrc
$<span class="org-variable-name">include</span> /etc/inputrc

<span class="org-comment-delimiter"># </span><span class="org-comment">Allow Meta (Alt) key bindings [line added to the top of my `.inputrc'].</span>
<span class="org-builtin">set</span> convert-meta on

<span class="org-comment-delimiter"># </span><span class="org-comment">Behave like Emacs when editing.</span>
<span class="org-builtin">set</span> editing-mode emacs                  <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-a/e      Start/End of line.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-f/b      Forward/Backward one character.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-d        Delete one character.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-k        Kill line.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-p/n      Previous/Next command in history.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-r        Search for command in history.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-i/TAB    File name completion.</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Some defaults / modifications for the Emacs mode.</span>
$<span class="org-variable-name">if</span> <span class="org-variable-name">mode</span>=emacs

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;C-up/down&gt; for searching matching commands from the history.</span>
<span class="org-string">"\e[1;5A"</span>: history-search-backward
<span class="org-string">"\e[1;5B"</span>: history-search-forward

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;C-left/right&gt; to move by whole words.</span>
<span class="org-string">"\e[1;5C"</span>: forward-word
<span class="org-string">"\e[1;5D"</span>: backward-word

Meta-p: history-search-backward
Meta-n: history-search-forward

$<span class="org-variable-name">endif</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Ignore case while completing.</span>
<span class="org-builtin">set</span> completion-ignore-case on

<span class="org-comment-delimiter"># </span><span class="org-comment"># Display all alternatives for completion after one tab keypress.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">set show-all-if-ambiguous on</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#* Get Bash to display accented characters (Emacs *Meta Key* Problems in XTerm)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># Don't strip characters to 7 bits when reading.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">set input-meta on</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># (Synonym of 'meta-flag'.)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># Display characters with the eighth bit set directly rather than as</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># meta-prefixed characters.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">set output-meta on</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">.inputrc ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-2">
<h2 id="orgheadline27">Zsh specific</h2>
<div class="outline-text-2" id="text-orgheadline27">
<p>
Documentation: <a href="http://www.bash2zsh.com/zsh_refcard/refcard.pdf">Zsh Reference Card</a>.
</p>
</div>

<div id="outline-container-orgheadline28" class="outline-3">
<h3 id="orgheadline28">Examples</h3>
<div class="outline-text-3" id="text-orgheadline28">
<ul class="org-ul">
<li><a href="http://aperiodic.net/phil/prompt/">Phil!'s ZSH Prompt</a></li>
<li><a href="http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt/">My Extravagant Zsh Prompt</a> (with Git Repository Information)</li>
<li><a href="http://grml.org/zsh/zsh-lovers.html">zsh-lovers</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline29" class="outline-3">
<h3 id="orgheadline29">Preamble</h3>
<div class="outline-text-3" id="text-orgheadline29">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">## </span><span class="org-comment">zprofile --- Z Shell configuration file (for interactive shells)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2009-2015 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: zsh, dotfile, config</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Code:</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline30" class="outline-3">
<h3 id="orgheadline30">Oh-my-Zsh Agnoster theme</h3>
<div class="outline-text-3" id="text-orgheadline30">
<div class="note">
<p>
We put Oh-my-Zsh at the very beginning, so that it does not override our own
settings.
</p>

<p>
In fact, we should just take the theme, and explicitly disable plugins we&rsquo;re not
interested in&#x2026;
</p>

</div>

<p>
I am fan of <code>agnoster</code>.
</p>

<p>
Make sure to use a <a href="https://github.com/Lokaltog/powerline-fonts">patched up font</a> though.
</p>

<div class="note">
<p>
If you right click them, there should be install option in the menu. Or you can
drag it straight to Windows Fonts folder
</p>

</div>

<p>
Good-looking fonts:
</p>
<ul class="org-ul">
<li>UbuntuMono</li>
<li>DejaVuSansMono</li>
<li>DroidSansMono (bad?)</li>
</ul>

<p>
For Consolas, use: <a href="https://github.com/runsisi/consolas-font-for-powerline">https://github.com/runsisi/consolas-font-for-powerline</a>.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-keyword">if</span> [ -r <span class="org-string">"$HOME/.oh-my-zsh"</span> ]; <span class="org-keyword">then</span>
    <span class="org-variable-name">ZSH</span>=$<span class="org-variable-name">HOME</span>/.oh-my-zsh
    <span class="org-variable-name">ZSH_THEME</span>=<span class="org-string">"agnoster"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">plugins=(git osx rails ruby github node rbenv npm brew byte)</span>
    . $<span class="org-variable-name">ZSH</span>/oh-my-zsh.sh
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline31" class="outline-3">
<h3 id="orgheadline31">Command history</h3>
<div class="outline-text-3" id="text-orgheadline31">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">History.</span>
<span class="org-variable-name">HISTFILE</span>=$<span class="org-variable-name">HOME</span>/.histfile
<span class="org-variable-name">HISTSIZE</span>=1000
<span class="org-variable-name">SAVEHIST</span>=1000

<span class="org-comment-delimiter"># </span><span class="org-comment">Append new history lines instead of overwriting (important for multiple</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">parallel Zsh sessions!).</span>
<span class="org-builtin">setopt</span> appendhistory

<span class="org-comment-delimiter"># </span><span class="org-comment">Don't save command more than once when occuring more often.</span>
<span class="org-builtin">setopt</span> HIST_IGNORE_DUPS

<span class="org-comment-delimiter"># </span><span class="org-comment">Use the same history file for all sessions.</span>
<span class="org-builtin">setopt</span> SHARE_HISTORY
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline32" class="outline-3">
<h3 id="orgheadline32">Prompt</h3>
<div class="outline-text-3" id="text-orgheadline32">
<p>
Zsh expects that every character in <code>PS1</code> will advance the cursor one space.  Wrap
any non-printing escape sequences in <code>%{...%}</code>, and it should work. So use
<code>%{\e[31m%}</code>, etc.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Some colors.</span>
<span class="org-builtin">local</span> <span class="org-variable-name">BLACK</span>=$<span class="org-string">'%{\e[1;30m%}'</span>
<span class="org-builtin">local</span> <span class="org-variable-name">RED</span>=$<span class="org-string">'%{\e[1;31m%}'</span>
<span class="org-builtin">local</span> <span class="org-variable-name">green</span>=$<span class="org-string">'%{\e[0;32m%}'</span>
<span class="org-builtin">local</span> <span class="org-variable-name">GREEN</span>=$<span class="org-string">'%{\e[1;32m%}'</span>
<span class="org-builtin">local</span> <span class="org-variable-name">yellow</span>=$<span class="org-string">'%{\e[0;33m%}'</span>
<span class="org-builtin">local</span> <span class="org-variable-name">reset</span>=$<span class="org-string">'%{\e[0m%}'</span>
</pre>
</div>

<div class="inlinetask">
<b><span class="todo TODO">TODO</span> Define colors using <code>terminfo</code></b><br  />
<p>
See <a href="http://superuser.com/questions/239290/how-can-i-make-zsh-show-that-there-are-stashed-revisions-on-a-git-repo-whenever">http://superuser.com/questions/239290/how-can-i-make-zsh-show-that-there-are-stashed-revisions-on-a-git-repo-whenever</a>
</p>
</div>

<p>
For the prompt, the tricky part was getting the syntax for testing the exit
code.  The syntax is <code>%(x.true-string.false-string)</code>, where <code>x</code> is some arbitrary
testing condition, in this case, <code>?</code> for exit codes.  After the first dot, if the
test passes, show <code>true-string</code>; if it fails, show <code>false-string</code> after the second
dot.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Custom prompt settings.</span>
<span class="org-variable-name">PROMPT</span>=<span class="org-string">"$green%n@%m$BLACK:$yellow%2. %(?.$GREEN.$RED)%?$reset%(!.#.$) "</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">? - Exit code of the previous command.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">n - User name.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">m - Machine name.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">. - Abbreviated pwd.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">! - su?</span>
</pre>
</div>

<p>
Insert beep when last command has failed.
</p>

<div class="tip">
<p>
For portability and readability, we use the <code>tput</code> command.
</p>

<p>
But since it&rsquo;s an external command, we run it once to get the bel sequence, and
then stick that sequence in the relevant part of our prompt &#x2013; for performance,
to avoid an unnecessary shellout at each prompt evaluation.
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-variable-name">BEL</span>=$(tput bel)
<span class="org-variable-name">PROMPT</span>+=<span class="org-string">'%(?::$BEL)'</span>
</pre>
</div>

<p>
To get a blank line before the prompt, you can write a function to echo a blank
line and adding it to your <code>preexec</code> or <code>precmd</code> hooks.
</p>

<p>
Technically, it doesn&rsquo;t inset a line after each commands output, but inserts
a blank line before building the prompt. However, the end result is the
same.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-keyword">function</span> <span class="org-function-name">echo_blank</span>() {
    <span class="org-builtin">echo</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">preexec_functions+=echo_blank</span>
<span class="org-variable-name">precmd_functions</span>+=echo_blank
</pre>
</div>

<p>
Don&rsquo;t confuse TRAMP:
</p>

<div class="org-src-container">

<pre class="src src-shell">[ <span class="org-string">"$TERM"</span> = <span class="org-string">"dumb"</span> ] &amp;&amp; <span class="org-variable-name">PROMPT</span>=<span class="org-string">"&gt; "</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-4">
<h4 id="orgheadline33">Right prompt with Zsh-Git-prompt</h4>
<div class="outline-text-4" id="text-orgheadline33">
<p>
<a href="https://github.com/olivierverdier/zsh-git-prompt">https://github.com/olivierverdier/zsh-git-prompt</a>
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Prompt on the right hand side of the screen (Git info).</span>
. ~/Public/Repositories/zsh-git-prompt/zshrc.sh
<span class="org-variable-name">RPROMPT</span>=<span class="org-string">'$(git_super_status)'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-4">
<h4 id="orgheadline34">Right prompt with Git-prompt</h4>
<div class="outline-text-4" id="text-orgheadline34">
<div class="inlinetask">
<b><span class="todo TODO">TODO</span> See predefined functions provided by <code>git-prompt.sh</code></b><br  />
<p>
<a href="http://www.railstips.org/blog/archives/2009/02/02/bedazzle-your-bash-prompt-with-git-info/">http://www.railstips.org/blog/archives/2009/02/02/bedazzle-your-bash-prompt-with-git-info/</a>
</p>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">. "/cygdrive/c/Program Files (x86)/Git/etc/git-prompt.sh"</span>
. <span class="org-string">"/cygdrive/d/Users/fni/.oh-my-zsh/plugins/gitfast/git-prompt.sh"</span>
<span class="org-builtin">setopt</span> prompt_subst
<span class="org-builtin">export</span> <span class="org-variable-name">GIT_PS1_SHOWDIRTYSTATE</span>=true
<span class="org-builtin">export</span> <span class="org-variable-name">GIT_PS1_SHOWSTASHSTATE</span>=true
<span class="org-builtin">export</span> <span class="org-variable-name">GIT_PS1_SHOWUNTRACKEDFILES</span>=true
<span class="org-builtin">export</span> <span class="org-variable-name">GIT_PS1_SHOWUPSTREAM</span>=verbose
<span class="org-builtin">export</span> <span class="org-variable-name">GIT_PS1_DESCRIBE_STYLE</span>=branch
<span class="org-builtin">export</span> <span class="org-variable-name">GIT_PS1_SHOWCOLORHINTS</span>=true
<span class="org-builtin">export</span> <span class="org-variable-name">RPROMPT</span>=$<span class="org-string">'%{$fg[magenta]%}■%{$reset_color%} $(__git_ps1 "%s")'</span>
</pre>
</div>

<p>
Don&rsquo;t confuse TRAMP:
</p>

<div class="org-src-container">

<pre class="src src-shell">[ <span class="org-string">"$TERM"</span> = <span class="org-string">"dumb"</span> ] &amp;&amp; <span class="org-variable-name">RPROMPT</span>=<span class="org-string">""</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline35" class="outline-3">
<h3 id="orgheadline35">Aliasing</h3>
<div class="outline-text-3" id="text-orgheadline35">
<p>
Some global aliases (expand whatever their position).
</p>
</div>

<div id="outline-container-orgheadline36" class="outline-4">
<h4 id="orgheadline36">Common aliases</h4>
<div class="outline-text-4" id="text-orgheadline36">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Command line head / tail shortcuts</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">H</span>=<span class="org-string">'| head'</span> <span class="org-comment-delimiter">###</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T</span>=<span class="org-string">'| tail'</span> <span class="org-comment-delimiter">###</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">G</span>=<span class="org-string">'| grep -E'</span> <span class="org-comment-delimiter">######</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">L</span>=<span class="org-string">"| less"</span> <span class="org-comment-delimiter">#######</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">M</span>=<span class="org-string">"| less"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">CA</span>=<span class="org-string">"| cat -A"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">21</span>=<span class="org-string">"2&gt;&amp;1"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DN1</span>=<span class="org-string">'1&gt; /dev/null'</span> <span class="org-comment-delimiter">#</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DN2</span>=<span class="org-string">'2&gt; /dev/null'</span> <span class="org-comment-delimiter">#</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> -g <span class="org-variable-name">W</span>=<span class="org-string">'| wc -l'</span> <span class="org-comment-delimiter">####</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">C</span>=<span class="org-string">'| wc -l'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">S</span>=<span class="org-string">'| sort'</span> <span class="org-comment-delimiter">###</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">F</span>=<span class="org-string">' | fmt -'</span> <span class="org-comment-delimiter">##</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A</span>=<span class="org-string">'| awk'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A1</span>=<span class="org-string">"| awk '{print \$1}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A2</span>=<span class="org-string">"| awk '{print \$2}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A3</span>=<span class="org-string">"| awk '{print \$3}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A4</span>=<span class="org-string">"| awk '{print \$4}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A5</span>=<span class="org-string">"| awk '{print \$5}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A6</span>=<span class="org-string">"| awk '{print \$6}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A7</span>=<span class="org-string">"| awk '{print \$7}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A8</span>=<span class="org-string">"| awk '{print \$8}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A9</span>=<span class="org-string">"| awk '{print \$9}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">ND</span>=<span class="org-string">'$(ls -d *(/om[1]))'</span>        <span class="org-comment-delimiter"># </span><span class="org-comment">Newest directory.</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">NF</span>=<span class="org-string">'$(ls *(.om[1]))'</span>           <span class="org-comment-delimiter"># </span><span class="org-comment">Newest file.</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> -- <span class="org-variable-name">cdwd</span>=<span class="org-string">'cd `pwd`'</span>
<span class="org-builtin">alias</span> -- <span class="org-variable-name">cwd</span>=<span class="org-string">'echo $cwd'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">alias h='history 1 | less +G'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline37" class="outline-4">
<h4 id="orgheadline37">Directories</h4>
<div class="outline-text-4" id="text-orgheadline37">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> -g ...=<span class="org-string">'../..'</span>
<span class="org-builtin">alias</span> -g ....=<span class="org-string">'../../..'</span>
<span class="org-builtin">alias</span> -g .....=<span class="org-string">'../../../..'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">When entering a directory, list the contents.</span>
<span class="org-builtin">cd</span>() { <span class="org-builtin">builtin</span> cd <span class="org-string">"$@"</span> &amp;&amp; ls; }
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline38" class="outline-3">
<h3 id="orgheadline38">Ledger</h3>
<div class="outline-text-3" id="text-orgheadline38">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">LEDGER</span>=ledger
<span class="org-builtin">export</span> <span class="org-variable-name">LEDGER_FILE</span>=/Users/fni/Personal/Business/Accounting/LEDGER.dat

<span class="org-comment-delimiter"># </span><span class="org-comment">hledger print [REGEXP]... - Show entries in Ledger format.</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">! `hledger' is better than `ledger' in the sense that it does output</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">! 2 decimals whatever the figure, and that it does not output trailing</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">! spaces. There is no other difference (not even in indentation).</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Other problem with ledger: reports onto 81 columns when using other DATEFMT...</span>

<span class="org-builtin">alias</span> -g <span class="org-variable-name">LG</span>=<span class="org-string">"\$LEDGER -f \$LEDGER_FILE"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DATEFMT</span>=<span class="org-string">'-y %Y/%m/%d'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">for output</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DAILY</span>=<span class="org-string">'--period "daily"'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DLM</span>=<span class="org-string">'--display "d&gt;=[last month]"'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">display of last month</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">CLM</span>=<span class="org-string">'-p "last month"'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">computed total of last month</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">D1</span>=<span class="org-string">'--display "l&lt;=1" --depth 1'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">D2</span>=<span class="org-string">'--display "l&lt;=2" --depth 2'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">BALANCE_SHEET</span>=<span class="org-string">'^Assets ^Liabilities'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">PROFIT_LOSS</span>=<span class="org-string">'^Expenses ^Income'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">lastmonth</span>=<span class="org-string">'LG reg TLM'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Ledger -f FILE [OPTIONS] [COMMAND [PATTERNS]]</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Ledger using `ledger', `hledger' or `beancount' (see `$LEDGER')</span>
<span class="org-function-name">Ledger</span> ()
{
    <span class="org-keyword">if</span> [ $<span class="org-variable-name">#</span> -lt 1 ]; <span class="org-keyword">then</span>
        cat &lt;&lt; EOF 1&gt;&amp;2
<span class="org-sh-heredoc">Usage: $(basename $0) -f FILE [OPTIONS] [COMMAND [PATTERNS]]</span>
<span class="org-sh-heredoc">    or $(basename $0) FILE   (if LEDGER=beancount)</span>
<span class="org-sh-heredoc">EOF</span>
    <span class="org-keyword">fi</span>

    <span class="org-keyword">case</span> ${<span class="org-variable-name">LEDGER</span>} <span class="org-keyword">in</span>
        <span class="org-string">"beancount"</span> )
            ;;

        * )   <span class="org-comment-delimiter"># </span><span class="org-comment">default option</span>
            <span class="org-builtin">shift</span>;  <span class="org-comment-delimiter"># </span><span class="org-comment">for the useless (but expected) `-f'</span>
            ;;
    <span class="org-keyword">esac</span>
    <span class="org-builtin">local</span> <span class="org-variable-name">LEDGER_M4_FILE</span>=$<span class="org-variable-name">1</span>; <span class="org-builtin">shift</span>;

    <span class="org-builtin">local</span> <span class="org-variable-name">LEDGER_FILE</span>=sample-ledger.dat;
    <span class="org-keyword">case</span> ${<span class="org-variable-name">LEDGER</span>} <span class="org-keyword">in</span>
        <span class="org-string">"beancount"</span> )
            m4 -D <span class="org-variable-name">LEDGER</span>=beancount ${<span class="org-variable-name">LEDGER_M4_FILE</span>} |<span class="org-sh-escaped-newline">\</span>
            sed -e <span class="org-string">'s/\(.*\)(\(.*\)) \(.*\)/\1\3 | \2/g'</span> &gt; ${<span class="org-variable-name">LEDGER_FILE</span>}
            bean-web ${<span class="org-variable-name">LEDGER_FILE</span>} $<span class="org-variable-name">@</span>   <span class="org-comment-delimiter"># </span><span class="org-comment">beancount Web interface</span>
            ;;

        * )   <span class="org-comment-delimiter"># </span><span class="org-comment">default option</span>
            m4 ${<span class="org-variable-name">LEDGER_M4_FILE</span>} |<span class="org-sh-escaped-newline">\</span>
            sed -e <span class="org-string">'s/^@/;@/'</span> &gt; ${<span class="org-variable-name">LEDGER_FILE</span>}
            ${<span class="org-variable-name">LEDGER</span>} -f ${<span class="org-variable-name">LEDGER_FILE</span>} $<span class="org-variable-name">@</span>
            ;;
    <span class="org-keyword">esac</span>
    rm ${<span class="org-variable-name">LEDGER_FILE</span>}
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">cat file.ledger | sed -e 's/@check/;@check/' | xargs bean-web</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Use wrapper scripts around gpg with armor on (The --armor option means ascii</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">versus binary). You'll have to enter a password every time you want to run</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ledger.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline39" class="outline-3">
<h3 id="orgheadline39">Zsh line editor</h3>
<div class="outline-text-3" id="text-orgheadline39">
<p>
Useful keybindings:
</p>

<dl class="org-dl">
<dt><code>M-q</code></dt><dd>Type another command in the middle of a long command (look at <code>man</code>, etc.).</dd>

<dt><code>M-.</code></dt><dd>Recall the last argument of the previous command, and so on.</dd>

<dt><code>C-r</code></dt><dd>Do an interactive search across all of the <b>command history</b>.</dd>
</dl>

<p>
Useful commands:
</p>

<dl class="org-dl">
<dt><code>vared VAR</code></dt><dd>Interactively edit variable <code>VAR</code>.</dd>
</dl>

<div class="note">
<p>
See <a href="file://d:/Users/fni/.oh-my-zsh/lib/key-bindings.zsh">file://d:/Users/fni/.oh-my-zsh/lib/key-bindings.zsh</a> for extra key bindings.
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Behave like Emacs when editing.</span>
<span class="org-builtin">bindkey</span> -e

<span class="org-comment-delimiter"># </span><span class="org-comment">Mappings for `Ctrl-up/down' for matching commands from the history.</span>
<span class="org-builtin">bindkey</span> <span class="org-string">';5A'</span> history-search-backward
<span class="org-builtin">bindkey</span> <span class="org-string">';5B'</span> history-search-forward

<span class="org-comment-delimiter"># </span><span class="org-comment">Mappings for `Ctrl-left/right' for word moving.</span>
<span class="org-builtin">bindkey</span> <span class="org-string">';5C'</span> forward-word
<span class="org-builtin">bindkey</span> <span class="org-string">';5D'</span> backward-word

<span class="org-comment-delimiter"># </span><span class="org-comment">Beep when there's an error with the command text you're typing in (e.g. if you</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">hit tab and there are no matching files) -- not as a result of normal commands</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">returning errors.</span>
<span class="org-builtin">setopt</span> beep

<span class="org-comment-delimiter"># </span><span class="org-comment">Make Zsh beep like Bash when backspacing on an empty command line.</span>
<span class="org-function-name">backward-delete-char-beep</span> ()
{
    <span class="org-keyword">if</span> (( <span class="org-variable-name">CURSOR</span> == 0 )); <span class="org-keyword">then</span>
        zle beep
    <span class="org-keyword">fi</span>
    zle backward-delete-char
}
zle -N backward-delete-char-beep
<span class="org-builtin">bindkey</span> <span class="org-string">"^?"</span> backward-delete-char-beep
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline40" class="outline-3">
<h3 id="orgheadline40">19. Completion Widgets</h3>
<div class="outline-text-3" id="text-orgheadline40">
<p>
Zsh will attempt to complete wildcards by expanding them in the command line.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Load general completion.</span>
<span class="org-builtin">autoload</span> -Uz compinit &amp;&amp; compinit

<span class="org-comment-delimiter"># </span><span class="org-comment">Display a list of completions when you give an ambiguous choice (like Bash).</span>
<span class="org-builtin">setopt</span> autolist
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-3">
<h3 id="orgheadline41">20. Completion System</h3>
<div class="outline-text-3" id="text-orgheadline41">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Case-insensitive completion.</span>
zstyle <span class="org-string">':completion:*'</span> matcher-list <span class="org-string">'m:{a-zA-Z}={A-Za-z}'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline42" class="outline-3">
<h3 id="orgheadline42">Zsh Modules</h3>
<div class="outline-text-3" id="text-orgheadline42">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Coloring stderr.</span>
<span class="org-variable-name">STDERRRED</span>=$<span class="org-string">'\e[1;31m'</span>
zmodload zsh/system
<span class="org-function-name">color_err</span> () {
    <span class="org-comment-delimiter"># </span><span class="org-comment">Sysread &amp; syswrite are part of `zsh/system'.</span>
    emulate -LR zsh
    <span class="org-keyword">while</span> sysread
    <span class="org-keyword">do</span>
        syswrite -o 2 <span class="org-string">"${STDERRRED}${REPLY}$terminfo[sgr0]"</span>
    <span class="org-keyword">done</span>
}

<span class="org-keyword">exec</span> 2&gt; &gt;( color_err )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43">Others</h3>
<div class="outline-text-3" id="text-orgheadline43">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Change directory given just path.</span>
<span class="org-builtin">setopt</span> autocd

<span class="org-comment-delimiter"># </span><span class="org-comment">Use additional pattern matching features.</span>
<span class="org-builtin">setopt</span> extendedglob

<span class="org-comment-delimiter"># </span><span class="org-comment">Unmatched patterns cause an error.</span>
<span class="org-builtin">setopt</span> nomatch

<span class="org-comment-delimiter"># </span><span class="org-comment">Immediately report changes in background job status.</span>
<span class="org-builtin">setopt</span> notify
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline44" class="outline-3">
<h3 id="orgheadline44">Source common file</h3>
<div class="outline-text-3" id="text-orgheadline44">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Source common settings.</span>
: ${<span class="org-variable-name">SHELLRC_LEUVEN</span>:=<span class="org-string">"$HOME/src/shellrc-leuven"</span>} <span class="org-comment-delimiter"># </span><span class="org-comment">Necessary to use $HOME!</span>
. $<span class="org-variable-name">SHELLRC_LEUVEN</span>/etc/commonprofile
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* Local Variables</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: outline-minor</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">zprofile ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline45" class="outline-2">
<h2 id="orgheadline45">System-wide configuration file</h2>
<div class="outline-text-2" id="text-orgheadline45">
<p>
Everything in common between Bash and Z shell will come here, since it is read
by both shells.
</p>
</div>

<div id="outline-container-orgheadline46" class="outline-3">
<h3 id="orgheadline46">Preamble</h3>
<div class="outline-text-3" id="text-orgheadline46">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Hey Emacs, this is a -*- sh -*- file</span>
<span class="org-comment-delimiter">## </span><span class="org-comment">commonprofile --- Common features between Bash and Z Shell</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2009-2015 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: bash, zsh, dotfile, config</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline50" class="outline-3">
<h3 id="orgheadline50">Paths</h3>
<div class="outline-text-3" id="text-orgheadline50">
</div><div id="outline-container-orgheadline47" class="outline-4">
<h4 id="orgheadline47">Search path</h4>
<div class="outline-text-4" id="text-orgheadline47">
<p>
Specify the directories that the shell is to look through to find a command.
These directories are searched in the order in which they appear.
</p>

<p>
The global search <code>PATH</code> is defined in the file <code>/etc/environment</code>.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* PATH</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Extend the PATH var (where to look for executable files).</span>
<span class="org-keyword">for</span> MAYBE_PATH<span class="org-keyword"> in</span> <span class="org-string">"$HOME/bin"</span> <span class="org-sh-escaped-newline">\</span>
                  <span class="org-string">"$HOME/expect"</span> <span class="org-sh-escaped-newline">\</span>
                  <span class="org-string">"$HOME/winbin"</span>;
<span class="org-keyword">do</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">`-e' or `-x'?</span>
    <span class="org-keyword">if</span> [ -d <span class="org-string">"$MAYBE_PATH"</span> ]; <span class="org-keyword">then</span>
        <span class="org-variable-name">PATH</span>=<span class="org-string">"$MAYBE_PATH:$PATH"</span>
    <span class="org-keyword">fi</span>
<span class="org-keyword">done</span>
</pre>
</div>

<div class="note">
<p>
<code>PATH</code> should already be marked as exported, so reexporting is not needed.
</p>

</div>

<p>
By default, the <code>root</code> shell does not load commands from the current location.  If
you&rsquo;re <code>root</code> and if you trust those commands, type <code>./whatever-command</code> instead.
</p>

<p>
If you add the <code>CWD</code> (<code>.</code>) to your PATH, just do it:
</p>

<ul class="org-ul">
<li>for <b>non-root users</b>,</li>
<li>as the <b>last entry</b> (so, the current directory is only checked as a last
resort).</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Add the current directory as last component in the search path (not to include</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">for `root', for security reasons).</span>
<span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -ne 0 ]]; <span class="org-keyword">then</span>
    <span class="org-variable-name">PATH</span>=<span class="org-string">"$PATH:."</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline48" class="outline-4">
<h4 id="orgheadline48">Manpath</h4>
<div class="outline-text-4" id="text-orgheadline48">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* MANPATH</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">set MANPATH so it includes user's private man if it exists</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">do the same with MANPATH</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">if [ -d $HOME/man ]; then</span>
<span class="org-comment-delimiter">#    </span><span class="org-comment">MANPATH=$HOME/man:"${MANPATH}"</span>
<span class="org-comment-delimiter">#    </span><span class="org-comment">export MANPATH</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">fi</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">colon separated list of directories to search for manual pages</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">ifnset MANPATH "/usr/man"</span>
    <span class="org-comment-delimiter"># </span><span class="org-leuven-highlight"><span class="org-comment">TODO</span></span><span class="org-comment"> don't define it like that: does not work under Ubuntu!</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">See `/etc/manpath.config'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline49" class="outline-4">
<h4 id="orgheadline49">Infopath</h4>
<div class="outline-text-4" id="text-orgheadline49">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* INFOPATH</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Info readers (standalone + Emacs Info mode)</span>
<span class="org-variable-name">INFOPATH</span>=<span class="org-string">"/usr/share/info:$INFOPATH"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">include a trailing colon on `INFOPATH' to concatenate the Emacs</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">`Info-default-directory-list' when searching for info files</span>
<span class="org-variable-name">INFOPATH</span>=<span class="org-string">"$HOME/src/emacs-w3m/doc:$INFOPATH"</span>
<span class="org-variable-name">INFOPATH</span>=<span class="org-string">"$HOME/src/gnus/texi:$INFOPATH"</span>
<span class="org-variable-name">INFOPATH</span>=<span class="org-string">"$HOME/Downloads/emacs/site-lisp/auctex-11.86/doc:$INFOPATH"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">INFOPATH="$HOME/texlive/2014/texmf/doc/info:$INFOPATH"</span>
<span class="org-variable-name">INFOPATH</span>=<span class="org-string">"$HOME/Public/Repositories/org-mode/doc:$INFOPATH"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline51" class="outline-3">
<h3 id="orgheadline51">Pager</h3>
<div class="outline-text-3" id="text-orgheadline51">
<p>
Set the user&rsquo;s preferred <b>text viewer</b> (<code>cat</code>, <code>more</code> or <code>less</code>) that will be used by
programs such as <code>man</code> or <code>git diff</code>.
</p>

<p>
<code>less</code> is faster than anything else around (with exception of possibly <code>more</code>, but
this one feels really archaic).
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-variable-name">PAGER</span>=<span class="org-string">"less"</span>
</pre>
</div>

<p>
With the <code>less</code> command, you can <b>scroll up</b> in the file as well as down; with the
<code>more</code> command, you can only <b>scroll down</b> the file.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">more</span>=<span class="org-string">"less"</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline52" class="outline-4">
<h4 id="orgheadline52">Less</h4>
<div class="outline-text-4" id="text-orgheadline52">
<p>
<code>less</code> options:
</p>

<dl class="org-dl">
<dt><code>-e</code> or <code>--quit-at-eof</code></dt><dd>Causes <code>less</code> to automatically exit the second time it reaches end-of-file.
By default, the only way to exit <code>less</code> is via the <code>q</code> command.</dd>

<dt><code>-F</code></dt><dd><p>
     Causes <code>less</code> to automatically <b>exit if the entire file can be displayed on
the first screen</b>.
</p>

<div class="warning">
<p>
After quitting so, the screen is reset and you end up not seeing the
content; the <code>-X</code> option does away with that behavior.
</p>

</div></dd>

<dt><code>-i</code> or <code>--ignore-case</code></dt><dd>Causes searches to ignore case; that is, uppercase and lowercase are
considered identical.  This option is ignored if any uppercase letters
appear in the search pattern; in other words, if a pattern contains
uppercase letters, then that search does not ignore case.</dd>

<dt><code>-m</code> or <code>--long-prompt</code></dt><dd>Causes less to prompt verbosely (like <code>more</code>), with the percent into the
file.  By default, <code>less</code> prompts with a colon.</dd>

<dt><code>-M</code> or <code>--LONG-PROMPT</code></dt><dd>Causes <code>less</code> to prompt even more verbosely than <code>more</code>.</dd>

<dt><code>-r</code> or <code>--raw-control-chars</code></dt><dd><p>
     Causes &ldquo;raw&rdquo; control characters to be displayed.  The default is to display
control characters using the caret notation; for example, a <code>control-A</code>
(octal <code>001</code>) is displayed as <code>^A</code>.
</p>

<div class="warning">
<p>
When the <code>-r</code> option is used, <code>less</code> cannot keep track of the actual appearance
of the screen (since this depends on how the screen responds to each type
of control character).  Thus, various display problems may result, such as
long lines being split in the wrong place.
</p>

</div></dd>

<dt><code>-R</code> or <code>--RAW-CONTROL-CHARS</code></dt><dd><p>
     (Only) ANSI &ldquo;<b>color</b>&rdquo; escape sequences (sequences of the form <code>ESC[...m</code> where
the <code>...</code> is zero or more color specification characters, and <code>m</code> ends ANSI
color escape sequences) are <b>output</b> in &ldquo;raw&rdquo; form.
</p>

<div class="note">
<p>
Without <code>--RAW-CONTROL-CHARS</code> (or <code>--raw-control-chars</code>), <code>less</code> outputs the
colors as raw escape codes, that is it does not <b>interpret colors</b>. With it,
<code>git diff</code> finally shows colors&#x2026;
</p>

</div></dd>

<dt><code>-X</code> or <code>--no-init</code></dt><dd><p>
     <b>Disables</b> sending the termcap initialization and deinitialization strings to
the terminal.  This is sometimes desirable if the deinitialization string
does something unnecessary, like <b>clearing the screen</b>.
</p>

<div class="note">
<p>
If you want that <code>less</code> does not <b>clear the terminal</b> when quitting, use the <code>-X</code>
option.
</p>

</div></dd>
</dl>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Tailor `less'.</span>
<span class="org-variable-name">LESS</span>=<span class="org-string">"-F -i -M -R -X"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">export LESS="-P ?c&lt;- .?f%f:Standard input.  ?n:?eEND:?p%pj\%.. .?c%ccol . ?mFile %i of %m  .?xNext\ %x.%t   Press h for help"</span>
</pre>
</div>

<p>
Man pages colors:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Colored man pages: http://linuxtidbits.wordpress.com/2009/03/23/less-colors-for-man-pages/</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Less Colors for Man Pages</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_mb</span>=$<span class="org-string">'\E[01;31m'</span>     <span class="org-comment-delimiter"># </span><span class="org-comment">enter_blink_mode.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_md</span>=$<span class="org-string">'\E[01;38;5;74m'</span> <span class="org-comment-delimiter"># </span><span class="org-comment">enter_bold_mode.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_so</span>=$<span class="org-string">'\E[38;5;016m\E[48;5;220m'</span> <span class="org-comment-delimiter"># </span><span class="org-comment">enter_standout_mode (mode</span>
                                                   <span class="org-comment-delimiter"># </span><span class="org-comment">line at the bottom).</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_us</span>=$<span class="org-string">'\E[04;38;5;146m'</span> <span class="org-comment-delimiter"># </span><span class="org-comment">enter_underline_mode.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_me</span>=$<span class="org-string">'\E[0m'</span>         <span class="org-comment-delimiter"># </span><span class="org-comment">exit_attribute_mode (end modes like</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">`mb' and `md').</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_se</span>=$<span class="org-string">'\E[0m'</span>         <span class="org-comment-delimiter"># </span><span class="org-comment">exit_standout_mode.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_ue</span>=$<span class="org-string">'\E[0m'</span>         <span class="org-comment-delimiter"># </span><span class="org-comment">exit_underline_mode.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">See `terminfo'.</span>
</pre>
</div>

<div class="seealso">
<p>
<a href="file://d:/Users/fni/.minttyrc">.minttyrc</a> to <b>fix colors</b> and fonts.  See <a href="http://mintty.googlecode.com/svn-history/r1065/trunk/docs/mintty.1.html">mintty Manual Reference Pages</a> for more
information.
</p>

</div>

<p>
See also
<a href="http://stackoverflow.com/questions/10535432/tmux-man-page-search-highlighting">http://stackoverflow.com/questions/10535432/tmux-man-page-search-highlighting</a> to
highlight man pages.
</p>
</div>
</div>

<div id="outline-container-orgheadline53" class="outline-4">
<h4 id="orgheadline53">Most</h4>
<div class="outline-text-4" id="text-orgheadline53">
<p>
To add a bit of color to your man pages, you can install <code>most</code>.
</p>

<p>
See <a href="http://www.cyberciti.biz/faq/unix-linux-color-man-pages-configuration/">http://www.cyberciti.biz/faq/unix-linux-color-man-pages-configuration/</a>.
</p>

<div class="note">
<p>
<code>most</code> does not <b>highlight search results</b>: when searching using <code>/</code>, it only scrolls
to the location&#x2026;
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54">Misc</h3>
<div class="outline-text-3" id="text-orgheadline54">
<p>
You may need to manually set your language environment (among others, for <code>svn</code>
with accented file names in the repository).
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">LANG</span>=C.UTF-8
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline55" class="outline-3">
<h3 id="orgheadline55">Terminal types</h3>
<div class="outline-text-3" id="text-orgheadline55">
<ul class="org-ul">
<li><code>dumb</code></li>
<li><code>cygwin</code></li>
<li><code>emacs</code></li>
<li><code>screen</code></li>
<li><code>xterm</code></li>
<li><code>xterm-256color</code></li>
<li><code>eterm-color</code></li>
</ul>

<p>
Set the <b>terminal type</b> explicitly to get a nice <b>256 color</b> palette (instead of the
ugly default 8 colors):
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">TERM</span>=xterm-256color
</pre>
</div>

<div class="seealso">
<p>
Use the script <code>colortest</code> (on Linux distros) to output the default colors.
</p>

</div>

<p>
See what your color palet is for the terminal session:
</p>

<div class="org-src-container">

<pre class="src src-shell">tput colors
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline56" class="outline-3">
<h3 id="orgheadline56">Emacs (default editor)</h3>
<div class="outline-text-3" id="text-orgheadline56">
<p>
Be sure one of these <b>editors</b> is <b>in your search path</b>!
</p>

<div class="warning">
<p>
Right now, I have instead hard-coded the path to Emacs in the
<a href="file://d:/Users/fni/bin/emacsclient">file://d:/Users/fni/bin/emacsclient</a> script.
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Find a suitable editor.</span>
<span class="org-keyword">for</span> editor<span class="org-keyword"> in</span> emacsclientw emacsclient emacs; <span class="org-keyword">do</span>
    <span class="org-keyword">if</span> $(<span class="org-builtin">which</span> $<span class="org-variable-name">editor</span> &gt;&amp; /dev/null); <span class="org-keyword">then</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Set EDITOR.</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">editor</span><span class="org-keyword"> in</span>
            emacsclient*)
                <span class="org-comment-delimiter"># </span><span class="org-comment"># doesn't bother waiting for a response</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">export EDITOR="$editor --no-wait"</span>

                <span class="org-comment-delimiter"># </span><span class="org-comment">If the Emacs server is not running, run `emacs --daemon' to</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">start Emacs in daemon mode, and try to connect to it.</span>
                <span class="org-builtin">export</span> <span class="org-variable-name">EDITOR</span>=<span class="org-string">"$editor -a ''"</span>
                ;;
            *)
                <span class="org-builtin">export</span> <span class="org-variable-name">EDITOR</span>=<span class="org-string">"$editor"</span>
                ;;
        <span class="org-keyword">esac</span>

        <span class="org-builtin">alias</span> <span class="org-variable-name">e</span>=<span class="org-string">"$EDITOR"</span>
        <span class="org-keyword">break</span>
    <span class="org-keyword">fi</span>
<span class="org-keyword">done</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">e</span>=<span class="org-string">"emacsclient -a emacs -n"</span>       <span class="org-comment-delimiter"># </span><span class="org-comment">-n is essential part</span>
</pre>
</div>

<div class="note">
<p>
Shouldn&rsquo;t we alias <code>EDITOR</code> to <code>emacs -nw</code>?
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Use `$EDITOR' for programs wanting an editor.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">VISUAL</span>=<span class="org-string">"$EDITOR"</span>                 <span class="org-comment-delimiter"># </span><span class="org-comment">For `crontab'.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">CVSEDITOR</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">SVN_EDITOR</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">EDIT</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">ERROR_EDITOR</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">FCEDIT</span>=<span class="org-string">"$EDITOR"</span>                 <span class="org-comment-delimiter"># </span><span class="org-comment">For the `fc' (fix command) builtin</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">command.</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">em</span>=emacs-minimal
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">ec FILE - open FILE in a running Emacs</span>
<span class="org-function-name">ec</span> ()
{
    emacsclient --no-wait <span class="org-string">"$1"</span>
}
</pre>
</div>

<p>
I connect to the server with either a terminal or a GUI client like this:
</p>

<pre class="example">
alias et=emacsclient -t                 # New GUI frame.
alias ec=emacsclient -c                 # New terminal frame.
</pre>
</div>
</div>

<div id="outline-container-orgheadline57" class="outline-3">
<h3 id="orgheadline57">Plugins</h3>
<div class="outline-text-3" id="text-orgheadline57">
<p>
Aliases are abbreviations or alternative names (usually mnemonics) for
commands. They are commonly used to specify a few options to commands, and
then include the rest of the command line.
</p>

<p>
Aliases should usually be kept simple. If not, they should be converted to:
</p>
<ul class="org-ul">
<li>shell functions, or</li>
<li>shell scripts.</li>
</ul>

<p>
An alias cannot have an argument like <code>$1</code>.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Grep through the aliases.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">agrep</span>=<span class="org-string">'alias | grep -i'</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline58" class="outline-4">
<h4 id="orgheadline58">Common aliases</h4>
<div class="outline-text-4" id="text-orgheadline58">
<p>
<code>ls</code> options:
</p>

<dl class="org-dl">
<dt><code>-a</code></dt><dd>Do not ignore entries starting with <code>.</code>.</dd>

<dt><code>-C</code></dt><dd>List entries by <b>columns</b>.</dd>

<dt><code>-F</code></dt><dd>Append indicator (one of <code>*/=&gt;@|</code>) to entries.</dd>

<dt><code>-g</code></dt><dd>Like <code>-l</code>, but do not list owner.</dd>

<dt><code>--group-directories-first</code></dt><dd>Group directories before files.</dd>

<dt><code>-G</code></dt><dd>In a long listing, don&rsquo;t print <b>group</b> names.</dd>

<dt><code>-h</code></dt><dd>With <code>-l</code> and/or <code>-s</code>, print <b>human readable</b> sizes (e.g., <code>1K</code> <code>234M</code> <code>2G</code>).</dd>

<dt><code>-l</code></dt><dd>Use a <b>long</b> listing format.</dd>

<dt><code>-s</code></dt><dd>Print the allocated <b>size</b> of each file, in blocks.</dd>
</dl>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-variable-name">LS_OPTIONS</span>=<span class="org-string">"$LS_OPTIONS --show-control-chars"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Enable color support of `ls'.</span>
<span class="org-keyword">if</span> [ <span class="org-string">"$TERM"</span> != <span class="org-string">"dumb"</span> ]; <span class="org-keyword">then</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment"># Add my coloration scheme to directory listings.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">if [ -f $HOME/.dircolors ]; then</span>
    <span class="org-comment-delimiter">#     </span><span class="org-comment">eval "$(dircolors -b $HOME/.dircolors)"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">else</span>
    <span class="org-comment-delimiter">#     </span><span class="org-comment">eval "$(dircolors -b)"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">fi</span>

    <span class="org-builtin">alias</span> <span class="org-variable-name">ls</span>=<span class="org-string">'ls --color=auto -F'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">ll</span>=<span class="org-string">'ls --color=auto -a --group-directories-first -G -h -l'</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Long listing and hidden files.</span>
<span class="org-keyword">else</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">ls</span>=<span class="org-string">'ls -CF'</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
Sort of tree:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">dirf</span>=<span class="org-string">'find . -type d | sed -e "s/[^-][^\/]*\//  |/g" -e "s/|\([^ ]\)/|-\1/"'</span>
</pre>
</div>

<p>
<code>df</code> options:
</p>

<dl class="org-dl">
<dt><code>-h</code></dt><dd>Print sizes in powers of 1024 (e.g., <code>1023M</code>).</dd>

<dt><code>-k</code></dt><dd>Like <code>--block-size=1K</code>.</dd>

<dt><code>-T</code></dt><dd>Print file system type.</dd>
</dl>

<p>
Make <code>df</code> human readable.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">df</span>=<span class="org-string">'df -kTh'</span>
</pre>
</div>

<p>
Make <code>du</code> human readable.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">du</span>=<span class="org-string">'du -kh'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">du</span>=<span class="org-string">'du -h'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">du1</span>=<span class="org-string">'du -h --max-depth=1'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">dus</span>=<span class="org-string">'du -ms * | sort -rn'</span>         <span class="org-comment-delimiter"># </span><span class="org-comment">Ordered by size.</span>
</pre>
</div>

<p>
List all the files in this directory, and sort by human-readable file size.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">sizes</span>=<span class="org-string">"du --max-depth=1 -k | sort -nr | cut -f2 | xargs -d '\n' du -sh"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">fd</span>=<span class="org-string">'find . -type d -name'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">ff</span>=<span class="org-string">'find . -type f -name'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Play safe!  Prevent some accidental mistakes.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">rm</span>=<span class="org-string">'rm -i'</span>                        <span class="org-comment-delimiter"># </span><span class="org-comment">Confirm removing file.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">cp</span>=<span class="org-string">'cp -i'</span>                        <span class="org-comment-delimiter"># </span><span class="org-comment">Confirm copy over an existing file.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">mv</span>=<span class="org-string">'mv -i'</span>                        <span class="org-comment-delimiter"># </span><span class="org-comment">Confirm move over an existing file.</span>
</pre>
</div>

<div class="note">
<p>
The above aliases <b>alter</b> the <b>original</b> meaning of existing commands &#x2013; that
scripts don&rsquo;t expect to see modified!
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Make an extract function!</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tgz</span>=<span class="org-string">"tar -zxvf"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tbz2</span>=<span class="org-string">"tar -jxvf"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Print a more readable PATH (each directory on a new line).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">path</span>=<span class="org-string">'echo $PATH | sed -e "s/:/\n/g"'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">path</span>=<span class="org-string">'echo -e ${PATH//:/\\n}'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Path.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">where</span>=<span class="org-string">'type -a'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">mkall</span>=<span class="org-string">"./configure &amp;&amp; make &amp;&amp; sudo make install"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">sudo'ers</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">root</span>=<span class="org-string">"su - root"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Make executable.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">exe</span>=<span class="org-string">'chmod +x'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Chown current dir and subdirs.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">own</span>=<span class="org-string">'sudo chown -R $USER'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline59" class="outline-4">
<h4 id="orgheadline59">Directories</h4>
<div class="outline-text-4" id="text-orgheadline59">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">up</span>=<span class="org-string">'cd ..'</span>
<span class="org-builtin">alias</span> -- ..=<span class="org-string">'cd ..'</span>
<span class="org-builtin">alias</span> ...=<span class="org-string">'cd ../..'</span>
<span class="org-builtin">alias</span> ....=<span class="org-string">'cd ../../..'</span>
<span class="org-builtin">alias</span> .....=<span class="org-string">'cd ../../../..'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Directory history.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">d</span>=<span class="org-string">'dirs -v'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline60" class="outline-4">
<h4 id="orgheadline60">Single char shortcuts for some commands</h4>
<div class="outline-text-4" id="text-orgheadline60">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">t</span>=<span class="org-string">'tail -f'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">p</span>=<span class="org-string">"$PAGER"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">m</span>=<span class="org-string">'man'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">s</span>=<span class="org-string">'sudo'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">j</span>=<span class="org-string">'jobs -l'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">l</span>=<span class="org-string">'ls'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline61" class="outline-4">
<h4 id="orgheadline61">Git</h4>
<div class="outline-text-4" id="text-orgheadline61">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">g</span>=<span class="org-string">'git'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline62" class="outline-4">
<h4 id="orgheadline62">SVN</h4>
<div class="outline-text-4" id="text-orgheadline62">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Search through files, ignoring .svn directories.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">svn_find</span>=<span class="org-string">"find . -not \( -name .svn -prune \)"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Grep a string in every SVN revision of a file.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Usage: svn_grep_all_rev PATTERN FILE</span>
<span class="org-function-name">svn_grep_all_rev</span>() {
    svn log $<span class="org-variable-name">2</span> | perl -n -e <span class="org-string">'print "$1\n" if m/^r(\d*)\s+/'</span> | (
        <span class="org-keyword">while </span><span class="org-builtin">read</span> revision; <span class="org-keyword">do</span>
            printf <span class="org-string">"\e[0;33m%s\e[0m\n"</span> <span class="org-string">"Revision $revision:"</span>
            svn cat -r $<span class="org-variable-name">revision</span> $<span class="org-variable-name">2</span> | grep $<span class="org-variable-name">1</span>
            printf <span class="org-string">"\n"</span>
        <span class="org-keyword">done</span>
    )
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline63" class="outline-4">
<h4 id="orgheadline63">History</h4>
<div class="outline-text-4" id="text-orgheadline63">
<p>
Print the history lines matching a pattern.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">hgrep</span>=<span class="org-string">"history | grep -i"</span>
</pre>
</div>

<div class="warning">
<p>
We can&rsquo;t call this alias <code>hg</code> as that conflicts with the Mercurial prompt of the
Agnoster theme (checking for the presence of the <code>hg</code> command).
</p>

</div>

<p>
Show the top 10 most used commands in your history.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">history</span> | awk <span class="org-string">'{print $2}'</span> | awk <span class="org-string">'BEGIN {FS="|"} {print $1}'</span> | sort | uniq -c | sort -nr | head -10
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline64" class="outline-4">
<h4 id="orgheadline64">Screen</h4>
<div class="outline-text-4" id="text-orgheadline64">
<p>
Connect to a host in a new screen tab, with the device name as the tab title.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-keyword">function</span> <span class="org-function-name">s</span>()
{
    screen -t <span class="org-string">"$@"</span> /usr/bin/ssh <span class="org-string">"$@"</span>
}

<span class="org-builtin">alias</span> <span class="org-variable-name">screen</span>=<span class="org-string">"screen -U"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">resume</span>=<span class="org-string">'screen -D -R'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">sr</span>=<span class="org-string">'screen -r'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline65" class="outline-4">
<h4 id="orgheadline65">SSH agent / GPG agent</h4>
<div class="outline-text-4" id="text-orgheadline65">
<p>
Most of our servers don&rsquo;t listen to SSH on a public VLAN. I can&rsquo;t be bothered to
keep a tunnel open on my laptop when away from the office:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">zugzug</span>() { ssh -A -p &lt;non_standard_port&gt; -t &lt;proxy_server&gt; ssh $<span class="org-variable-name">1</span>; }
</pre>
</div>

<p>
While it&rsquo;s a function and not an alias, I find it invaluable.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">keyon</span>=<span class="org-string">"ssh-add -t 10800"</span>          <span class="org-comment-delimiter"># </span><span class="org-comment">Add identity.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">keyoff</span>=<span class="org-string">"ssh-add -D"</span>               <span class="org-comment-delimiter"># </span><span class="org-comment">Remove all identities.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">keylist</span>=<span class="org-string">"ssh-add -l"</span>              <span class="org-comment-delimiter"># </span><span class="org-comment">List all identities.</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">gpg.</span>
<span class="org-function-name">searchkey</span> ()
{
    gpg --keyserver pgp.mit.edu --fingerprint --search-key <span class="org-string">"$@"</span>;
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Get gpg-key from keyserver.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">getkey</span>=<span class="org-string">'gpg --keyserver keys.gnupg.net --recv-keys'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">encrypt</span> ()
{
    <span class="org-comment-delimiter"># </span><span class="org-comment">Use ascii armor.</span>
    gpg -ac --no-options <span class="org-string">"$1"</span>
}

<span class="org-function-name">bencrypt</span> ()
{
    <span class="org-comment-delimiter"># </span><span class="org-comment">No ascii armor.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Encrypt binary data. jpegs/gifs/vobs/etc.</span>
    gpg -c --no-options <span class="org-string">"$1"</span>
}

<span class="org-function-name">decrypt</span> ()
{
    gpg --no-options <span class="org-string">"$1"</span>
}

<span class="org-function-name">pe</span> ()
{
<span class="org-comment-delimiter"># </span><span class="org-comment">Passphrase encryption program</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created by Dave Crouse 01-13-2006</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Reads input from text editor and encrypts to screen.</span>
    clear
    <span class="org-builtin">echo</span> <span class="org-string">"         Passphrase Encryption Program"</span>;
    <span class="org-builtin">echo</span> <span class="org-string">"--------------------------------------------------"</span>; <span class="org-builtin">echo</span> <span class="org-string">""</span>;
    <span class="org-builtin">which</span> $<span class="org-variable-name">EDITOR</span> &amp;&gt;/dev/null
    <span class="org-keyword">if</span> [ <span class="org-string">"$?"</span> != <span class="org-string">"0"</span> ]; <span class="org-keyword">then</span>
        <span class="org-builtin">echo</span> <span class="org-string">"It appears that you do not have a text editor set in your .bashrc file."</span>;
        <span class="org-builtin">echo</span> <span class="org-string">"What editor would you like to use ? "</span> ;
        <span class="org-builtin">read</span> EDITOR ; <span class="org-builtin">echo</span> <span class="org-string">""</span>;
    <span class="org-keyword">fi</span>
    <span class="org-builtin">echo</span> <span class="org-string">"Enter the name/comment for this message :"</span>
    <span class="org-builtin">read</span> comment
    $<span class="org-variable-name">EDITOR</span> passphraseencryption
    gpg --armor --comment <span class="org-string">"$comment"</span> --no-options --output
    passphraseencryption.gpg --symmetric passphraseencryption
    shred -u passphraseencryption ; clear
    <span class="org-builtin">echo</span> <span class="org-string">"Outputting passphrase encrypted message"</span>; <span class="org-builtin">echo</span> <span class="org-string">""</span> ; <span class="org-builtin">echo</span> <span class="org-string">""</span> ;
    cat passphraseencryption.gpg ; <span class="org-builtin">echo</span> <span class="org-string">""</span> ; <span class="org-builtin">echo</span> <span class="org-string">""</span> ;
    shred -u passphraseencryption.gpg ;
    <span class="org-builtin">read</span> -p <span class="org-string">"Hit enter to exit"</span> temp; clear
}

<span class="org-function-name">keys</span> ()
{
    <span class="org-comment-delimiter"># </span><span class="org-comment">Open up kgpg keymanager.</span>
    kgpg -k
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline66" class="outline-4">
<h4 id="orgheadline66">Debian</h4>
<div class="outline-text-4" id="text-orgheadline66">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">aps</span>=<span class="org-string">'aptitude search'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline67" class="outline-4">
<h4 id="orgheadline67">System admin (NMAP, etc.)</h4>
<div class="outline-text-4" id="text-orgheadline67">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Use `pkill' (which is pgrep + kill in a single command).</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Show only my processes.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">mytop</span>=<span class="org-string">'top -u $USERNAME'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">My traceroute.</span>
<span class="org-keyword">if</span> $(<span class="org-builtin">which</span> mtr &gt;&amp; /dev/null); <span class="org-keyword">then</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">ping</span>=mtr
<span class="org-keyword">fi</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">hping[2] (run as root!)</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">myping</span>=<span class="org-string">"hping2 -c 100 -2 -p 7 $1"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">myping2</span>=<span class="org-string">"hping2 -d 500 -c 100 -2 -p 7 $1"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">030925 Compare /proc with ps (against rootkits).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">myps</span>=<span class="org-string">"sudo ls -d /proc/* | grep '[0-9]' | wc -l ; sudo ps ax | wc -l"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># 040210 Grep.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">alias g='find . -type f -print0 | xargs -0 grep'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Echo my current external IP address.</span>
<span class="org-keyword">if</span> $(<span class="org-builtin">which</span> curl &gt;&amp; /dev/null); <span class="org-keyword">then</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">whatismyip</span>=<span class="org-string">'curl -s http://whatismyip.org'</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">040319 Send files via `netcat'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">on sending side:</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">send() {j=$*; tar cpz ${j/%${!#}/}|nc -w 1 ${!#} 51330;}</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">send dir* $HOST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Info:</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">${!#} gibt den letzten Parameter (den Hostnamen) zurück,</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">${j/%${!#}/} die übrigen (Liste der Dateien oder Verzeichnisse).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">receive</span>=<span class="org-string">'nc -vlp 51330 | tar xzvp'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Honor embedded linefeeds when displaying packets.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">ngrep</span>=<span class="org-string">'ngrep -W byline'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -i -w 'user|pass' port 110</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -d eth0 -i 'USER|PASS' tcp port 80</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep google port 80</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -i 'rcpt to|mail from' tcp port smtp</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -q -t -wi "login" port 23</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">ports</span>=<span class="org-string">"netstat -alpe --ip"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">alias scan="nmap -sS -O"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">nm</span>=<span class="org-string">"nmap -sS -O -PI -PT"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">portscan</span>=<span class="org-string">"nmap -sT -PT -R "</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">nmap_fast</span>=<span class="org-string">"nmap -F -T5 --top-ports 300"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">nmap ()</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">{</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">echo "Enter port #"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">read port</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">echo "Enter IP range"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">read range</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">sudo nmap -sT -p $port -P0 -v -T 4 -oG dump-$port-${range////_}.txt $range</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">grep -i open dump-$port-${range////_}.txt</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">localnet - Find the local network in CIDR notation.</span>
<span class="org-function-name">localnet</span> ()
{
    <span class="org-variable-name">IP_ADDRESS</span>=$(ifconfig | grep <span class="org-string">"inet addr:"</span> | head -n 1 | sed <span class="org-string">"s/.*addr:\([0-9.]*\).*/\1/"</span>)
    <span class="org-comment-delimiter"># </span><span class="org-comment">we could use `nm-tool' from `network-manager'</span>

    <span class="org-variable-name">NETMASK</span>=$(ifconfig | grep <span class="org-string">"inet addr:"</span> | head -n 1 | sed <span class="org-string">"s/.*Mask:\([0-9.]*\).*/\1/"</span>)

    <span class="org-comment-delimiter"># </span><span class="org-comment">calculate network value</span>
    <span class="org-builtin">echo</span> $(ipcalc -n -b $<span class="org-variable-name">IP_ADDRESS</span> $<span class="org-variable-name">NETMASK</span> | grep Network | awk <span class="org-string">'{print $2}'</span>)
}

<span class="org-comment-delimiter"># </span><span class="org-comment">whoisonline [TARGET] - List hosts that are online.</span>
<span class="org-function-name">whoisonline</span> ()
{
    <span class="org-builtin">local</span> net
    <span class="org-keyword">if</span> [ -n <span class="org-string">"$1"</span> ]; <span class="org-keyword">then</span>
        <span class="org-variable-name">net</span>=<span class="org-string">"$1"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">net</span>=$(localnet)
    <span class="org-keyword">fi</span>
    <span class="org-builtin">echo</span> <span class="org-string">"Discovering online hosts in $net..."</span>
    sudo nmap -sP $<span class="org-variable-name">net</span> | awk <span class="org-string">'/Host / &amp;&amp; / up/ { print $0; }'</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">localps [TARGET] - List open ports on hosts that are online.</span>
<span class="org-function-name">localps</span> ()
{
    <span class="org-builtin">local</span> hostip
    <span class="org-builtin">local</span> t1
    <span class="org-builtin">local</span> t2
    <span class="org-builtin">local</span> t3

    <span class="org-builtin">local</span> net
    <span class="org-keyword">if</span> [ -n <span class="org-string">"$1"</span> ]; <span class="org-keyword">then</span>
        <span class="org-variable-name">net</span>=<span class="org-string">"$1"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">net</span>=$(localnet)
    <span class="org-keyword">fi</span>

    <span class="org-keyword">for</span> hostip<span class="org-keyword"> in</span> $(nmap -sP $<span class="org-variable-name">net</span> | grep -E <span class="org-string">'Host .* up'</span> | cut -d <span class="org-string">" "</span> -f2-2);
    <span class="org-keyword">do</span>
        <span class="org-variable-name">t1</span>=$(ping -c 4 $<span class="org-variable-name">hostip</span> | grep -e PING | cut -d <span class="org-string">" "</span> -f1-2 | cut -d <span class="org-string">" "</span> -f2-4) ;
        <span class="org-variable-name">t2</span>=$(ping -c 4 $<span class="org-variable-name">hostip</span> | grep -e rtt | cut -d <span class="org-string">"/"</span> -f5-5) ;
        <span class="org-variable-name">t3</span>=$(sudo nmap -sS $<span class="org-variable-name">hostip</span> | grep <span class="org-string">" open "</span>) ;
        <span class="org-builtin">echo</span> -e $<span class="org-variable-name">t1</span> <span class="org-string">" "</span> $<span class="org-variable-name">t2</span> <span class="org-string">"ms\n"</span> $<span class="org-variable-name">t3</span> <span class="org-string">"\n"</span>;
    <span class="org-keyword">done</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">watchport HOST PORT - Watch TCP port PORT on machine HOST.</span>
<span class="org-function-name">watchport</span> ()
{
    <span class="org-keyword">while </span><span class="org-builtin">true</span>; <span class="org-keyword">do</span> clear; nmap $<span class="org-variable-name">1</span> -PN -p $<span class="org-variable-name">2</span>; sleep 5; <span class="org-keyword">done</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">rdns [TARGET] - Perform reverse DNS lookups.</span>
<span class="org-function-name">rdns</span> ()
{
    <span class="org-builtin">local</span> net
    <span class="org-keyword">if</span> [ -n <span class="org-string">"$1"</span> ]; <span class="org-keyword">then</span>
      <span class="org-variable-name">net</span>=<span class="org-string">"$1"</span>
    <span class="org-keyword">else</span>
      <span class="org-variable-name">net</span>=$(localnet)
    <span class="org-keyword">fi</span>
    <span class="org-builtin">echo</span> <span class="org-string">"Performing reverse DNS lookups in $net..."</span>
    nmap -R -sL $<span class="org-variable-name">net</span> |<span class="org-sh-escaped-newline">\</span>
    awk <span class="org-string">'{if ($3 != "not") print "Host " $3 " is " $2}'</span> | grep <span class="org-string">'('</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">You could add "--dns-servers x.x.x.x" after the "-sL" if you need the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">lookups to be performed on a specific DNS server.</span>
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Anonymous wget (using Privoxy and Tor).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">aget</span>=<span class="org-string">'wget --execute "http_proxy = http://127.0.0.1:8118" --proxy'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">mirror</span>=<span class="org-string">"wget -v --tries=0 --continue --force-directories --mirror --no-parent"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">off</span>=<span class="org-string">'sudo shutdown -h now'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline68" class="outline-4">
<h4 id="orgheadline68">Org</h4>
<div class="outline-text-4" id="text-orgheadline68">
<p>
For branches for which we want to make some development, and keep in track with
<code>master</code>:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">update_org</span> () {
    (                                   <span class="org-comment-delimiter"># </span><span class="org-comment">Directory changes made in a subshell</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">do not carry over to the parent shell.</span>
        <span class="org-builtin">cd</span> $<span class="org-variable-name">HOME</span>/Public/Repositories/org-mode;
        git fetch --all --verbose <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; git rebase origin <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; make autoloads <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; <span class="org-builtin">echo</span> DON<span class="org-string">\'</span>T make clean <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; <span class="org-builtin">echo</span> DON<span class="org-string">\'</span>T make <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; <span class="org-builtin">echo</span> DON<span class="org-string">\'</span>T sudo make install <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; <span class="org-builtin">echo</span> DON<span class="org-string">\'</span>T make doc <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; make info <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; sudo make install-info <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; printf <span class="org-string">"Running org_test, please wait (this can take a while)...\n"</span> <span class="org-sh-escaped-newline">\</span>
            &amp;&amp; org_test 2&gt;&amp;1 &gt;/dev/null | tail -n 3
    )
}
</pre>
</div>

<div class="inlinetask">
<b><span class="todo TODO">TODO</span> Don&rsquo;t regenerate autoloads, doc, etc. if nothing new was pulled</b><br  />
nil</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">org_test</span> () {
    (
        <span class="org-builtin">cd</span> $<span class="org-variable-name">HOME</span>/Public/Repositories/org-mode;
        mkdir /tmp/tmp-orgtest 2&gt; /dev/null <span class="org-comment-delimiter"># </span><span class="org-comment">TMPDIR must exist!</span>
        <span class="org-variable-name">TMPDIR</span>=/tmp/tmp-orgtest emacs -Q --batch -L lisp/ -L testing/ -l org-test.el --eval <span class="org-string">'(setq org-confirm-babel-evaluate nil)'</span> -f org-test-run-batch-tests
    )
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-keyword">if</span> [ -d <span class="org-string">"$HOME/Public/Repositories/org-bash-utils"</span> ]; <span class="org-keyword">then</span>
    <span class="org-variable-name">PATH</span>=<span class="org-string">"$HOME/Public/Repositories/org-bash-utils:$PATH"</span>
    <span class="org-builtin">source</span> $<span class="org-variable-name">HOME</span>/Public/Repositories/org-bash-utils/org-alias
    <span class="org-builtin">source</span> $<span class="org-variable-name">HOME</span>/Public/Repositories/org-bash-utils/awk-alias
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline69" class="outline-4">
<h4 id="orgheadline69">Grep</h4>
<div class="outline-text-4" id="text-orgheadline69">
<div class="note">
<p>
<code>GREP_OPTIONS</code> is dangerous because it applies in scripts that may be relying on
the exact set of options that they pass to <code>grep</code> (<code>--color=auto</code> is about the only
safe thing you can put there); it&rsquo;s even officially <b>deprecated</b> since <code>grep</code> 2.21.
It is better to make <code>grep</code> itself an alias (and also <code>egrep</code> and <code>fgrep</code> if you use
them).
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Display the matched pattern in color.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">grep</span>=<span class="org-string">'grep --color=auto'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">egrep</span>=<span class="org-string">'grep -E --color=auto'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">fgrep</span>=<span class="org-string">'grep -F --color=auto'</span>
</pre>
</div>

<div class="warning">
<p>
If you use <code>--color=always</code>, it&rsquo;ll use color even when piping, which confuses
things.
</p>

</div>

<p>
Change the color of <code>grep</code>:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">GREP_COLOR</span>=<span class="org-string">"0;30;43"</span>
</pre>
</div>

<div class="note">
<p>
The colors are defined by the environment variable <code>GREP_COLORS</code> (used in <code>grep</code>
2.5.2 and later versions). The <b>deprecated</b> environment variable <code>GREP_COLOR</code> (used
in <code>grep</code> 2.5.1) is still supported, but its setting does not have priority.
</p>

<p>
But apparently, this is not the case on my system. <code>GREP_COLOR</code> is the one that
worked&#x2026;
</p>

</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Grep through the running processes.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">pgrep</span>=<span class="org-string">'pgrep -fl'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline70" class="outline-4">
<h4 id="orgheadline70">GraphicsMagick</h4>
<div class="outline-text-4" id="text-orgheadline70">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">GraphicsMagick.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">GIF</span>=<span class="org-string">"gm convert -verbose -interlace LINE"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">thumb</span>=<span class="org-string">"gm convert -geometry 100x100 -interlace LINE -verbose"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">region</span>=<span class="org-string">'sleep 3; gm import selection$(date "+%Y%m%d%H%M%S").jpg'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">screenshot</span>=<span class="org-string">'sleep 5; gm import -window root screen$(date "+%Y%m%d%H%M%S").jpg'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">window</span>=<span class="org-string">'sleep 3; gm import -frame window$(date "+%Y%m%d%H%M%S").jpg'</span>

<span class="org-function-name">gmresize</span> ()
{
    <span class="org-variable-name">FILES</span>=<span class="org-string">"$@"</span>
    <span class="org-variable-name">SCALE</span>=<span class="org-string">"1024x768"</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">for i in *.(gif|jpeg|jpg|png);</span>
    <span class="org-keyword">for</span> i<span class="org-keyword"> in</span> $<span class="org-variable-name">FILES</span>
    <span class="org-keyword">do</span>
        <span class="org-builtin">echo</span> <span class="org-string">"Processing image $i ..."</span>
        gm convert -scale $<span class="org-variable-name">SCALE</span> <span class="org-string">"$i"</span> $(basename <span class="org-string">"$i"</span> .${<span class="org-variable-name">i</span>##*.})-$<span class="org-variable-name">SCALE</span>.${<span class="org-variable-name">i</span>##*.}
        <span class="org-comment-delimiter"># </span><span class="org-comment">Obscure but useful string operations.</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">(See http://www.arachnoid.com/linux/shell_programming.html.)</span>
    <span class="org-keyword">done</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">find . -name "*png" | xargs -l -i basename -s ".png" "{}" | xargs -l -i  gm convert -quality 85% "{}.png" "{}.jpg"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline71" class="outline-4">
<h4 id="orgheadline71">Other things to sort</h4>
<div class="outline-text-4" id="text-orgheadline71">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">List all files modified in the last 24 hours (last full day).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">oneday</span>=<span class="org-string">'find . -mtime -1 -print'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">List all files modified today only (since start of day only, i.e. 00:00).</span>
<span class="org-function-name">today</span> ()
{
    touch -t <span class="org-sh-quoted-exec">`date +%m%d0000`</span> /tmp/$<span class="org-variable-name">$</span>
    find . -type f -newer /tmp/$<span class="org-variable-name">$</span>
    rm -f /tmp/$<span class="org-variable-name">$</span>
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-keyword">case</span> $(uname -s) <span class="org-keyword">in</span>
    Linux*)
        <span class="org-builtin">alias</span> <span class="org-variable-name">vpnup</span>=<span class="org-string">'sudo test; exec sudo openvpn --config $HOME/.hide/OpenVPN-config/mcbe.ovpn --writepid /tmp/openvpn.pid &amp;'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">--daemon'</span>
        <span class="org-builtin">alias</span> <span class="org-variable-name">vpndown</span>=<span class="org-string">'sudo kill -INT `cat /tmp/openvpn.pid`'</span>
        ;;

    CYGWIN*)
        <span class="org-builtin">alias</span> <span class="org-variable-name">vpnup</span>=<span class="org-string">'cd $HOME/.hide/OpenVPN-config; openvpn --config mcbe.ovpn --writepid c:/cygwin/tmp/openvpn.pid &amp;'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">--daemon'</span>
        <span class="org-builtin">alias</span> <span class="org-variable-name">vpndown</span>=<span class="org-string">'killall openvpn'</span>
        ;;
<span class="org-keyword">esac</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">GS_OPTIONS</span>=<span class="org-string">"-sPAPERSIZE=a4"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">pdfmerge</span>=<span class="org-string">"gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile=./finished.pdf"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">pdfjoin</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">booklet</span>=<span class="org-string">"psbook | psnup -2 | pstops '2:0,1U(21cm,29.7cm)'"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">for Win32, choose gswin32c</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">clean [-r] - Remove useless files (recursively).</span>
<span class="org-function-name">clean</span> ()
{
    <span class="org-keyword">if</span> [ <span class="org-string">"$1"</span> = <span class="org-string">"-r"</span> ]; <span class="org-keyword">then</span>
        find . <span class="org-string">\(</span> -name <span class="org-string">"#*"</span> -o -name <span class="org-string">"*~"</span> -o -name <span class="org-string">".*~"</span> -o <span class="org-sh-escaped-newline">\</span>
            -name <span class="org-string">"*.~[0-9]*~"\ </span>-o -name <span class="org-string">".*.~[0-9]*~"</span> -o <span class="org-sh-escaped-newline">\</span>
            -name <span class="org-string">"*.~BASE~"</span> -o -name <span class="org-string">".*.~BASE~"</span> <span class="org-string">\)</span> -ok rm <span class="org-string">"{}"</span> <span class="org-string">";"</span>
    <span class="org-keyword">else</span>
        rm -i <span class="org-string">\#</span>* *~ .*~ *.~[0-9]*~ .*.~[0-9]*~ *.~BASE~ .*.~BASE~
    <span class="org-keyword">fi</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">swap FILE1 FILE2 - Swap FILE1 and FILE2.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Useful when you want to try a config file obtained from elsewhere, and also</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">keep the old version.</span>
<span class="org-function-name">swap</span> ()
{
    <span class="org-keyword">if</span> [ $<span class="org-variable-name">#</span> != 2 ]; <span class="org-keyword">then</span>
        <span class="org-keyword">return</span> 1
    <span class="org-keyword">fi</span>
    <span class="org-variable-name">tmpfile</span>=/tmp/.swapper.$<span class="org-variable-name">$</span>.$<span class="org-variable-name">RANDOM</span>
    mv -f $<span class="org-variable-name">1</span> $<span class="org-variable-name">tmpfile</span>
    mv -f $<span class="org-variable-name">2</span> $<span class="org-variable-name">1</span>
    mv -f $<span class="org-variable-name">tmpfile</span> $<span class="org-variable-name">2</span>
    <span class="org-keyword">return</span> 0
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">saneperms</span> ()
{
    find . -type d -print0 | xargs -0 chmod 755
    find . -type f -print0 | xargs -0 chmod ${<span class="org-variable-name">1</span>:=644}
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment"># Search for various types or README file in dir and display them in $PAGER.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">readme ()</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">{</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">local files</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">files=(./(#i)*(read*me|lue*m(in|)ut)*(ND))</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">if (($#files)); then</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">$PAGER $files</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">else</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">print 'No README files.'</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">fi</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">safetmp</span> ()
{
    test -d $<span class="org-variable-name">HOME</span> || <span class="org-keyword">exit</span> 1
    test -d $<span class="org-variable-name">HOME</span>/tmp || mkdir $<span class="org-variable-name">HOME</span>/tmp
    <span class="org-builtin">echo</span> $<span class="org-variable-name">HOME</span>/tmp/safetmp.$(hostname).$(date +%s).$<span class="org-variable-name">$</span>
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-function-name">timesync</span> ()
{
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -eq 0 ]]; <span class="org-keyword">then</span>
        ntpdate -u swisstime.ethz.ch
    <span class="org-keyword">else</span>
        <span class="org-builtin">echo</span> <span class="org-string">"Must be root"</span>
    <span class="org-keyword">fi</span>
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Immediately opens the first match.</span>
<span class="org-function-name">texman</span> ()
{
    locate $<span class="org-variable-name">*</span> | grep pdf | grep texlive | head -1 | xargs open;
}

<span class="org-function-name">texlist</span> ()
{
    locate $<span class="org-variable-name">*</span> | grep <span class="org-string">"\(pdf\|dvi\)"</span> | grep <span class="org-string">"\ (texlive\|gwTeX\)"</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline72" class="outline-4">
<h4 id="orgheadline72">MCit tools</h4>
<div class="outline-text-4" id="text-orgheadline72">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">sp</span>=sendpatch
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline73" class="outline-3">
<h3 id="orgheadline73">Postamble</h3>
<div class="outline-text-3" id="text-orgheadline73">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">commonprofile ends here</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
