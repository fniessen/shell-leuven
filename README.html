<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ShellRC</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Fabrice Niessen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">ShellRC</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6dd67b5">Summary</a></li>
<li><a href="#orgb8ec041">Getting started</a>
<ul>
<li><a href="#orgf51be32">Prerequisites for Windows</a>
<ul>
<li><a href="#org9834e16"><code>PATH</code></a></li>
<li><a href="#orgac9b189">Add an <code>HOME</code> environment variable</a></li>
<li><a href="#orge68fbf0">Change your Cygwin <code>HOME</code> folder</a></li>
<li><a href="#orgebb7dcf">Packages</a></li>
<li><a href="#org4c6fc7e">Terminal emulators</a></li>
<li><a href="#orgec05b56">GnuPG</a></li>
<li><a href="#orgb9feeac">Suppress the Cygwin DOS path warning</a></li>
</ul>
</li>
<li><a href="#org4d27a4b">Basic installation</a></li>
<li><a href="#org35731c1">Custom directory</a></li>
</ul>
</li>
<li><a href="#org445f9c5">About portability</a></li>
<li><a href="#org2f61037">Startup files</a>
<ul>
<li><a href="#orgaa68bb9">What to put where?</a></li>
<li><a href="#org0477715">What to put in your Zsh startup files</a></li>
</ul>
</li>
<li><a href="#org043b343">Configuration related to Bash</a>
<ul>
<li><a href="#org25d5cf3">Preamble</a></li>
<li><a href="#org3e7070b">Source global rc file (if any)</a></li>
<li><a href="#org9822d88">Command history</a></li>
<li><a href="#org5768f61">Prompt</a></li>
<li><a href="#orgfd02fed">Default permissions</a></li>
<li><a href="#orge940050">Shell options</a></li>
<li><a href="#orgc1a827f">Zsh-like Command Help</a></li>
<li><a href="#org37276c7">Miscellaneous</a></li>
<li><a href="#orgcb66dad">Source common file</a></li>
<li><a href="#org3d45a1d">Postamble</a></li>
<li><a href="#org82dea88">InputRC</a></li>
</ul>
</li>
<li><a href="#org2a577ff">Configuration related to Zsh</a>
<ul>
<li><a href="#org32656d1">Examples</a></li>
<li><a href="#org04277d8">Prerequisites</a></li>
<li><a href="#orgde9b031">Preamble</a></li>
<li><a href="#org76bea5b">Add a new theme: Solarized</a></li>
<li><a href="#org9b9d6c4">Install Powerline-patched fonts</a></li>
<li><a href="#org589e25d">Install &ldquo;Oh My Zsh&rdquo;</a></li>
<li><a href="#org5d1c7cb">Change the Oh My Zsh theme to &ldquo;agnoster&rdquo;</a>
<ul>
<li><a href="#org803f482">Agnoster Theme Adaption for SVN</a></li>
</ul>
</li>
<li><a href="#org13bedde">Install Powerlevel9k!</a></li>
<li><a href="#org4f11a48">Plugins</a>
<ul>
<li><a href="#orgd88c185">Display colored man pages</a></li>
<li><a href="#orgbd69140">Zsh Syntax Highlighting</a></li>
<li><a href="#org463879f">Zsh Autosuggestions</a></li>
<li><a href="#org4aaf49c">Load Zsh tools</a></li>
</ul>
</li>
<li><a href="#orgaa90d6b">Options</a>
<ul>
<li><a href="#org98bdcea">Changing Directories</a></li>
<li><a href="#org63227b9">Expansion and Globbing</a></li>
<li><a href="#org1df30e9">History</a></li>
<li><a href="#orgf83e85a">Job Control</a></li>
<li><a href="#org2d2a3ed">Zle</a></li>
</ul>
</li>
<li><a href="#org5721484">Zsh line editor</a></li>
<li><a href="#org92a23ec">Completion Widgets</a></li>
<li><a href="#orgcdb710a">Prompt</a>
<ul>
<li><a href="#orge3c88fe">Right prompt</a></li>
</ul>
</li>
<li><a href="#orgdb93d3a">Aliasing</a>
<ul>
<li><a href="#org6b186a0">Common aliases</a></li>
<li><a href="#orgb2ce17d">Git</a></li>
<li><a href="#org8f055fc">Directories</a></li>
</ul>
</li>
<li><a href="#org8e0fe17">Ledger</a></li>
<li><a href="#orgfc48ecb">20. Completion System</a></li>
<li><a href="#org3a14738">Zsh Modules</a></li>
<li><a href="#org83edb91">Source common file</a></li>
</ul>
</li>
<li><a href="#orga6f559b">Configuration related to both shells</a>
<ul>
<li><a href="#org1359469">Preamble</a></li>
<li><a href="#org12e065f">Paths</a>
<ul>
<li><a href="#org434a03e">Search path</a></li>
<li><a href="#orgb73b5b0">Cdpath</a></li>
<li><a href="#orgd6529e2">Manpath</a></li>
<li><a href="#org7c2497f">Infopath</a></li>
</ul>
</li>
<li><a href="#orgb7aa1f9">Pager</a>
<ul>
<li><a href="#orgd6df4b3">Less</a></li>
</ul>
</li>
<li><a href="#orga211aaf">Display</a></li>
<li><a href="#org0e72e2b">Alert</a></li>
<li><a href="#orgf6bb1a2">Misc</a></li>
<li><a href="#org3b91cd3">Terminal types</a></li>
<li><a href="#orgf65928e">Emacs (default editor)</a></li>
<li><a href="#org742a7e4">Plugins</a>
<ul>
<li><a href="#orgee2ff0d">Common aliases</a></li>
<li><a href="#org5439256">Directories</a></li>
<li><a href="#orgb36af25">Shortcuts (single char)for some commands)</a></li>
<li><a href="#org637c033">Colorize diff output</a></li>
<li><a href="#org237a6aa">Git</a></li>
<li><a href="#org26667a3">SVN</a></li>
<li><a href="#orge5fd800">History</a></li>
<li><a href="#org83ec7bb">UTF-8</a></li>
<li><a href="#org6ee22a4">Screen</a></li>
<li><a href="#org6e11070">SSH agent / GPG agent</a></li>
<li><a href="#orgba56560">Debian</a></li>
<li><a href="#orgbdfb9aa">System admin (NMAP, etc.)</a></li>
<li><a href="#org656e999">Org</a></li>
<li><a href="#orgf7d904f">Grep</a></li>
<li><a href="#org7037e67">Ripgrep</a></li>
<li><a href="#org332d36f">Ag, the Silver Searcher</a></li>
<li><a href="#org54de695">GraphicsMagick</a></li>
<li><a href="#org3b7a3fd">Other things to sort</a></li>
<li><a href="#orge545435">Extra</a></li>
</ul>
</li>
<li><a href="#org6460bf2">NMAP</a></li>
<li><a href="#org78972d4">Postamble</a></li>
</ul>
</li>
<li><a href="#orgfe72d53">Java</a></li>
<li><a href="#orgc7f9c81">FAQ</a>
<ul>
<li><a href="#org35e38c0">How to fix &ldquo;zsh compinit: insecure directories&rdquo;?</a></li>
<li><a href="#org91b4e1f">How to run Emacs without showing a terminal window?</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Look at <a href="https://github.com/jlevy/the-art-of-command-line">https://github.com/jlevy/the-art-of-command-line</a>!
</p>

<p>
XXX <a href="https://www.cyberciti.biz/tips/bash-aliases-mac-centos-linux-unix.html">https://www.cyberciti.biz/tips/bash-aliases-mac-centos-linux-unix.html</a>
XXX <a href="https://www.linuxtrainingacademy.com/23-handy-bash-shell-aliases-for-unix-linux-and-mac-os-x/">https://www.linuxtrainingacademy.com/23-handy-bash-shell-aliases-for-unix-linux-and-mac-os-x/</a>
XXX <a href="https://pissedoffadmins.com/">https://pissedoffadmins.com/</a>
</p>

<div id="outline-container-org6dd67b5" class="outline-2">
<h2 id="org6dd67b5">Summary</h2>
<div class="outline-text-2" id="text-org6dd67b5">
<p>
ShellRC is a set of configuration files to take advantage of Bash and Zsh on Mac
OS X, Linux and Windows (with Cygwin).
</p>
</div>
</div>

<div id="outline-container-orgb8ec041" class="outline-2">
<h2 id="orgb8ec041">Getting started</h2>
<div class="outline-text-2" id="text-orgb8ec041">
</div>
<div id="outline-container-orgf51be32" class="outline-3">
<h3 id="orgf51be32">Prerequisites for Windows</h3>
<div class="outline-text-3" id="text-orgf51be32">
<p>
Install <a href="https://www.cygwin.com/">Cygwin</a> (<a href="http://mirrors.kernel.org">http://mirrors.kernel.org</a>).
</p>
</div>

<div id="outline-container-org9834e16" class="outline-4">
<h4 id="org9834e16"><code>PATH</code></h4>
<div class="outline-text-4" id="text-org9834e16">
<p>
After Cygwin is installed, modify the System <code>PATH</code> variable: prepend it with
<code>C:\cygwin64\bin</code> (before <code>%SystemRoot%\system32</code>).
</p>

<div class="warning">
<p>
If you add other directories (such as <code>~/bin</code> or <code>~/winbin</code>) in the <code>PATH</code> before
Cygwin, please check that those directories don&rsquo;t contain <code>cygwin1.dll</code> or
such. That was why I had troubles running <code>git</code> commands&#x2026;
</p>

</div>

<p>
In <code>c:/cygwin64/etc/profile</code>,
</p>

<ul class="org-ul">
<li><p>
<code>/usr/local/bin</code> is appended to the <code>PATH</code>!!
</p>

<p>
And, except when root, it is almost always wrong to have <code>/usr/local/bin</code> after
any system path.
</p></li>

<li><code>TZ</code> (time zone) is set&#x2026; which gives wrong times (1 hour difference) in Emacs
when called from <code>c:/cygwin/Cygwin.bat</code>!!</li>
</ul>
</div>
</div>

<div id="outline-container-orgac9b189" class="outline-4">
<h4 id="orgac9b189">Add an <code>HOME</code> environment variable</h4>
<div class="outline-text-4" id="text-orgac9b189">
<p>
No trailing backslash!
</p>
</div>
</div>

<div id="outline-container-orge68fbf0" class="outline-4">
<h4 id="orge68fbf0">Change your Cygwin <code>HOME</code> folder</h4>
<div class="outline-text-4" id="text-orge68fbf0">
<p>
Programs like <code>ssh</code> don&rsquo;t rely on your environment variable <code>HOME</code> for the location
of your <b>home directory</b>.
</p>

<p>
Starting with Cygwin 1.7.34, the recommended way to do this is to add a custom
<code>db_home</code> setting (comment the example line) to <code>/etc/nsswitch.conf</code>.
</p>

<div class="note">
<p>
If you installed Cygwin prior to 1.7.34 or have run its <code>mkpasswd</code> utility so that
you have an <code>/etc/passwd</code> file, you can change your Cygwin <code>HOME</code> directory by
editing your user&rsquo;s entry in that file. Your <code>HOME</code> directory is the penultimate
element on your user&rsquo;s line in <code>/etc/passwd</code> (the <code>HOME</code> environment variable is set
from that field).
</p>

</div>
</div>
</div>

<div id="outline-container-orgebb7dcf" class="outline-4">
<h4 id="orgebb7dcf">Packages</h4>
<div class="outline-text-4" id="text-orgebb7dcf">
<div class="inlinetask">
<b><span class="todo TODO">TODO</span> See <a href="http://www.4thinker.com/cygwin-setup.html">http://www.4thinker.com/cygwin-setup.html</a></b><br />
nil</div>

<p>
<a href="http://cygwin.com/cgi-bin2/package-grep.cgi">Cygwin Package Search</a>
</p>

<p>
In order to <b>install Cygwin&rsquo;s packages</b> through the terminal instead of running
the setup every single time you need one, you can install <code>apt-cyg</code>.  As
a requirement, you&rsquo;ll need to install <code>lynx</code> through the cygwin setup first.
After that, just run the following commands:
</p>

<div class="org-src-container">
<pre class="src src-shell">lynx -source rawgit.com/transcode-open/apt-cyg/master/apt-cyg &gt; apt-cyg
install apt-cyg /bin
</pre>
</div>

<ul class="org-ul">
<li>Archive
<ul class="org-ul">
<li class="on">&#x2611; <code>unzip</code></li>
<li class="on">&#x2611; <code>zip</code> (used by the &ldquo;Org to ODT&rdquo; exporter)</li>
</ul></li>

<li>Database
<ul class="org-ul">
<li class="on">&#x2611; <code>freetds</code> (for <code>tsql</code>)</li>
</ul></li>

<li>Devel
<ul class="org-ul">
<li class="off">&#x2610; <code>autoconf</code></li>
<li class="off">&#x2610; <code>bzr</code></li>
<li class="off">&#x2610; <code>ctags</code> (Exuberant Ctags)</li>
<li class="off">&#x2610; <code>gcc-core</code> (C compiler)</li>
<li class="off">&#x2610; <code>gcc4</code> (needed for installing some Perl packages, for CSV2Ledger)</li>
<li class="on">&#x2611; <code>gdb</code></li>
<li class="on">&#x2611; <code>git</code></li>
<li class="on">&#x2611; <code>make</code> (for making info for Git Org mode)</li>
<li class="on">&#x2611; <code>meld</code> (for diffing &#x2013; requires <code>xinit</code>)</li>
<li class="off">&#x2610; <code>mercurial</code> (for <code>hg</code> command, used by Beamer)</li>
<li class="on">&#x2611; <code>patch</code></li>
<li class="on">&#x2611; <code>patchutils</code></li>
<li class="on">&#x2611; <code>subversion</code> (for <code>svn</code> command)</li>
</ul></li>

<li>Editors
<ul class="org-ul">
<li class="on">&#x2611; <code>emacs</code></li>
<li class="on">&#x2611; <code>emacs-el</code> (needed to get more up-to-date sources, such as for Org)</li>
<li class="on">&#x2611; <code>emacs-w32</code> (for graphical Cygwin Emacs with the w32 graphics toolkit)</li>
</ul></li>

<li>Graphics
<ul class="org-ul">
<li class="on">&#x2611; <code>ghostscript</code> (needed by various utilities &#x2013; <code>texlive</code> for example)</li>
<li class="off">&#x2610; <code>gnuplot</code></li>
<li class="on">&#x2611; <code>graphviz</code> (<code>dot</code>)</li>
<li class="on">&#x2611; <code>poppler</code> (for <code>pdftotext</code>)</li>
</ul></li>

<li>Interpreters
<ul class="org-ul">
<li class="off">&#x2610; <code>m4</code></li>
</ul></li>

<li>Libs
<ul class="org-ul">
<li class="off">&#x2610; <code>libbz2-devel</code> (needed for installing RODBC inside R)</li>
<li class="off">&#x2610; <code>libiconv</code></li>
<li class="off">&#x2610; <code>libicu-devel</code> (needed for installing RODBC inside R)</li>
<li class="off">&#x2610; <code>libiodbc-devel</code> (needed for installing RODBC inside R)</li>
</ul></li>

<li>Math
<ul class="org-ul">
<li class="on">&#x2611; <code>R</code></li>
</ul></li>

<li>Net
<ul class="org-ul">
<li class="on">&#x2611; <code>bind-utils</code> (for <code>dig</code>, <code>host</code>, <code>nslookup</code>, etc.)</li>
<li class="on">&#x2611; <code>curl</code></li>
<li class="on">&#x2611; <code>inetutils</code> (for getting <code>telnet</code> to work with expect)</li>
<li class="off">&#x2610; <code>nc</code> (see socat)</li>
<li class="off">&#x2610; <code>openssh</code></li>
<li class="off">&#x2610; <code>ping</code> (Note: Allow to &ldquo;Run this program as an administrator&rdquo;)</li>
<li class="off">&#x2610; <code>rsync</code></li>
<li class="on">&#x2611; <code>sitecopy</code></li>
<li class="off">&#x2610; <code>socat</code> (see <code>nc</code>)</li>
</ul></li>

<li>Perl
<ul class="org-ul">
<li class="off">&#x2610; <code>perl</code></li>
</ul></li>

<li>Publishing
<ul class="org-ul">
<li class="on">&#x2611; <code>texlive</code> (= TeX only, not LaTeX!  It requires <code>fontconfig</code> and <code>ghostscript</code>)</li>
<li class="on">&#x2611; <code>texlive-collection-binextra</code> (for <code>latexmk</code>)</li>
<li class="on">&#x2611; <code>texlive-collection-fontsextra</code> (for <code>libertine.sty</code>)</li>
<li class="on">&#x2611; <code>texlive-collection-fontsrecommended</code> (for <code>marvosym.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-genericrecommended</code> (for <code>ulem.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-langfrench</code> (for <code>frenchb</code>)</li>
<li class="on">&#x2611; <code>texlive-collection-latex</code></li>
<li class="on">&#x2611; <code>texlive-collection-latexextra</code> (for <code>draftwatermark.sty</code>, etc.)</li>
<li class="on">&#x2611; <code>texlive-collection-science</code> (for <code>siunitx.sty</code>, etc.)</li>
</ul></li>

<li>Python
<ul class="org-ul">
<li class="on">&#x2611; <code>python</code></li>
</ul></li>

<li>Ruby
<ul class="org-ul">
<li class="off">&#x2610; <code>ruby</code></li>
</ul></li>

<li>Shells
<ul class="org-ul">
<li class="off">&#x2610; <code>rxvt</code></li>
<li class="on">&#x2611; <code>zsh</code></li>
</ul></li>

<li>System
<ul class="org-ul">
<li class="on">&#x2611; <code>procps-ng</code> (to get <code>top</code> and <code>pkill</code>)</li>
<li class="off">&#x2610; <code>psmisc</code> (to get <code>killall</code>)</li>
</ul></li>

<li>Tcl
<ul class="org-ul">
<li class="off">&#x2610; <code>expect</code></li>
</ul></li>

<li>Text
<ul class="org-ul">
<li class="off">&#x2610; <code>antiword</code></li>
<li class="on">&#x2611; <code>aspell</code> (Note that the Win32 binary has <b>much</b> more dictionaries! Use that
one instead if you need &ldquo;nl&rdquo; language&#x2026;)</li>
<li class="off">&#x2610; <code>most</code></li>
<li class="off">&#x2610; <code>opensp</code> (for <code>nsgmls</code> validator)</li>
<li class="on">&#x2611; <code>texinfo</code> (for <code>makeinfo</code>)</li>
<li class="off">&#x2610; <code>tidy</code></li>
</ul></li>

<li>Utils
<ul class="org-ul">
<li class="on">&#x2611; <code>colordiff</code> (for <code>svn</code>)</li>
<li class="off">&#x2610; <code>dos2unix</code></li>
<li class="off">&#x2610; <code>fdupes</code></li>
<li class="off">&#x2610; <code>file</code> to determine file type</li>
<li class="off">&#x2610; <code>flog</code> (logger, to syslog)</li>
<li class="on">&#x2611; <code>gnupg</code> (for <code>gpg</code>) &#x2013; requiring <code>libusb0</code> (though you don&rsquo;t need to install
the Win32 driver which is adviced!)</li>
<li class="on">&#x2611; <code>moreutils</code> (provides <code>sponge</code>)</li>
<li class="on">&#x2611; <code>ncurses</code> (provides <code>tput</code> and the <code>clear</code> command used by the TeX Live
installer, though you can use <code>C-l</code> to get the same result)</li>
<li class="off">&#x2610; <code>screen</code></li>
<li class="off">&#x2610; <code>sgrep</code> (installs the XPath command <code>xmllint</code>, with <code>libxml2</code>)</li>
<li class="on">&#x2611; <code>the_silver_searcher</code> (ag)</li>
<li class="on">&#x2611; <code>tig</code> (Git browser)</li>
<li class="on">&#x2611; <code>xmlstarlet</code></li>
</ul></li>

<li>X11
<ul class="org-ul">
<li class="off">&#x2610; <code>fontconfig</code> (needed by XeTeX)</li>
<li class="on">&#x2611; <code>xinit</code> (needed by <code>meld</code>)
See <a href="#orga211aaf">Display</a>.</li>
</ul></li>

<li>Web
<ul class="org-ul">
<li class="off">&#x2610; <code>wget</code></li>
</ul></li>
</ul>

<p>
Many Unix commands have already newer and more feature-rich
replacements:
</p>

<dl class="org-dl">
<dt>df</dt><dd>pydf</dd>
<dt>less</dt><dd>most</dd>
<dt>tail</dt><dd>multitail</dd>
<dt>top</dt><dd>htop</dd>
<dt>tracepath</dt><dd>mtr</dd>
<dt>traceroute</dt><dd>mtr</dd>
</dl>
</div>
</div>

<div id="outline-container-org4c6fc7e" class="outline-4">
<h4 id="org4c6fc7e">Terminal emulators</h4>
<div class="outline-text-4" id="text-org4c6fc7e">
<p>
For a better Emacs experience than with the Cygwin console, use:
</p>

<ul class="org-ul">
<li>MinTTY</li>
<li>(u)rxvt</li>
<li>xterm</li>
</ul>

<div class="tip">
<p>
<b><code>Alt-F2</code> opens a new terminal window</b>
</p>

<p>
<b><code>Shift-PageUp</code> and <code>Shift-PageDown</code>!</b>
</p>

<p>
For rapidly paging through previous lines of output, you can press <code>Shift-PageUp</code>
and <code>Shift-PageDown</code>, just like the Linux console.
</p>

<p>
<b>Searching text in scrollback buffer (in Cygwin MinTTY)</b>
</p>

<p>
In mintty, <code>Alt-F3</code> opens a search bar with an input field for a search string.
Matches are highlighted in the scrollback buffer.  <code>Enter</code> / <code>Shift+Enter</code> find the
<code>next</code> / <code>previous</code> position of the match and scrolls the scrollback buffer
accordingly.  The appearance of the search bar and the matching highlight
colours can be customized.
</p>

<p>
See <a href="https://mintty.github.io/mintty.1.html">man page</a>.
</p>

</div>
</div>
</div>

<div id="outline-container-orgec05b56" class="outline-4">
<h4 id="orgec05b56">GnuPG</h4>
<div class="outline-text-4" id="text-orgec05b56">
<p>
When first running <code>gpg</code>:
</p>

<ul class="org-ul">
<li>Directory <code>~/.gnupg</code> created</li>
<li>New configuration file <code>~/.gnupg/gpg.conf</code> created</li>
<li>Keyring <code>~/.gnupg/secring.gpg</code> created</li>
<li>Keyring <code>~/.gnupg/pubring.gpg</code> created</li>
</ul>
</div>
</div>

<div id="outline-container-orgb9feeac" class="outline-4">
<h4 id="orgb9feeac">Suppress the Cygwin DOS path warning</h4>
<div class="outline-text-4" id="text-orgb9feeac">
<p>
When first running <code>M-x ediff-buffers</code>, I got this Cygwin warning:
</p>

<pre class="example">
MS-DOS style path detected: c:/Users/...
Preferred POSIX equivalent is: /cygdrive/c/Users/...
CYGWIN environment variable option "nodosfilewarning" turns off this warning.
Consult the user's guide for more details about POSIX paths:
  http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
</pre>

<p>
Though, setting it in <code>.bashrc</code> or something like that does not work. A good
place to set it is in the global <b>Windows environment variables</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-org4d27a4b" class="outline-3">
<h3 id="org4d27a4b">Basic installation</h3>
<div class="outline-text-3" id="text-org4d27a4b">
<p>
ShellRC is installed by doing the following:
</p>

<ol class="org-ol">
<li><p>
<b>Clone the repository:</b>
</p>

<div class="org-src-container">
<pre class="src src-shell">   git clone git@github.com:fniessen/dotfiles.git ~/.dotfiles
   ~/.dotfiles/install
</pre>
</div></li>

<li><p>
<b>Source ShellRC configuration files</b>
</p>

<div class="org-src-container">
<pre class="src src-shell">   <span class="org-builtin">.</span> ./bash_profile
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">   <span class="org-builtin">.</span> .zprofile
</pre>
</div>

<p>
Or&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-shell">   <span class="org-keyword">if</span> [[ -d <span class="org-string">"$HOME"</span>/.dotfiles/files ]]; <span class="org-keyword">then</span>
       <span class="org-variable-name">PATH</span>=<span class="org-string">"$HOME"</span>/.dotfiles/files:<span class="org-string">"$PATH"</span>
   <span class="org-keyword">fi</span>
</pre>
</div></li>
</ol>

<p>
Once you open up a new terminal window with Bash or Zsh, it should load with
ShellRC&rsquo;s configuration.
</p>
</div>
</div>

<div id="outline-container-org35731c1" class="outline-3">
<h3 id="org35731c1">Custom directory</h3>
<div class="outline-text-3" id="text-org35731c1">
<p>
If you&rsquo;d like to change the install directory with the <code>ZSH</code> environment variable,
either by running export ZSH=/your/path before installing,
</p>
</div>
</div>
</div>

<div id="outline-container-org445f9c5" class="outline-2">
<h2 id="org445f9c5">About portability</h2>
<div class="outline-text-2" id="text-org445f9c5">
<p>
To find out if a given command exists, don&rsquo;t use <code>which</code> (because it is not in
POSIX so its output format is unspecified, and it complains when nothing is
found instead of being silent):
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> which-shell=<span class="org-string">'ps -p $$'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> $(<span class="org-sh-quoted-exec">which</span> ag &gt; /dev/null 2&gt;&amp;1); <span class="org-keyword">then </span><span class="org-builtin">alias</span> <span class="org-variable-name">grep</span>=<span class="org-string">'ag'</span>; <span class="org-keyword">fi</span>
</pre>
</div>

<p>
Instead use:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">have</span>() {
    <span class="org-keyword">if ! </span><span class="org-builtin">command</span> -v <span class="org-string">"$1"</span> &gt; /dev/null 2&gt;&amp;1; <span class="org-keyword">then</span>
        <span class="org-builtin">echo</span> <span class="org-string">"$1 not found."</span>
        <span class="org-keyword">return</span> 2                        <span class="org-comment-delimiter"># </span><span class="org-comment">An error occurred.</span>
    <span class="org-keyword">fi</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">have ag &amp;&amp; <span class="org-builtin">alias</span> <span class="org-variable-name">grep</span>=<span class="org-string">'ag'</span>
</pre>
</div>

<p>
See also
<a href="https://unix.stackexchange.com/questions/85249/why-not-use-which-what-to-use-then">https://unix.stackexchange.com/questions/85249/why-not-use-which-what-to-use-then</a>.
</p>

<p>
[[ supports a wider range of tests in both cases, and has custom parsing rules
that avoid the need for quoting variables, operators, and so on. If you&rsquo;re
specifically using either Bash or zsh, use [[. If you&rsquo;re writing a portable
script, write to the POSIX-compatible [ / test command (which may or may not be
a real command on your running system).
</p>

<p>
Just use [[ there and forget [ exists.
</p>
</div>
</div>

<div id="outline-container-org2f61037" class="outline-2">
<h2 id="org2f61037">Startup files</h2>
<div class="outline-text-2" id="text-org2f61037">
<p>
There are 3 <b>types of shells</b>:
</p>

<ul class="org-ul">
<li><p>
(interactive) <b>login</b>
</p>

<p>
(for which <code>c:/cygwin/etc/profile</code> and <code>.profile</code> are read, which sources <code>.bashrc</code>
as well)
</p>

<div class="note">
<p>
Launching Cygwin Terminal (login shell) does not load <code>.bashrc</code> on its own, it
only loads <code>.bash_profile</code>. Hence, the need to have a <code>.bash_profile</code> sourcing
<code>.bashrc</code>&#x2026;
</p>

</div></li>

<li><p>
<b>interactive</b> (non-login)
</p>

<p>
(for which <code>.bashrc</code> is read)
</p></li>

<li><p>
normal shell
</p>

<p>
i.e. one that&rsquo;s running a <b>script</b> (Bash does not execute any initialization
file in this case!)
</p>

<p>
<code>$tty</code> is empty.
</p></li>
</ul>

<p>
We just let <code>.profile</code> also read <code>.bashrc</code> and put everything in <code>.bashrc</code>.
</p>

<p>
<b>Read</b> <a href="http://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/">Zsh/Bash startup files loading order</a>:
</p>

<ul class="org-ul">
<li>For Bash, put stuff in <code>~/.bashrc</code>, and make <code>~/.bash_profile</code> source it.</li>
</ul>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">User dependent .bash_profile file</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Source the user's .bashrc if it exists.</span>
<span class="org-keyword">if</span> [[ -f <span class="org-string">"$HOME"</span>/.bashrc ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">.</span> <span class="org-string">"$HOME"</span>/.bashrc
<span class="org-keyword">fi</span>
</pre>
</div>

<ul class="org-ul">
<li>For Zsh, put stuff in <code>~/.zprofile</code>, which is always executed.</li>
</ul>

<p>
To recover the default Bash configuration files, get their copy from
<code>/etc/skel</code>.
</p>

<p>
See <a href="http://blog.flowblok.id.au/2013-02/shell-startup-scripts.html">http://blog.flowblok.id.au/2013-02/shell-startup-scripts.html</a> for a Dotty
graph of the files&#x2026;
</p>

<div class="note">
<p>
If you get a couple of &ldquo;command not found&rdquo; errors and a corrupt prompt at
startup, then your <code>.bashrc</code> is probably in Windows text format (<code>\r\n</code> line
endings).  Make sure your editor is in Unix format when creating text files.
</p>

</div>
</div>

<div id="outline-container-orgaa68bb9" class="outline-3">
<h3 id="orgaa68bb9">What to put where?</h3>
<div class="outline-text-3" id="text-orgaa68bb9">
<p>
Login shell runs <code>.profile</code> (or <code>.bash_profile</code> or <code>.bash_login</code>) on startup. Set your
env variables in there, because sub-shells will inherit the env vars. Then make
<code>.profile</code> run your <code>.bashrc</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">.</span> .bashrc
</pre>
</div>

<p>
Interactive runs <code>.bashrc</code>. Since it inherits envs, but not aliases, put your
aliases in this file.
</p>

<p>
Shell scripts, cron jobs, and the like, run with a bare shell: no bashrc or
profiles are run. No kidding you get 4 env vars set, the bare minimum. Therefore
your <code>PATH</code> won&rsquo;t work very well so you often have to give an absolute pathname
like in <code>crontab</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">right: 0 0 * * 2 /usr/sbin/apachectl restart
wrong: 0 0 * * 2 apachectl restart
</pre>
</div>

<p>
From <a href="https://www.linuxquestions.org/questions/linux-general-1/difference-between-normal-shell-and-login-shell-14983/#post4828786">https://www.linuxquestions.org/questions/linux-general-1/difference-between-normal-shell-and-login-shell-14983/#post4828786</a>
</p>
</div>
</div>

<div id="outline-container-org0477715" class="outline-3">
<h3 id="org0477715">What to put in your Zsh startup files</h3>
<div class="outline-text-3" id="text-org0477715">
<p>
See <a href="http://zsh.sourceforge.net/Guide/zshguide02.html">http://zsh.sourceforge.net/Guide/zshguide02.html</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-org043b343" class="outline-2">
<h2 id="org043b343">Configuration related to Bash</h2>
<div class="outline-text-2" id="text-org043b343">
<p>
Le <code>!</code> en shell permet plein de trucs sympa.
</p>

<ul class="org-ul">
<li><code>!!</code> refait la dernière commande</li>
<li><code>!cmd</code> refait la dernière commande commençant par <code>cmd</code></li>
<li><code>!cmd:p</code> permet de visualiser sans éxecuter la dernière commande commençant
par <code>cmd</code></li>
<li><code>!$</code> est le dernier mot de la ligne de commande précédente</li>
<li><code>!cmd:$</code> est le dernier mot du dernier ligne de commande commençant par <code>cmd</code></li>
<li><code>!*</code> est l&rsquo;ensemble de la dernière ligne de commande à part le premier mot</li>
</ul>

<p>
Pourquoi ce dernier est-il utile ?  Pense à ceci :
</p>

<div class="org-src-container">
<pre class="src src-shell">$ gm convret -size 120x120 input.png -resize 120x120 -draw <span class="org-string">"gravity southeast text 0,0 'Dave Neary'"</span> output.jpg
bash: convret: command not found
$ gm convert !*
</pre>
</div>
</div>

<div id="outline-container-org25d5cf3" class="outline-3">
<h3 id="org25d5cf3">Preamble</h3>
<div class="outline-text-3" id="text-org25d5cf3">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">## </span><span class="org-comment">bash_profile --- Bourne Again Shell configuration file (for interactive shells)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2003-2019 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: bash, dotfile, config</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Code:</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">If running in terminal...</span>
<span class="org-keyword">if </span><span class="org-builtin">test</span> -t 1; <span class="org-keyword">then</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">... start Zsh directly (when I open "Bash on Ubuntu on Windows" for example)</span>
    <span class="org-builtin">echo</span> <span class="org-string">"Execute Zsh..."</span>
    which zsh &amp;&amp; <span class="org-keyword">exec</span> zsh
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
To test, open the Terminal and type the following, and it should say zsh.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">echo</span> $<span class="org-variable-name">0</span>
</pre>
</div>

<p>
Prevent &ldquo;stdin is not a tty&rdquo; errors when <code>ssh</code>&rsquo;ing to a remote machine (or using
<code>scp</code>, <code>rcp</code> or <code>rsync</code>):
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">If not running interactively, don't do anything.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">isInteractive=$(</span><span class="org-sh-quoted-exec">echo</span><span class="org-comment"> $- | grep i)</span>
[[ <span class="org-string">"$-"</span> != *i* ]] &amp;&amp; <span class="org-keyword">return</span>
</pre>
</div>

<p>
You don&rsquo;t want to perform a full-blown initialization every time scripts
execute.
</p>

<p>
It&rsquo;s important to refrain from outputting anything in those cases.
</p>
</div>
</div>

<div id="outline-container-org3e7070b" class="outline-3">
<h3 id="org3e7070b">Source global rc file (if any)</h3>
<div class="outline-text-3" id="text-org3e7070b">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Source global definitions only if the session is interactive.</span>
<span class="org-keyword">if</span> [[ $(<span class="org-sh-quoted-exec">expr</span> index <span class="org-string">"$-"</span> i) -ne 0 ]] &amp;&amp; [[ -f /etc/bashrc ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">.</span> /etc/bashrc
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
A common cause is <code>mesg y</code> in <code>/etc/bashrc</code> on the remote machine, hence the user
has to try avoiding sourcing it (on the <b>remote</b> machine) in non-interactive
sessions.
</p>
</div>
</div>

<div id="outline-container-org9822d88" class="outline-3">
<h3 id="org9822d88">Command history</h3>
<div class="outline-text-3" id="text-org9822d88">
<p>
Access and modify commands that you had previously typed at the command line.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Store 10000 commands in history buffer.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">HISTSIZE</span>=10000

<span class="org-comment-delimiter"># </span><span class="org-comment">Store 10000 commands in history FILE.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">HISTFILESIZE</span>=10000

<span class="org-comment-delimiter"># </span><span class="org-comment">Avoid recording common commands (like ls, top and clear).</span>
<span class="org-builtin">export</span> <span class="org-variable-name">HISTIGNORE</span>=”ls*:top:clear”

<span class="org-comment-delimiter"># </span><span class="org-comment">Ignore duplicate commands and commands starting with space.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">HISTCONTROL</span>=ignoreboth           <span class="org-comment-delimiter"># </span><span class="org-comment">Prefix a command with a space to keep it out of the history.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5768f61" class="outline-3">
<h3 id="org5768f61">Prompt</h3>
<div class="outline-text-3" id="text-org5768f61">
<p>
Appearance of the prompt.
</p>

<p>
Note <code>\[...\]</code> used by the shell to count proper length.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> tput setaf 1 &amp;&gt; /dev/null; <span class="org-keyword">then</span>
    tput sgr0
    <span class="org-keyword">if</span> [[ $(<span class="org-sh-quoted-exec">tput</span> colors) -ge 256 ]] 2&gt; /dev/null; <span class="org-keyword">then</span>
        <span class="org-variable-name">MAG</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 9)
        <span class="org-variable-name">ORANGE</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 172)
        <span class="org-variable-name">GREEN</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 190)
        <span class="org-variable-name">PURPLE</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 141)
        <span class="org-variable-name">WHITE</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 256)
    <span class="org-keyword">else</span>
        <span class="org-variable-name">MAG</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 5)
        <span class="org-variable-name">ORANGE</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 4)
        <span class="org-variable-name">GREEN</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 2)
        <span class="org-variable-name">PURPLE</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 1)
        <span class="org-variable-name">WHITE</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 7)
    <span class="org-keyword">fi</span>
    <span class="org-variable-name">BOLD</span>=$(<span class="org-sh-quoted-exec">tput</span> bold)
    <span class="org-variable-name">RESET</span>=$(<span class="org-sh-quoted-exec">tput</span> sgr0)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">** Controlling the Prompt</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Regular colors.</span>
<span class="org-variable-name">grn</span>=<span class="org-string">"\[$(</span><span class="org-sh-quoted-exec">tput</span><span class="org-string"> setaf 2)\]"</span>
<span class="org-variable-name">yel</span>=<span class="org-string">"\[$(</span><span class="org-sh-quoted-exec">tput</span><span class="org-string"> setaf 3)\]"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Bold colors.</span>
<span class="org-variable-name">BLK</span>=<span class="org-string">"\[$(</span><span class="org-sh-quoted-exec">tput</span><span class="org-string"> setaf 0; tput bold)\]"</span>
<span class="org-variable-name">RED</span>=<span class="org-string">"\[$(</span><span class="org-sh-quoted-exec">tput</span><span class="org-string"> setaf 1; tput bold)\]"</span>
<span class="org-variable-name">GRN</span>=<span class="org-string">"\[$(</span><span class="org-sh-quoted-exec">tput</span><span class="org-string"> setaf 2; tput bold)\]"</span>

<span class="org-variable-name">reset_color</span>=<span class="org-string">"\[$(</span><span class="org-sh-quoted-exec">tput</span><span class="org-string"> sgr0)\]"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PROMPT_COMMAND + PS1 --- Default interaction prompt</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">To be called just before the prompt is printed.</span>
<span class="org-function-name">leuven-before-prompt</span>() {
    <span class="org-variable-name">RET</span>=$<span class="org-variable-name">?</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Set a color prompt (unless in Emacs).</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">TERM</span><span class="org-keyword"> in</span>
        cygwin|xterm*|rxvt-unicode)
            <span class="org-comment-delimiter"># </span><span class="org-comment">`M-x shell' under Cygwin Emacs.</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">`M-x term' under Cygwin Emacs.</span>
            <span class="org-builtin">local</span> <span class="org-variable-name">color_prompt</span>=yes
            ;;
        emacs)
            <span class="org-comment-delimiter"># </span><span class="org-comment">`M-x shell' under EmacsW32.</span>
            <span class="org-builtin">local</span> <span class="org-variable-name">color_prompt</span>=no
            ;;
    <span class="org-keyword">esac</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Colorful prompt, based on whether the previous command succeeded or not.</span>
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">RET</span> -eq 0 ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">HILIT_RET</span>=$<span class="org-variable-name">GRN</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">HILIT_RET</span>=$<span class="org-variable-name">RED</span>
    <span class="org-keyword">fi</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Replace the `$HOME' prefix by `~' in the current directory.</span>
    <span class="org-keyword">if</span> [[ <span class="org-string">"$HOME"</span> = <span class="org-string">"${PWD:0:${#HOME}}"</span> ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">myPWD</span>=<span class="org-string">"~${PWD:${#HOME}}"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">myPWD</span>=$<span class="org-variable-name">PWD</span>
    <span class="org-keyword">fi</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">How many characters of the path should be kept.</span>
    <span class="org-builtin">local</span> <span class="org-variable-name">pwd_max_length</span>=15

    <span class="org-keyword">if</span> [[ ${#<span class="org-variable-name">myPWD</span>} -gt $<span class="org-variable-name">pwd_max_length</span> ]]; <span class="org-keyword">then</span>
        <span class="org-builtin">local</span> <span class="org-variable-name">pwd_offset</span>=$(( ${#<span class="org-variable-name">myPWD</span>} - pwd_max_length ))
        <span class="org-variable-name">myPWD</span>=<span class="org-string">"...${myPWD:$pwd_offset:$pwd_max_length}"</span>
    <span class="org-keyword">fi</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Prompt character.</span>
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -eq 0 ]]; <span class="org-keyword">then</span>
        <span class="org-builtin">local</span> <span class="org-variable-name">PROMPTCHAR</span>=<span class="org-string">"#"</span>
    <span class="org-keyword">else</span>
        <span class="org-builtin">local</span> <span class="org-variable-name">PROMPTCHAR</span>=<span class="org-string">"$"</span>
    <span class="org-keyword">fi</span>

    <span class="org-keyword">if</span> [[ <span class="org-string">"$color_prompt"</span> = <span class="org-string">"yes"</span> ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">PS1</span>=<span class="org-string">"$grn\u@\h$BLK:${reset_color}$yel$myPWD${HILIT_RET} $RET${reset_color}$PROMPTCHAR "</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">PS1</span>=<span class="org-string">"\u@\h:$myPWD $RET$PROMPTCHAR "</span>
    <span class="org-keyword">fi</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">Execute the content of the `PROMPT_COMMAND' just before displaying the `PS1'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">variable.</span>
<span class="org-keyword">case</span> <span class="org-string">"$TERM"</span><span class="org-keyword"> in</span>
    <span class="org-string">"dumb"</span>)
        <span class="org-comment-delimiter"># </span><span class="org-comment">No fancy multi-line prompt for TRAMP (see `tramp-terminal-type').</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Don't confuse it!</span>
        <span class="org-variable-name">PS1</span>=<span class="org-string">"&gt; "</span>
        ;;
    *)
        <span class="org-variable-name">PROMPT_COMMAND</span>=leuven-before-prompt
        ;;
<span class="org-keyword">esac</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PS2 --- Continuation interactive prompt</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PS3 --- Prompt used by "select" inside shell script</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">*** PS4 --- Used by "set -x" to prefix tracing output</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Get line numbers when you run with `-x'.</span>
<span class="org-variable-name">PS4</span>=<span class="org-string">'+'</span>$<span class="org-variable-name">grn</span><span class="org-string">'[$0:$LINENO]+ '</span>${<span class="org-variable-name">reset_color</span>}
</pre>
</div>

<div class="warning">
<p>
When you invoke the <b>shell from Emacs</b>, it is a <b>non-interactive</b> session, which
might get different settings.
</p>

</div>

<div class="tip">
<p>
Single quotes around <code>LINENO</code> in <code>PS4</code>; otherwise, <b>this</b> line number is taken&#x2026;
</p>

</div>

<div class="tip">
<p>
If you are looking at performance issues, put <code>$SECONDS</code> in the PS4 prompt as
well.
</p>

</div>
</div>
</div>

<div id="outline-container-orgfd02fed" class="outline-3">
<h3 id="orgfd02fed">Default permissions</h3>
<div class="outline-text-3" id="text-orgfd02fed">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Permissions on newly created files.</span>
<span class="org-builtin">umask</span> 022                               <span class="org-comment-delimiter"># </span><span class="org-comment">Prevent new dirs and files from being</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">group and world writable.</span>
<span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -eq 0 ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">umask</span> 077                           <span class="org-comment-delimiter"># </span><span class="org-comment">Stricter.</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge940050" class="outline-3">
<h3 id="orge940050">Shell options</h3>
<div class="outline-text-3" id="text-orge940050">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Automatically cd into a  directory without the `cd' in front of it.</span>
<span class="org-builtin">shopt</span> -s autocd

<span class="org-comment-delimiter"># </span><span class="org-comment">Correct dir spellings.</span>
<span class="org-builtin">shopt</span> -s cdspell

<span class="org-comment-delimiter"># </span><span class="org-comment">Make sure display get updated when terminal window get resized.</span>
<span class="org-builtin">shopt</span> -q -s checkwinsize

<span class="org-comment-delimiter"># </span><span class="org-comment">Append rather than overwrite history.</span>
<span class="org-builtin">shopt</span> -s histappend

<span class="org-comment-delimiter"># </span><span class="org-comment">Make multi-line commandsline in history.</span>
<span class="org-builtin">shopt</span> -q -s cmdhist
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc1a827f" class="outline-3">
<h3 id="orgc1a827f">Zsh-like Command Help</h3>
<div class="outline-text-3" id="text-orgc1a827f">
<p>
In the Zsh shell, it’s easy to open up any terminal command’s manual by quickly
pressing Alt-H on the keyboard.
</p>

<p>
With Bash, accessing a manual is man command. Suffice it to say, the Zsh way of
doing things is much, much nicer. To add this functionality to the Bash shell:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">bind</span> <span class="org-string">'"\eh": "\C-a\eb\ed\C-y\e#man \C-y\C-m\C-p\C-p\C-a\C-d\C-e"'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org37276c7" class="outline-3">
<h3 id="org37276c7">Miscellaneous</h3>
<div class="outline-text-3" id="text-org37276c7">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">** 8.6 Programmable Completion</span>

<span class="org-builtin">complete</span> -A helptopic help
<span class="org-builtin">complete</span> -A hostname ssh telnet nmap ftp ping host traceroute nslookup
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment"># Get a file's basename, dirname, extension, etc</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Get extension; everything after last '.'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ext=${file##*.}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Basename.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">basename=$(</span><span class="org-sh-quoted-exec">basename</span><span class="org-comment"> "$file")</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Everything after last '/'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">basename=${file##*/}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Dirname.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">dirname=$(</span><span class="org-sh-quoted-exec">dirname</span><span class="org-comment"> "$file")</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># Everything before last '/'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">basename=${file%/*}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb66dad" class="outline-3">
<h3 id="orgcb66dad">Source common file</h3>
<div class="outline-text-3" id="text-orgcb66dad">
<p>
<code>.shellrc</code> contains miscellaneous settings common to Bash and Zsh.
</p>

<p>
An <b>alias</b> is a simple string substitution.
</p>

<div class="note">
<p>
By default, it is <b>not expanded in non-interactive shells</b> (scripts, and even
functions called in an interactive shell!).
</p>

</div>

<p>
In general, it should not do more than <b>change the default options of a command</b>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Source common settings.</span>
<span class="org-builtin">.</span> <span class="org-string">"$HOME"</span>/.shellrc                      <span class="org-comment-delimiter"># </span><span class="org-comment">Error displayed if not found.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d45a1d" class="outline-3">
<h3 id="org3d45a1d">Postamble</h3>
<div class="outline-text-3" id="text-org3d45a1d">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* Local Variables</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: outline-minor</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">sh-shell: bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">bash_profile ends here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org82dea88" class="outline-3">
<h3 id="org82dea88">InputRC</h3>
<div class="outline-text-3" id="text-org82dea88">
<p>
This file controls the behavior of line input editing for programs that use
the Gnu <b>Readline</b> library. Existing programs include FTP, Bash, and Gdb.
</p>

<div class="note">
<p>
Zsh doesn&rsquo;t use the <code>inputrc</code> file.
</p>

</div>

<p>
See <a href="https://code.google.com/p/mintty/wiki/Tips#Readline_configuration">https://code.google.com/p/mintty/wiki/Tips#Readline_configuration</a>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">## </span><span class="org-comment">.inputrc --- my Readline Init File</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2005-2019 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: readline, dotfile, config</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">First, include any system-wide settings (ignored if one has his own</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">`.inputrc').</span>
$<span class="org-variable-name">include</span> /etc/skel/.inputrc
$<span class="org-variable-name">include</span> /etc/inputrc

<span class="org-comment-delimiter"># </span><span class="org-comment">Allow Meta (Alt) key bindings [line added to the top of my `.inputrc'].</span>
<span class="org-builtin">set</span> convert-meta on

<span class="org-comment-delimiter"># </span><span class="org-comment">Behave like Emacs when editing.</span>
<span class="org-builtin">set</span> editing-mode emacs                  <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-a/e      Start/End of line.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-f/b      Forward/Backward one character.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-d        Delete one character.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-k        Kill line.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-p/n      Previous/Next command in history.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-r        Search for command in history.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Ctrl-i/TAB    File name completion.</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Some defaults / modifications for the Emacs mode.</span>
$<span class="org-variable-name">if</span> <span class="org-variable-name">mode</span>=emacs

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;C-up/down&gt; for searching matching commands from the history.</span>
<span class="org-string">"\e[1;5A"</span>: history-search-backward
<span class="org-string">"\e[1;5B"</span>: history-search-forward

<span class="org-comment-delimiter"># </span><span class="org-comment">&lt;C-left/right&gt; to move by whole words.</span>
<span class="org-string">"\e[1;5C"</span>: forward-word
<span class="org-string">"\e[1;5D"</span>: backward-word

Meta-p: history-search-backward
Meta-n: history-search-forward

$<span class="org-variable-name">endif</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Ignore case while completing.</span>
<span class="org-builtin">set</span> completion-ignore-case on

<span class="org-comment-delimiter"># </span><span class="org-comment"># Display all alternatives for completion after one tab keypress.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">set show-all-if-ambiguous on</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#* Get Bash to display accented characters (Emacs *Meta Key* Problems in XTerm)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># Don't strip characters to 7 bits when reading.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">set input-meta on</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># (Synonym of 'meta-flag'.)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># Display characters with the eighth bit set directly rather than as</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># meta-prefixed characters.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">set output-meta on</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">.inputrc ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2a577ff" class="outline-2">
<h2 id="org2a577ff">Configuration related to Zsh</h2>
<div class="outline-text-2" id="text-org2a577ff">
<p>
Documentation: <a href="http://www.bash2zsh.com/zsh_refcard/refcard.pdf">Zsh Reference Card</a>.
</p>
</div>

<div id="outline-container-org32656d1" class="outline-3">
<h3 id="org32656d1">Examples</h3>
<div class="outline-text-3" id="text-org32656d1">
<ul class="org-ul">
<li><a href="http://aperiodic.net/phil/prompt/">Phil!&rsquo;s ZSH Prompt</a></li>
<li><a href="http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt/">My Extravagant Zsh Prompt</a> (with Git Repository Information)</li>
<li><a href="http://grml.org/zsh/zsh-lovers.html">zsh-lovers</a></li>
</ul>
</div>
</div>

<div id="outline-container-org04277d8" class="outline-3">
<h3 id="org04277d8">Prerequisites</h3>
<div class="outline-text-3" id="text-org04277d8">
<p>
Install Zsh.
</p>
</div>
</div>

<div id="outline-container-orgde9b031" class="outline-3">
<h3 id="orgde9b031">Preamble</h3>
<div class="outline-text-3" id="text-orgde9b031">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">## </span><span class="org-comment">.zshrc --- Z Shell configuration file (for interactive shells)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2009-2019 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: zsh, dotfile, config</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Code:</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Don't inherit the value of PS1 from the previous shell (Zsh from Bash).</span>
<span class="org-variable-name">PS1</span>=$<span class="org-string">'%{\e]0;%d\a%}\n%F{grn}%n@%m %F{yel}%d%f\n%# '</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment"># For Bash on Ubuntu on Windows.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">export BROWSER='/mnt/c/Windows/explorer.exe' # does not work.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">BROWSER</span>=<span class="org-string">'/mnt/c/Program Files (x86)/Mozilla Firefox/firefox.exe'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org76bea5b" class="outline-3">
<h3 id="org76bea5b">Add a new theme: Solarized</h3>
<div class="outline-text-3" id="text-org76bea5b">
<ul class="org-ul">
<li><a href="https://github.com/altercation/solarized/issues/90">How should bold/bright be handled by terminal emulators?</a></li>
<li><a href="https://github.com/mintty/mintty/issues/683">Solarized bold colors are gray</a></li>
</ul>

<p>
Karlin Fox ported the Solarized theme to MinTTY (the terminal which comes by
default with Cygwin), and it is available at <a href="https://github.com/karlin/mintty-colors-solarized">karlin/mintty-colors-solarized</a>.
</p>

<div class="org-src-container">
<pre class="src src-shell">git clone https://github.com/karlin/mintty-colors-solarized.git <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"$HOME"</span>/.dotfiles/plugins/mintty-colors-solarized
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">FILE</span>=<span class="org-string">"$HOME"</span>/.dotfiles/plugins/mintty-colors-solarized/mintty-solarized-dark.sh &amp;&amp; <span class="org-builtin">test</span> -f <span class="org-string">"$FILE"</span> &amp;&amp; <span class="org-builtin">.</span> <span class="org-string">"$FILE"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">XXX Check for MinTTY</span>
<span class="org-keyword">if</span> [[ -d /cygdrive/c/ ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;8;#404040\a'</span>     <span class="org-comment-delimiter"># </span><span class="org-comment">bold blk</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;9;#FF4040\a'</span>     <span class="org-comment-delimiter"># </span><span class="org-comment">bold red</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;10;#40FF40\a'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">bold grn</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;11;#FFFF40\a'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">bold yel</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;12;#6060FF\a'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">bold blu</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;13;#FF40FF\a'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">bold mag</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;14;#40FFFF\a'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">bold cyn</span>
    <span class="org-builtin">echo</span> -ne <span class="org-string">'\e]4;15;#FFFFFF\a'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">bold wht</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
<a href="https://github.com/oumu/mintty-color-schemes">https://github.com/oumu/mintty-color-schemes</a>
<a href="https://github.com/mintty/mintty/wiki/Tips">https://github.com/mintty/mintty/wiki/Tips</a>
<a href="http://mintty.github.io/mintty.1.html#CONFIGURATION">http://mintty.github.io/mintty.1.html#CONFIGURATION</a>
<a href="https://stackoverflow.com/questions/24229406/how-to-get-vim-on-cygwin-to-display-right-colors">https://stackoverflow.com/questions/24229406/how-to-get-vim-on-cygwin-to-display-right-colors</a>
</p>

<p>
See great (more portable) stuff at
<a href="https://github.com/jimeh/git-aware-prompt/blob/master/colors.sh">https://github.com/jimeh/git-aware-prompt/blob/master/colors.sh</a>!
</p>
</div>
</div>

<div id="outline-container-org9b9d6c4" class="outline-3">
<h3 id="org9b9d6c4">Install Powerline-patched fonts</h3>
<div class="outline-text-3" id="text-org9b9d6c4">
<p>
<b>Powerline patched</b> versions of the most popular mono <b>fonts</b> are available at
<a href="https://github.com/powerline/fonts">powerline/fonts</a>.
</p>

<p>
Make sure to change the font of MinTTY:
</p>

<ul class="org-ul">
<li>Right click the title bar of the Terminal, click Options.</li>
<li>Change your font to a Powerline patched font you installed.</li>
</ul>

<div class="note">
<p>
If you right-click them, there should be install option in the menu. Or you can
drag it straight to Windows Fonts folder
</p>

</div>

<p>
Test if it&rsquo;s working correctly by running:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">echo</span> <span class="org-string">"\ue0b0 \u00b1 \ue0a0 \u27a6 \u2718 \u26a1 \u2699"</span>
</pre>
</div>

<p>
Good-looking fonts:
</p>
<ul class="org-ul">
<li>UbuntuMono</li>
<li>DejaVuSansMono</li>
<li>DroidSansMono (bad?)</li>
</ul>

<p>
For Consolas, use: <a href="https://github.com/runsisi/consolas-font-for-powerline">https://github.com/runsisi/consolas-font-for-powerline</a>.
</p>
</div>
</div>

<div id="outline-container-org589e25d" class="outline-3">
<h3 id="org589e25d">Install &ldquo;Oh My Zsh&rdquo;</h3>
<div class="outline-text-3" id="text-org589e25d">
<p>
Oh My Zsh is just awesome!
</p>

<div class="org-src-container">
<pre class="src src-shell">git clone ...
</pre>
</div>

<div class="note">
<p>
We put Oh My Zsh at the very beginning, so that it does not override our own
settings.
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$HOME"</span>/.dotfiles/plugins/oh-my-zsh ]]; <span class="org-keyword">then</span>
    <span class="org-variable-name">ZSH</span>=<span class="org-string">"$HOME"</span>/.dotfiles/plugins/oh-my-zsh
    <span class="org-comment-delimiter"># </span><span class="org-comment">${ZSH_CUSTOM:-~/.dotfiles/plugins/oh-my-zsh/custom}</span>
    <span class="org-variable-name">ZSH_CUSTOM</span>=<span class="org-string">"$ZSH/custom"</span>

    <span class="org-variable-name">HIST_STAMPS</span>=<span class="org-string">"yyyy-mm-dd"</span>            <span class="org-comment-delimiter"># </span><span class="org-comment">See command `history'.</span>

    <span class="org-variable-name">COMPLETION_WAITING_DOTS</span>=<span class="org-string">"true"</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
<a href="http://marc-abramowitz.com/archives/2012/04/10/fix-for-oh-my-zsh-git-svn-prompt-slowness/">http://marc-abramowitz.com/archives/2012/04/10/fix-for-oh-my-zsh-git-svn-prompt-slowness/</a>
</p>
</div>
</div>

<div id="outline-container-org5d1c7cb" class="outline-3">
<h3 id="org5d1c7cb">Change the Oh My Zsh theme to &ldquo;agnoster&rdquo;</h3>
<div class="outline-text-3" id="text-org5d1c7cb">
</div>

<div id="outline-container-org803f482" class="outline-4">
<h4 id="org803f482">Agnoster Theme Adaption for SVN</h4>
<div class="outline-text-4" id="text-org803f482">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">if [[ -r "$ZSH" ]]; then</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">prompt_svn() {</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">local rev branch</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">if in_svn; then</span>
<span class="org-comment-delimiter">#             </span><span class="org-comment">rev=$(</span><span class="org-sh-quoted-exec">svn_get_rev_nr</span><span class="org-comment">)</span>
<span class="org-comment-delimiter">#             </span><span class="org-comment">branch=$(</span><span class="org-sh-quoted-exec">svn_get_branch_name</span><span class="org-comment">)</span>
<span class="org-comment-delimiter">#             </span><span class="org-comment">if [[ $(</span><span class="org-sh-quoted-exec">svn_dirty_choose_pwd</span><span class="org-comment"> 1 0) -eq 1 ]]; then</span>
<span class="org-comment-delimiter">#                 </span><span class="org-comment">prompt_segment yel blk</span>
<span class="org-comment-delimiter">#                 </span><span class="org-comment">echo -n "$rev@$branch"</span>
<span class="org-comment-delimiter">#                 </span><span class="org-comment">echo -n " ±"</span>
<span class="org-comment-delimiter">#             </span><span class="org-comment">else</span>
<span class="org-comment-delimiter">#                 </span><span class="org-comment">prompt_segment grn blk</span>
<span class="org-comment-delimiter">#                 </span><span class="org-comment">echo -n "$rev@$branch"</span>
<span class="org-comment-delimiter">#             </span><span class="org-comment">fi</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">fi</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">}</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">fi</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org13bedde" class="outline-3">
<h3 id="org13bedde">Install Powerlevel9k!</h3>
<div class="outline-text-3" id="text-org13bedde">
<div class="org-src-container">
<pre class="src src-shell">git clone https://github.com/bhilburn/powerlevel9k.git <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"$ZSH_CUSTOM"</span>/themes/powerlevel9k
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">if [[ -r "$HOME"/.dotfiles/plugins/oh-my-zsh ]]; then</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">ZSH_THEME="powerlevel9k/powerlevel9k"</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment"># Single-line prompt.</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_PROMPT_ON_NEWLINE=false</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_RPROMPT_ON_NEWLINE=false</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX=''</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX=''</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment"># Customise the Powerlevel9k prompts.</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(ssh dir vcs)</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status command_execution_time time background_jobs)</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_STATUS_VERBOSE=false</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_STATUS_OK_IN_NON_VERBOSE=true</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_COMMAND_EXECUTION_TIME_THRESHOLD=10</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">POWERLEVEL9K_TIME_FORMAT="%D{%H:%M}"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">fi</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">git clone https://gitlab.com/robobenklein/zinc <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"$ZSH_CUSTOM"</span>/themes/zinc
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">ZSH_THEME</span>=<span class="org-string">""</span>
<span class="org-builtin">source</span> <span class="org-string">"$ZSH_CUSTOM"</span>/themes/zinc/zinc.zsh

<span class="org-variable-name">zinc_default_user</span>=<span class="org-string">"f.niessen"</span>
<span class="org-variable-name">zinc_default_host</span>=<span class="org-string">"XIPHIAS"</span>

prompt_zinc_setup rprompt-previous-line

<span class="org-comment-delimiter"># </span><span class="org-comment">Input your own strftime format: http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html</span>
<span class="org-function-name">zincs_time</span>() {
    <span class="org-variable-name">REPLY</span>=<span class="org-string">"%D{%H:%M}"</span>
}

prompt_zinc_setup fniessen-p9k-port

<span class="org-comment-delimiter"># </span><span class="org-comment">prompt_zinc_setup fniessen-p9k-port</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># either user and host separate with CONNECT_PREV</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># or zincs_userhost</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zinc_left=(</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment"># zincs_user</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment"># zincs_host</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_userhost</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_cwd</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_vcs</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">)</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zinc_right=(</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_retval</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_execution_time</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">my_custom_time</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_jobs</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">)</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zinc_opts=(</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_user "white;black;CONDITIONAL;normal"</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_host "white;black;CONNECT_PREV+CONDITIONAL;normal"</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">zincs_userhost "white;black;CONDITIONAL;normal"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">)</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># autohide the user when it's default</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zincs_user_display_hidden() {</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">[[ "$USER" == "$zinc_default_user" ]] &amp;&amp; true || false</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zincs_host_display_hidden() {</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">[[ "$HOST" == "$zinc_default_host" ]] &amp;&amp; true || false</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># or show both when either changes:</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zincs_userhost_display_hidden() {</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">[[ "$HOST" == "$zinc_default_host" ]] &amp;&amp; [[ "$USER" == "$zinc_default_user" ]] &amp;&amp; true</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># set the time format option:</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">my_custom_time() {</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">REPLY="%T"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"># set the zincs_execution_time min time:</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">zincs_execution_time[threshold]=10</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f11a48" class="outline-3">
<h3 id="org4f11a48">Plugins</h3>
<div class="outline-text-3" id="text-org4f11a48">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$HOME"</span>/.dotfiles/plugins/oh-my-zsh ]]; <span class="org-keyword">then</span>

    <span class="org-variable-name">plugins</span>=(
        colored-man-pages
        extract
        <span class="org-comment-delimiter"># </span><span class="org-comment">git                           # Provide many aliases and a few useful functions.</span>
        <span class="org-builtin">history</span>
        history-substring-search
        <span class="org-comment-delimiter"># </span><span class="org-comment">svn</span>
    )
<span class="org-keyword">fi</span>
</pre>
</div>
</div>

<div id="outline-container-orgd88c185" class="outline-4">
<h4 id="orgd88c185">Display colored man pages</h4>
<div class="outline-text-4" id="text-orgd88c185">
<div class="seealso">
<p>
<a href="file:///cygdrive/d/Users/fni/.minttyrc">.minttyrc</a> to <b>fix colors</b> and fonts.  See <a href="http://mintty.googlecode.com/svn-history/r1065/trunk/docs/mintty.1.html">mintty Manual Reference Pages</a> for more
information.
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$HOME"</span>/.dotfiles/plugins/oh-my-zsh ]]; <span class="org-keyword">then</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Fix Colorize man pages (with `less` pager) not working in Cygwin MinTTY</span>
    <span class="org-builtin">export</span> <span class="org-variable-name">MANROFFOPT</span>=<span class="org-string">"-c"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">in your shell rc file. This has the same effect as</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">export GROFF_NO_SGR=1</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">but only affects man. I'm not sure if groff is used for anything else</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">besides man pages, but this seems safer to prevent unintended side</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">effects.</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd69140" class="outline-4">
<h4 id="orgbd69140">Zsh Syntax Highlighting</h4>
<div class="outline-text-4" id="text-orgbd69140">
<p>
Besides the syntax highlighting for your shell, this plugin has the capability
to verify the correctness of your command.
</p>

<div class="org-src-container">
<pre class="src src-shell">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"$ZSH_CUSTOM"</span>/plugins/zsh-syntax-highlighting
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$ZSH_CUSTOM/plugins/zsh-syntax-highlighting"</span> ]]; <span class="org-keyword">then</span>
    <span class="org-variable-name">plugins</span>+=(zsh-syntax-highlighting)
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org463879f" class="outline-4">
<h4 id="org463879f">Zsh Autosuggestions</h4>
<div class="outline-text-4" id="text-org463879f">
<p>
It suggests commands based on your command history.  Very useful!  To select the
proposed command, press the right arrow key.
</p>

<div class="org-src-container">
<pre class="src src-shell">git clone https://github.com/zsh-users/zsh-autosuggestions <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"$ZSH_CUSTOM"</span>/plugins/zsh-autosuggestions
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$ZSH_CUSTOM/plugins/zsh-autosuggestions"</span> ]]; <span class="org-keyword">then</span>
    <span class="org-variable-name">plugins</span>+=(zsh-autosuggestions)
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4aaf49c" class="outline-4">
<h4 id="org4aaf49c">Load Zsh tools</h4>
<div class="outline-text-4" id="text-org4aaf49c">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$HOME"</span>/.dotfiles/plugins/oh-my-zsh ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">.</span> <span class="org-string">"$ZSH"</span>/oh-my-zsh.sh
<span class="org-keyword">fi</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">if</span> [[ -r <span class="org-string">"$ZSH_CUSTOM/plugins/zsh-autosuggestions"</span> ]]; <span class="org-keyword">then</span>
    <span class="org-variable-name">ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE</span>=<span class="org-string">'fg=5'</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaa90d6b" class="outline-3">
<h3 id="orgaa90d6b">Options</h3>
<div class="outline-text-3" id="text-orgaa90d6b">
</div>
<div id="outline-container-org98bdcea" class="outline-4">
<h4 id="org98bdcea">Changing Directories</h4>
<div class="outline-text-4" id="text-org98bdcea">
<div class="org-src-container">
<pre class="src src-shell">setopt AUTO_CD                  <span class="org-comment-delimiter"># </span><span class="org-comment">Change directory given just path.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org63227b9" class="outline-4">
<h4 id="org63227b9">Expansion and Globbing</h4>
<div class="outline-text-4" id="text-org63227b9">
<div class="org-src-container">
<pre class="src src-shell">setopt EXTENDED_GLOB            <span class="org-comment-delimiter"># </span><span class="org-comment">Use additional pattern matching features.</span>
setopt NOMATCH                  <span class="org-comment-delimiter"># </span><span class="org-comment">Unmatched patterns cause an error.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1df30e9" class="outline-4">
<h4 id="org1df30e9">History</h4>
<div class="outline-text-4" id="text-org1df30e9">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">History.</span>
<span class="org-variable-name">HISTSIZE</span>=10000
<span class="org-variable-name">SAVEHIST</span>=10000
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">setopt APPEND_HISTORY           <span class="org-comment-delimiter"># </span><span class="org-comment">Append rather than overwrite history file.</span>
setopt EXTENDED_HISTORY         <span class="org-comment-delimiter"># </span><span class="org-comment">Save timestamp and runtime information.</span>
setopt HIST_EXPIRE_DUPS_FIRST   <span class="org-comment-delimiter"># </span><span class="org-comment">Allow dups, but expire old ones when I hit HISTSIZE.</span>
setopt HIST_FIND_NO_DUPS        <span class="org-comment-delimiter"># </span><span class="org-comment">Don't find duplicates in history.</span>
setopt HIST_IGNORE_ALL_DUPS     <span class="org-comment-delimiter">#</span><span class="org-comment">! Ignore duplicate commands regardless of commands in between.</span>
setopt HIST_IGNORE_DUPS         <span class="org-comment-delimiter"># </span><span class="org-comment">Ignore duplicate commands.</span>
setopt HIST_REDUCE_BLANKS       <span class="org-comment-delimiter"># </span><span class="org-comment">Leave blanks out.</span>
setopt HIST_SAVE_NO_DUPS        <span class="org-comment-delimiter"># </span><span class="org-comment">Don't save duplicates.</span>
setopt INC_APPEND_HISTORY       <span class="org-comment-delimiter"># </span><span class="org-comment">Write after each command.</span>
setopt SHARE_HISTORY            <span class="org-comment-delimiter"># </span><span class="org-comment">Share history between sessions.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf83e85a" class="outline-4">
<h4 id="orgf83e85a">Job Control</h4>
<div class="outline-text-4" id="text-orgf83e85a">
<div class="org-src-container">
<pre class="src src-shell">setopt NOTIFY                   <span class="org-comment-delimiter"># </span><span class="org-comment">Immediately report changes in background job status.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d2a3ed" class="outline-4">
<h4 id="org2d2a3ed">Zle</h4>
<div class="outline-text-4" id="text-org2d2a3ed">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Beep when there's an error with the command text you're typing in (e.g. if you</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">hit tab and there are no matching files) -- not as a result of normal commands</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">returning errors.</span>
setopt BEEP
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5721484" class="outline-3">
<h3 id="org5721484">Zsh line editor</h3>
<div class="outline-text-3" id="text-org5721484">
<p>
Useful keybindings:
</p>

<dl class="org-dl">
<dt><code>M-q</code></dt><dd>Type another command in the middle of a long command (look at <code>man</code>, etc.):
you can push the current command to the buffer stack, and after executing
another command, you can see the top of the stack popped.</dd>

<dt><code>M-.</code></dt><dd>Recall the last argument of the previous command, and so on.</dd>

<dt><code>C-r</code></dt><dd>Do an interactive search across all of the <b>command history</b>.</dd>
</dl>

<p>
Useful commands:
</p>

<dl class="org-dl">
<dt><code>vared VAR</code></dt><dd>Interactively edit variable <code>VAR</code>.</dd>
</dl>

<div class="note">
<p>
See <a href="file:///cygdrive/d/Users/fni/.dotfiles/plugins/oh-my-zsh/lib/key-bindings.zsh">file:///cygdrive/d/Users/fni/.dotfiles/plugins/oh-my-zsh/lib/key-bindings.zsh</a> for extra key bindings.
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Behave like Emacs when editing.</span>
bindkey -e

<span class="org-comment-delimiter"># </span><span class="org-comment">Mappings for `Ctrl-up/down' for matching commands from the history.</span>
bindkey <span class="org-string">';5A'</span> history-search-backward
bindkey <span class="org-string">';5B'</span> history-search-forward

<span class="org-comment-delimiter"># </span><span class="org-comment">Mappings for `Ctrl-left/right' for word moving.</span>
bindkey <span class="org-string">';5C'</span> forward-word
bindkey <span class="org-string">';5D'</span> backward-word

<span class="org-comment-delimiter"># </span><span class="org-comment">Make Zsh beep like Bash when backspacing on an empty command line.</span>
<span class="org-function-name">backward-delete-char-beep</span>() {
    <span class="org-keyword">if</span> (( CURSOR == 0 )); <span class="org-keyword">then</span>
        zle beep
    <span class="org-keyword">fi</span>
    zle backward-delete-char
}
zle -N backward-delete-char-beep
bindkey <span class="org-string">"^?"</span> backward-delete-char-beep
</pre>
</div>
</div>
</div>

<div id="outline-container-org92a23ec" class="outline-3">
<h3 id="org92a23ec">Completion Widgets</h3>
<div class="outline-text-3" id="text-org92a23ec">
<p>
Zsh will attempt to complete wildcards by expanding them in the command line.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">zstyle :compinstall filename '/cygdrive/d/Users/fni/.zshrc'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Load general completion.</span>
autoload -Uz compinit
<span class="org-comment-delimiter"># </span><span class="org-comment">compinit                                # Security check (insecure directories)!</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Display a list of completions when you give an ambiguous choice (like Bash).</span>
setopt autolist
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcdb710a" class="outline-3">
<h3 id="orgcdb710a">Prompt</h3>
<div class="outline-text-3" id="text-orgcdb710a">
<p>
Zsh expects that every character in <code>PS1</code> will advance the cursor one space.  Wrap
any non-printing escape sequences in <code>%{...%}</code>, and it should work. So use
<code>%{\e[31m%}</code>, etc.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Some colors.</span>
<span class="org-variable-name">BLK</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 0; tput bold)
<span class="org-variable-name">RED</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 1; tput bold)
<span class="org-variable-name">grn</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 2)
<span class="org-variable-name">GRN</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 2; tput bold)
<span class="org-variable-name">yel</span>=$(<span class="org-sh-quoted-exec">tput</span> setaf 3)
<span class="org-variable-name">reset_color</span>=$(<span class="org-sh-quoted-exec">tput</span> sgr0)
</pre>
</div>

<div class="inlinetask">
<b><span class="todo TODO">TODO</span> Define colors using <code>terminfo</code></b><br />
<p>
See <a href="http://superuser.com/questions/239290/how-can-i-make-zsh-show-that-there-are-stashed-revisions-on-a-git-repo-whenever">http://superuser.com/questions/239290/how-can-i-make-zsh-show-that-there-are-stashed-revisions-on-a-git-repo-whenever</a>
</p>
</div>

<p>
For the prompt, the tricky part was getting the syntax for testing the exit
code.  The syntax is <code>%(x.true-string.false-string)</code>, where <code>x</code> is some arbitrary
testing condition, in this case, <code>?</code> for exit codes.  After the first dot, if the
test passes, show <code>true-string</code>; if it fails, show <code>false-string</code> after the second
dot.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Custom prompt settings.</span>
<span class="org-variable-name">PROMPT</span>=<span class="org-string">"$grn%n@%m$BLK:$yel%2. %(?.$GRN.$RED)%?$reset_color%(!.#.$) "</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">? - Exit code of the previous command.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">n - User name.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">m - Machine name.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">. - Abbreviated pwd.</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">! - su?</span>
</pre>
</div>

<p>
Insert beep when last command has failed.
</p>

<div class="tip">
<p>
For portability and readability, we use the <code>tput</code> command.
</p>

<p>
But since it&rsquo;s an external command, we run it once to get the bel sequence, and
then stick that sequence in the relevant part of our prompt &#x2013; for performance,
to avoid an unnecessary shellout at each prompt evaluation.
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">BEL</span>=$(<span class="org-sh-quoted-exec">tput</span> bel)
<span class="org-variable-name">PROMPT</span>+=<span class="org-string">'%(?::$BEL)'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Does not work on Bash on Ubuntu on Windows.</span>
</pre>
</div>

<p>
Don&rsquo;t confuse TRAMP:
</p>

<div class="org-src-container">
<pre class="src src-shell">[[ <span class="org-string">"$TERM"</span> = <span class="org-string">"dumb"</span> ]] &amp;&amp; <span class="org-variable-name">PROMPT</span>=<span class="org-string">"&gt; "</span>
</pre>
</div>

<div class="warning">
<p>
When you invoke the <b>shell from Emacs</b>, it is a <b>non-interactive</b> session, which
might get different settings.
</p>

</div>
</div>

<div id="outline-container-orge3c88fe" class="outline-4">
<h4 id="orge3c88fe">Right prompt</h4>
<div class="outline-text-4" id="text-orge3c88fe">
<p>
Don&rsquo;t confuse TRAMP:
</p>

<div class="org-src-container">
<pre class="src src-shell">[[ <span class="org-string">"$TERM"</span> = <span class="org-string">"dumb"</span> ]] &amp;&amp; <span class="org-variable-name">RPROMPT</span>=<span class="org-string">""</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdb93d3a" class="outline-3">
<h3 id="orgdb93d3a">Aliasing</h3>
<div class="outline-text-3" id="text-orgdb93d3a">
<p>
Some global aliases (expand whatever their position).
</p>
</div>

<div id="outline-container-org6b186a0" class="outline-4">
<h4 id="org6b186a0">Common aliases</h4>
<div class="outline-text-4" id="text-org6b186a0">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Command line head / tail shortcuts</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">H</span>=<span class="org-string">'| head'</span> <span class="org-comment-delimiter">###</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T</span>=<span class="org-string">'| tail'</span> <span class="org-comment-delimiter">###</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">G</span>=<span class="org-string">'| grep -E'</span> <span class="org-comment-delimiter">######</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">L</span>=<span class="org-string">"| less"</span> <span class="org-comment-delimiter">#######</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">M</span>=<span class="org-string">"| less"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">CA</span>=<span class="org-string">"| cat -A"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">21</span>=<span class="org-string">"2&gt;&amp;1"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">NUL</span>=<span class="org-string">'&gt; /dev/null 2&gt;&amp;1'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> -g <span class="org-variable-name">W</span>=<span class="org-string">'| wc -l'</span> <span class="org-comment-delimiter">####</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">C</span>=<span class="org-string">'| wc -l'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">S</span>=<span class="org-string">'| sort'</span> <span class="org-comment-delimiter">###</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">F</span>=<span class="org-string">' | fmt -'</span> <span class="org-comment-delimiter">##</span>

<span class="org-builtin">alias</span> -g <span class="org-variable-name">A</span>=<span class="org-string">'| awk'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A1</span>=<span class="org-string">"| awk '{print \$1}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A2</span>=<span class="org-string">"| awk '{print \$2}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A3</span>=<span class="org-string">"| awk '{print \$3}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A4</span>=<span class="org-string">"| awk '{print \$4}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A5</span>=<span class="org-string">"| awk '{print \$5}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A6</span>=<span class="org-string">"| awk '{print \$6}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A7</span>=<span class="org-string">"| awk '{print \$7}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A8</span>=<span class="org-string">"| awk '{print \$8}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">A9</span>=<span class="org-string">"| awk '{print \$9}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">1</span>=<span class="org-string">"| awk -F, '{print \$1}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">2</span>=<span class="org-string">"| awk -F, '{print \$2}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">3</span>=<span class="org-string">"| awk -F, '{print \$3}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">4</span>=<span class="org-string">"| awk -F, '{print \$4}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">5</span>=<span class="org-string">"| awk -F, '{print \$5}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">6</span>=<span class="org-string">"| awk -F, '{print \$6}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">7</span>=<span class="org-string">"| awk -F, '{print \$7}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">8</span>=<span class="org-string">"| awk -F, '{print \$8}'"</span>
<span class="org-builtin">alias</span> -g ,<span class="org-variable-name">9</span>=<span class="org-string">"| awk -F, '{print \$9}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">1</span>=<span class="org-string">"| awk -F: '{print \$1}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">2</span>=<span class="org-string">"| awk -F: '{print \$2}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">3</span>=<span class="org-string">"| awk -F: '{print \$3}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">4</span>=<span class="org-string">"| awk -F: '{print \$4}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">5</span>=<span class="org-string">"| awk -F: '{print \$5}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">6</span>=<span class="org-string">"| awk -F: '{print \$6}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">7</span>=<span class="org-string">"| awk -F: '{print \$7}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">8</span>=<span class="org-string">"| awk -F: '{print \$8}'"</span>
<span class="org-builtin">alias</span> -g :<span class="org-variable-name">9</span>=<span class="org-string">"| awk -F: '{print \$9}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T1</span>=<span class="org-string">"| awk -F $'\t' '{print \$1}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T2</span>=<span class="org-string">"| awk -F $'\t' '{print \$2}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T3</span>=<span class="org-string">"| awk -F $'\t' '{print \$3}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T4</span>=<span class="org-string">"| awk -F $'\t' '{print \$4}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T5</span>=<span class="org-string">"| awk -F $'\t' '{print \$5}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T6</span>=<span class="org-string">"| awk -F $'\t' '{print \$6}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T7</span>=<span class="org-string">"| awk -F $'\t' '{print \$7}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T8</span>=<span class="org-string">"| awk -F $'\t' '{print \$8}'"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">T9</span>=<span class="org-string">"| awk -F $'\t' '{print \$9}'"</span>

<span class="org-builtin">alias</span> -g <span class="org-variable-name">ND</span>=<span class="org-string">'$(</span><span class="org-sh-quoted-exec">ls</span><span class="org-string"> -d *(/om[1]))'</span>        <span class="org-comment-delimiter"># </span><span class="org-comment">Newest directory.</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">NF</span>=<span class="org-string">'$(</span><span class="org-sh-quoted-exec">ls</span><span class="org-string"> *(.om[1]))'</span>           <span class="org-comment-delimiter"># </span><span class="org-comment">Newest file.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> -- <span class="org-variable-name">cdwd</span>=<span class="org-string">'cd $(</span><span class="org-sh-quoted-exec">pwd</span><span class="org-string">)'</span>
<span class="org-builtin">alias</span> -- <span class="org-variable-name">cwd</span>=<span class="org-string">'echo $cwd'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2ce17d" class="outline-4">
<h4 id="orgb2ce17d">Git</h4>
<div class="outline-text-4" id="text-orgb2ce17d">
<p>
Git last week / month / year:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> -g <span class="org-variable-name">GLWEEK</span>=<span class="org-string">' --since=1.week.ago'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">GLMONTH</span>=<span class="org-string">' --since=1.month.ago'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">GLYEAR</span>=<span class="org-string">' --since=1.year.ago'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f055fc" class="outline-4">
<h4 id="org8f055fc">Directories</h4>
<div class="outline-text-4" id="text-org8f055fc">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">When entering a directory, list the contents.</span>
<span class="org-builtin">cd</span>() {
    <span class="org-builtin">builtin</span> cd <span class="org-string">"$@"</span> &amp;&amp; ls
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8e0fe17" class="outline-3">
<h3 id="org8e0fe17">Ledger</h3>
<div class="outline-text-3" id="text-org8e0fe17">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">LEDGER</span>=ledger
<span class="org-builtin">export</span> <span class="org-variable-name">LEDGER_FILE</span>=/Users/fni/Personal/Business/Accounting/LEDGER.dat

<span class="org-comment-delimiter"># </span><span class="org-comment">hledger print [REGEXP]... - Show entries in Ledger format.</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">! `hledger' is better than `ledger' in the sense that it does output</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">! 2 decimals whatever the figure, and that it does not output trailing</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">! spaces. There is no other difference (not even in indentation).</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Other problem with ledger: reports onto 81 columns when using other DATEFMT...</span>

<span class="org-builtin">alias</span> -g <span class="org-variable-name">LG</span>=<span class="org-string">"\$LEDGER -f \$LEDGER_FILE"</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DATEFMT</span>=<span class="org-string">'-y %Y/%m/%d'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">for output</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DAILY</span>=<span class="org-string">'--period "daily"'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">DLM</span>=<span class="org-string">'--display "d&gt;=[last month]"'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">display of last month</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">CLM</span>=<span class="org-string">'-p "last month"'</span>  <span class="org-comment-delimiter"># </span><span class="org-comment">computed total of last month</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">D1</span>=<span class="org-string">'--display "l&lt;=1" --depth 1'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">D2</span>=<span class="org-string">'--display "l&lt;=2" --depth 2'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">BALANCE_SHEET</span>=<span class="org-string">'^Assets ^Liabilities'</span>
<span class="org-builtin">alias</span> -g <span class="org-variable-name">PROFIT_LOSS</span>=<span class="org-string">'^Expenses ^Income'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">lastmonth</span>=<span class="org-string">'LG reg TLM'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Ledger -f FILE [OPTIONS] [COMMAND [PATTERNS]]</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Ledger using `ledger', `hledger' or `beancount' (see `$LEDGER')</span>
<span class="org-function-name">Ledger</span>() {
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">#</span> -lt 1 ]]; <span class="org-keyword">then</span>
        cat &lt;&lt; EOF &gt; /dev/stderr
<span class="org-sh-heredoc">Usage: $(</span><span class="org-sh-quoted-exec">basename</span><span class="org-sh-heredoc"> "$0") -f FILE [OPTIONS] [COMMAND [PATTERNS]]</span>
<span class="org-sh-heredoc">    or $(</span><span class="org-sh-quoted-exec">basename</span><span class="org-sh-heredoc"> "$0") FILE   (if LEDGER=beancount)</span>
<span class="org-sh-heredoc">EOF</span>
    <span class="org-keyword">fi</span>

    <span class="org-keyword">case</span> <span class="org-string">"$LEDGER"</span><span class="org-keyword"> in</span>
        <span class="org-string">"beancount"</span> )
            ;;
        * )                            <span class="org-comment-delimiter"># </span><span class="org-comment">Default option.</span>
            <span class="org-builtin">shift</span>                       <span class="org-comment-delimiter"># </span><span class="org-comment">For the useless (but expected) `-f'.</span>
            ;;
    <span class="org-keyword">esac</span>
    <span class="org-builtin">local</span> <span class="org-variable-name">LEDGER_M4_FILE</span>=$<span class="org-variable-name">1</span>; <span class="org-builtin">shift</span>

    <span class="org-builtin">local</span> <span class="org-variable-name">LEDGER_FILE</span>=sample-ledger.dat
    <span class="org-keyword">case</span> <span class="org-string">"$LEDGER"</span><span class="org-keyword"> in</span>
        <span class="org-string">"beancount"</span> )
            m4 -D <span class="org-variable-name">LEDGER</span>=beancount <span class="org-string">"$LEDGER_M4_FILE"</span> <span class="org-sh-escaped-newline">\</span>
                | sed -e <span class="org-string">'s/\(.*\)(\(.*\)) \(.*\)/\1\3 | \2/g'</span> &gt; <span class="org-string">"$LEDGER_FILE"</span>
            bean-web <span class="org-string">"$LEDGER_FILE"</span> $<span class="org-variable-name">@</span>   <span class="org-comment-delimiter"># </span><span class="org-comment">beancount Web interface</span>
            ;;
        * )   <span class="org-comment-delimiter"># </span><span class="org-comment">default option</span>
            m4 <span class="org-string">"$LEDGER_M4_FILE"</span> <span class="org-sh-escaped-newline">\</span>
               | sed -e <span class="org-string">'s/^@/;@/'</span> &gt; <span class="org-string">"$LEDGER_FILE"</span>
            <span class="org-string">"$LEDGER"</span> -f <span class="org-string">"$LEDGER_FILE"</span> $<span class="org-variable-name">@</span>
            ;;
    <span class="org-keyword">esac</span>
    rm <span class="org-string">"$LEDGER_FILE"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">cat file.ledger | sed -e 's/@check/;@check/' | xargs bean-web</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Use wrapper scripts around gpg with armor on (The --armor option means ascii</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">versus binary). You'll have to enter a password every time you want to run</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ledger.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc48ecb" class="outline-3">
<h3 id="orgfc48ecb">20. Completion System</h3>
<div class="outline-text-3" id="text-orgfc48ecb">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Case-insensitive completion.</span>
zstyle <span class="org-string">':completion:*'</span> matcher-list <span class="org-string">'m:{a-zA-Z}={A-Za-z}'</span>
</pre>
</div>

<p>
Launch Windows applications from CLI (with <code>start</code> script &#x2013; see
<a href="https://github.com/babun/babun/issues/299#issuecomment-123925935">https://github.com/babun/babun/issues/299#issuecomment-123925935</a>):
</p>

<div class="org-src-container">
<pre class="src src-shell">compdef <span class="org-string">'_files -g "*"'</span> start
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a14738" class="outline-3">
<h3 id="org3a14738">Zsh Modules</h3>
<div class="outline-text-3" id="text-org3a14738">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Coloring stderr.</span>
<span class="org-variable-name">STDERRRED</span>=$<span class="org-string">'\e[1;31m'</span>
zmodload zsh/system
<span class="org-function-name">color_err</span>() {
    <span class="org-comment-delimiter"># </span><span class="org-comment">Sysread &amp; syswrite are part of `zsh/system'.</span>
    emulate -LR zsh
    <span class="org-keyword">while</span> sysread; <span class="org-keyword">do</span>
        syswrite -o 2 <span class="org-string">"$STDERRRED$REPLY$terminfo[sgr0]"</span>
    <span class="org-keyword">done</span>
}

<span class="org-keyword">exec</span> 2&gt; &gt;( color_err )
</pre>
</div>
</div>
</div>

<div id="outline-container-org83edb91" class="outline-3">
<h3 id="org83edb91">Source common file</h3>
<div class="outline-text-3" id="text-org83edb91">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Source common settings.</span>
<span class="org-builtin">.</span> <span class="org-string">"$HOME"</span>/.shellrc                      <span class="org-comment-delimiter"># </span><span class="org-comment">Error displayed if not found.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Enable overriding.</span>
<span class="org-keyword">if</span> [[ -f <span class="org-string">"$HOME"</span>/.zshrc_local ]]; <span class="org-keyword">then</span>
    <span class="org-builtin">.</span> <span class="org-string">"$HOME"</span>/.zshrc_local
<span class="org-keyword">fi</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* Local Variables</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">mode: outline-minor</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">.zshrc ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga6f559b" class="outline-2">
<h2 id="orga6f559b">Configuration related to both shells</h2>
<div class="outline-text-2" id="text-orga6f559b">
<p>
Everything in common between Bash and Z shell will come here, since it is read
by both shells.
</p>
</div>

<div id="outline-container-org1359469" class="outline-3">
<h3 id="org1359469">Preamble</h3>
<div class="outline-text-3" id="text-org1359469">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Hey Emacs, this is a -*- sh -*- file</span>
<span class="org-comment-delimiter">## </span><span class="org-comment">.shellrc --- Common features between Bash and Z Shell</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2009-2019 Fabrice Niessen</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Keywords: bash, zsh, dotfile, config</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org12e065f" class="outline-3">
<h3 id="org12e065f">Paths</h3>
<div class="outline-text-3" id="text-org12e065f">
</div>
<div id="outline-container-org434a03e" class="outline-4">
<h4 id="org434a03e">Search path</h4>
<div class="outline-text-4" id="text-org434a03e">
<p>
Specify the directories that the shell is to look through to find a command.
These directories are searched in the order in which they appear.
</p>

<p>
The global search <code>PATH</code> is defined in the file <code>/etc/environment</code>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* PATH</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Extend the PATH var (where to look for executable files).</span>
<span class="org-keyword">for</span> MAYBE_PATH<span class="org-keyword"> in</span> <span class="org-string">"$HOME"</span>/.dotfiles/bin <span class="org-sh-escaped-newline">\</span>
                  <span class="org-string">"$HOME"</span>/.dotfiles/expect; <span class="org-keyword">do</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">`-e' or `-x'?</span>
    <span class="org-keyword">if</span> [[ -d <span class="org-string">"$MAYBE_PATH"</span> ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">PATH</span>=<span class="org-string">"$MAYBE_PATH"</span>:<span class="org-string">"$PATH"</span>
    <span class="org-keyword">fi</span>
<span class="org-keyword">done</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Extend the PATH var (where to look for executable files).  For Cygwin only.</span>
<span class="org-keyword">case</span> $(<span class="org-sh-quoted-exec">uname</span> -s) <span class="org-keyword">in</span>
    CYGWIN*)
        <span class="org-keyword">for</span> MAYBE_CYG_PATH<span class="org-keyword"> in</span> <span class="org-string">"$HOME"</span>/.dotfiles/winbin; <span class="org-keyword">do</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">`-e' or `-x'?</span>
            <span class="org-keyword">if</span> [[ -d <span class="org-string">"$MAYBE_CYG_PATH"</span> ]]; <span class="org-keyword">then</span>
                <span class="org-variable-name">PATH</span>=<span class="org-string">"$MAYBE_CYG_PATH"</span>:<span class="org-string">"$PATH"</span>
            <span class="org-keyword">fi</span>
        <span class="org-keyword">done</span>
        ;;
<span class="org-keyword">esac</span>
</pre>
</div>

<div class="note">
<p>
<code>PATH</code> should already be marked as exported, so reexporting is not needed.
</p>

<p>
Run <code>export</code> to see a list of exported variables (names marked to be passed to
child processes in the environment).
</p>

<p>
Since <code>env</code> is an independent executable (<code>/usr/bin/env</code>), it only sees the
variables that the shell passes to it, or <b><i>exported</i> environment variables</b>
(which are passed on to every executed program).
</p>

<p>
<code>set</code> on the other hand is a <i>built-in</i> shell command, it also <b>sees local shell
variables</b> (which are only accessible from the current shell) &#x2013; including shell
functions.
</p>

</div>

<p>
By default, the <code>root</code> shell does not load commands from the current location.  If
you&rsquo;re <code>root</code> and if you trust those commands, type <code>./whatever-command</code> instead.
</p>

<p>
If you add the <code>CWD</code> (<code>.</code>) to your PATH, just do it:
</p>

<ul class="org-ul">
<li>for <b>non-root users</b>,</li>
<li>as the <b>last entry</b> (so, the current directory is only checked as a last
resort).</li>
</ul>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Add the current directory as last component in the search path (not to include</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">for `root', for security reasons).</span>
<span class="org-keyword">if</span> [[ $<span class="org-variable-name">EUID</span> -ne 0 ]]; <span class="org-keyword">then</span>
    <span class="org-variable-name">PATH</span>=<span class="org-string">"$PATH"</span>:.
<span class="org-keyword">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb73b5b0" class="outline-4">
<h4 id="orgb73b5b0">Cdpath</h4>
<div class="outline-text-4" id="text-orgb73b5b0">
<p>
Much like the <code>PATH</code> environment variable defines a search order for the
executable you want, <code>CDPATH</code> provides a selection of directories which will be
checked for the folder you are trying to <code>cd</code> into.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Search current directory and home directory.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">CDPATH</span>=.:<span class="org-string">"$HOME"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6529e2" class="outline-4">
<h4 id="orgd6529e2">Manpath</h4>
<div class="outline-text-4" id="text-orgd6529e2">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* MANPATH</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">set MANPATH so it includes user's private man if it exists</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">do the same with MANPATH</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">if [[ -d "$HOME"/man ]]; then</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">export MANPATH="$HOME/man":"$MANPATH"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">fi</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">colon separated list of directories to search for manual pages</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">ifnset MANPATH "/usr/man"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">TODO don't define it like that: does not work under Ubuntu!</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">See `/etc/manpath.config'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c2497f" class="outline-4">
<h4 id="org7c2497f">Infopath</h4>
<div class="outline-text-4" id="text-org7c2497f">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">* INFOPATH</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Info readers (standalone + Emacs Info mode)</span>
<span class="org-variable-name">INFOPATH</span>=/usr/share/info:<span class="org-string">"$INFOPATH"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">include a trailing colon on `INFOPATH' to concatenate the Emacs</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">`Info-default-directory-list' when searching for info files</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">INFOPATH="$HOME"/texlive/2014/texmf/doc/info:"$INFOPATH"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb7aa1f9" class="outline-3">
<h3 id="orgb7aa1f9">Pager</h3>
<div class="outline-text-3" id="text-orgb7aa1f9">
<p>
Set the user&rsquo;s preferred <b>text viewer</b> (<code>cat</code>, <code>more</code> or <code>less</code>) that will be used by
programs such as <code>man</code> or <code>git diff</code>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">PAGER</span>=<span class="org-string">"less"</span>
</pre>
</div>

<p>
With the <code>less</code> command, you can <b>scroll up</b> in the file as well as down; with the
archaic <code>more</code> command, you can only <b>scroll down</b> the file.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">more</span>=<span class="org-string">'less'</span>
</pre>
</div>
</div>

<div id="outline-container-orgd6df4b3" class="outline-4">
<h4 id="orgd6df4b3">Less</h4>
<div class="outline-text-4" id="text-orgd6df4b3">
<p>
Color any command with man-like output, including <code>git help</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_mb</span>=$<span class="org-string">'\e[1;31m'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_md</span>=$<span class="org-string">'\e[1;31m'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_me</span>=$<span class="org-string">'\e[0m'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_se</span>=$<span class="org-string">'\e[0m'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_so</span>=$<span class="org-string">'\e[1;44;33m'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_ue</span>=$<span class="org-string">'\e[0m'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS_TERMCAP_us</span>=$<span class="org-string">'\e[1;32m'</span>
</pre>
</div>

<p>
<code>less</code> options:
</p>

<dl class="org-dl">
<dt><code>-e</code> or <code>--quit-at-eof</code></dt><dd>Causes <code>less</code> to automatically exit the second time it reaches end-of-file.
By default, the only way to exit <code>less</code> is via the <code>q</code> command.</dd>

<dt><code>-F</code></dt><dd><p>
Causes <code>less</code> to automatically <b>exit if the entire file can be displayed on
the first screen</b>.
</p>

<div class="warning">
<p>
After quitting so, the screen is reset and you end up not seeing the
content; the <code>-X</code> option does away with that behavior.
</p>

</div></dd>

<dt><code>-i</code> or <code>--ignore-case</code></dt><dd>Causes <b>searches</b> to <b>ignore case</b>; that is, uppercase and lowercase are
considered identical.  This option is ignored if any uppercase letters
appear in the search pattern; in other words, if a pattern contains
uppercase letters, then that search does not ignore case.</dd>

<dt><code>-m</code> or <code>--long-prompt</code></dt><dd>Causes less to prompt verbosely (like <code>more</code>), with the percent into the
file.  By default, <code>less</code> prompts with a colon.</dd>

<dt><code>-M</code> or <code>--LONG-PROMPT</code></dt><dd>Causes <code>less</code> to prompt even more verbosely than <code>more</code>.</dd>

<dt><code>-r</code> or <code>--raw-control-chars</code></dt><dd><p>
Causes &ldquo;raw&rdquo; control characters to be displayed.  The default is to display
control characters using the caret notation; for example, a <code>control-A</code>
(octal <code>001</code>) is displayed as <code>^A</code>.
</p>

<div class="warning">
<p>
When the <code>-r</code> option is used, <code>less</code> cannot keep track of the actual appearance
of the screen (since this depends on how the screen responds to each type
of control character).  Thus, various display problems may result, such as
long lines being split in the wrong place.
</p>

</div></dd>

<dt><code>-R</code> or <code>--RAW-CONTROL-CHARS</code></dt><dd><p>
(Only) ANSI <b>&ldquo;color&rdquo; escape sequences</b> (sequences of the form <code>ESC[...m</code> where
the <code>...</code> is zero or more color specification characters, and <code>m</code> ends ANSI
color escape sequences) are <b>output in &ldquo;raw&rdquo; form</b>.
</p>

<div class="note">
<p>
Without <code>--RAW-CONTROL-CHARS</code> (or <code>--raw-control-chars</code>), <code>less</code> outputs the
colors as raw escape codes; that is, it does not <b>interpret colors</b>. With
that option, <code>git diff</code> finally shows colors&#x2026;
</p>

</div></dd>

<dt><code>-X</code> or <code>--no-init</code></dt><dd><p>
<b>Disables</b> sending the termcap initialization and deinitialization strings to
the terminal.  This is sometimes desirable if the deinitialization string
does something unnecessary, like <b>clearing the screen</b>.
</p>

<div class="note">
<p>
If you want that <code>less</code> does not <b>clear the terminal</b> when quitting, use the <code>-X</code>
option.
</p>

</div></dd>
</dl>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Tailor `less'.</span>
<span class="org-variable-name">LESS</span>=<span class="org-string">"-F -i -M -R -X"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">export LESS="-P ?c&lt;- .?f%f:Standard input.  ?n:?eEND:?p%pj\%.. .?c%ccol . ?mFile %i of %m  .?xNext\ %x.%t   Press h for help"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LESS</span>=<span class="org-string">'--quit-if-one-screen --ignore-case --status-column --LONG-PROMPT --RAW-CONTROL-CHARS --HILITE-UNREAD --tabs=4 --no-init --window=-4'</span>
</pre>
</div>

<p>
&#x2013;quit-if-one-screen or -F: Exit if the entire file can be displayed in one screen. This is usually desirable as there is no incentive to stay in less if a single screen can display all the contents.
&#x2013;ignore-case or -i: Cause search in less to ignore case unless an uppercase letter is present in the search pattern.
&#x2013;status-column or -J: Display a status column on the left to indicate lines that match current search or indicate the first unread line after moving a full page.
&#x2013;LONG-PROMPT or -M: Prompt more verbosely.
&#x2013;RAW-CONTROL-CHARS or -R: Cause ANSI &ldquo;color&rdquo; escape sequences to be displayed in their raw form. This is for the color display explained later in the next section.
&#x2013;HILITE-UNREAD or -W: Highlight the first unread line after scrolling the screen for more than one lines.
&#x2013;tabs=4 or -x4: Display a tab as 4-character width, since most modern text files assume 4-character width for a tab. However, you can still change this to your preference if, for example, you frequently read Linux kernel source code which uses 8-character width for a tab.
&#x2013;no-init or -X: Disable sending the termcap initialization and deinitialization strings to the terminal. The purpose here is to prevent clearing screen after exiting. If you do not want this feature and want to remove it, please keep in mind that &#x2013;quit-if-one-screen also relies on this option to work properly. For a workaround, please check out here.
&#x2013;window=-4 or -z-4: Change the default scrolling size to 4 lines fewer than the current screen size, so always keep 4 lines overlapping with previous screen when scrolling with the space key.
</p>
</div>

<ul class="org-ul">
<li><a id="org6f53dae"></a>Searching<br />
<div class="outline-text-5" id="text-org6f53dae">
<dl class="org-dl">
<dt><code>/pattern</code></dt><dd>Search forward for (<code>N</code>-th) matching line.</dd>

<dt><code>?pattern</code></dt><dd>Search backward for (<code>N</code>-th) matching line.</dd>

<dt><code>n</code></dt><dd>Repeat previous search (for <code>N</code>-th occurrence).</dd>

<dt><code>N</code></dt><dd>Repeat previous search in reverse direction.</dd>

<dt><code>ESC-u</code></dt><dd>Undo (toggle) search highlighting.</dd>

<dt><code>&amp;pattern</code></dt><dd>Display only matching lines. <br />
If pattern is empty (if you type &amp; immediately followed by ENTER), any
filtering is turned off, and all lines are displayed.</dd>
</dl>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-orga211aaf" class="outline-3">
<h3 id="orga211aaf">Display</h3>
<div class="outline-text-3" id="text-orga211aaf">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Start x11 server (if a process instance is not already running).</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ps -ae | grep XWin || startxwin &gt; /dev/null 2&gt;&amp;1 &amp;   # XXX For Cygwin only!</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">To check that have the package xinit installed, try 'startxwin' without redirecting anything.</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Set DISPLAY environment variable.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">DISPLAY</span>=:0.0
</pre>
</div>
</div>
</div>

<div id="outline-container-org0e72e2b" class="outline-3">
<h3 id="org0e72e2b">Alert</h3>
<div class="outline-text-3" id="text-org0e72e2b">
<p>
Add an &ldquo;alert&rdquo; alias for <b>long running commands</b>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-keyword">function</span> <span class="org-function-name">alert</span> {
    $<span class="org-variable-name">@</span>
    <span class="org-builtin">echo</span> -e <span class="org-string">"\a"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">alert</span>=<span class="org-string">'notify-send --urgency=low -i "$([[ $? = 0 ]] &amp;&amp; echo terminal || echo error)" "$(</span><span class="org-sh-quoted-exec">history</span><span class="org-string"> | tail -n1 | sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'\'')"'</span>
</pre>
</div>

<p>
Use like so:
</p>

<pre class="example">
sleep 10; alert
</pre>
</div>
</div>

<div id="outline-container-orgf6bb1a2" class="outline-3">
<h3 id="orgf6bb1a2">Misc</h3>
<div class="outline-text-3" id="text-orgf6bb1a2">
<p>
You may need to manually set your language environment (among others, for <code>svn</code>
with accented file names in the repository).
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">LANG</span>=C.UTF-8

<span class="org-comment-delimiter"># </span><span class="org-comment">For scripts in R language.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LC_CTYPE</span>=
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b91cd3" class="outline-3">
<h3 id="org3b91cd3">Terminal types</h3>
<div class="outline-text-3" id="text-org3b91cd3">
<ul class="org-ul">
<li><code>dumb</code></li>
<li><code>cygwin</code></li>
<li><code>emacs</code></li>
<li><code>screen</code></li>
<li><code>xterm</code></li>
<li><code>xterm-256color</code></li>
<li><code>eterm-color</code></li>
</ul>

<p>
Set the <b>terminal type</b> explicitly to get a nice <b>256 color</b> palette (instead of the
ugly default 8 colors):
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">TERM</span>=xterm-256color
</pre>
</div>

<div class="tip">
<p>
In fact, we are advised to <b>NOT</b> set <code>TERM</code> variable in dotfiles that are related to
the <b>shell</b>, as opposed to dotfiles related to the <b>terminal emulator</b> program.
This is because a shell may be used with multiple terminal emulators, and
setting <code>TERM</code> there is obviously a misplacement mistake, an all too common one&#x2026;
The proper place to override the <code>TERM</code> value is in a terminal emulator dotfile,
something like <code>~/.minttyrc</code>.
</p>

</div>

<p>
Initialize the terminal according to the type of terminal in the environmental
variable <code>TERM</code>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">tput init                             # This resets the Solarized color theme!!!</span>
</pre>
</div>

<div class="note">
<p>
This command should be included in everyone&rsquo;s <code>.profile</code> after the environmental
variable <code>TERM</code> has been exported.
</p>

</div>

<div class="seealso">
<p>
Use the script <code>colortest</code> (on Linux distros) to output the default colors.
</p>

</div>

<p>
See what your color palet is for the terminal session:
</p>

<div class="org-src-container">
<pre class="src src-shell">tput colors
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf65928e" class="outline-3">
<h3 id="orgf65928e">Emacs (default editor)</h3>
<div class="outline-text-3" id="text-orgf65928e">
<p>
Be sure one of these <b>editors</b> is <b>in your search path</b>!
</p>

<div class="warning">
<p>
Right now, I have instead hard-coded the path to Emacs in the
<a href="file:///cygdrive/d/Users/fni/.dotfiles/local/bin/emacsclient">file:///cygdrive/d/Users/fni/.dotfiles/local/bin/emacsclient</a> script.
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Find a suitable editor.</span>
<span class="org-keyword">for</span> editor<span class="org-keyword"> in</span> emacsclientw emacsclient emacs; <span class="org-keyword">do</span>
    <span class="org-keyword">if </span><span class="org-builtin">command</span> -v <span class="org-string">"$editor"</span> &gt; /dev/null 2&gt;&amp;1; <span class="org-keyword">then</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Set EDITOR.</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">editor</span><span class="org-keyword"> in</span>
            emacsclient*)
                <span class="org-comment-delimiter"># </span><span class="org-comment"># doesn't bother waiting for a response</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">export EDITOR="$editor --no-wait"</span>

                <span class="org-comment-delimiter"># </span><span class="org-comment">From the man page for emacsclient(1):</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">If the Emacs server is not running, run `emacs --daemon' to</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">start Emacs in daemon mode, and try to connect to it.</span>
                <span class="org-builtin">export</span> <span class="org-variable-name">EDITOR</span>=<span class="org-string">"$editor --alternate-editor=''"</span>
                ;;
            *)
                <span class="org-builtin">export</span> <span class="org-variable-name">EDITOR</span>=<span class="org-string">"$editor"</span>
                ;;
        <span class="org-keyword">esac</span>

        <span class="org-builtin">alias</span> <span class="org-variable-name">e</span>=<span class="org-string">'$EDITOR'</span>
        <span class="org-keyword">break</span>
    <span class="org-keyword">fi</span>
<span class="org-keyword">done</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">e</span>=<span class="org-string">"emacsclient --alternate-editor=emacs --no-wait"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">--no-wait is an essential part.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">e</span>=<span class="org-string">"emacsclient --tty --alternate-editor=''"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">ek</span>=<span class="org-string">"emacsclient -e '(kill-emacs)'"</span>
</pre>
</div>

<div class="note">
<p>
Shouldn&rsquo;t we alias <code>EDITOR</code> to <code>emacs --tty</code>?
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Use `$EDITOR' for programs wanting an editor.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">VISUAL</span>=<span class="org-string">"$EDITOR"</span>                 <span class="org-comment-delimiter"># </span><span class="org-comment">For `crontab'.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">CVSEDITOR</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">SVN_EDITOR</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">EDIT</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">ERROR_EDITOR</span>=<span class="org-string">"$EDITOR"</span>
<span class="org-builtin">export</span> <span class="org-variable-name">FCEDIT</span>=<span class="org-string">"$EDITOR"</span>                 <span class="org-comment-delimiter"># </span><span class="org-comment">For the `fc' (fix command) builtin</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">command.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">em</span>=emacs-minimal
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">ec FILE - open FILE in a running Emacs</span>
<span class="org-function-name">ec</span>() {
    emacsclient --no-wait <span class="org-string">"$1"</span>
}
</pre>
</div>

<p>
I connect to the server with either a terminal or a GUI client like this:
</p>

<pre class="example">
alias et=emacsclient --tty              # New GUI frame.
alias ec=emacsclient --create-frame     # New terminal frame.
</pre>

<p>
A good way to start emacsclient is with this line:
</p>

<pre class="example">
alias e="emacsclient --no-wait --alternate-editor=\"\" --create-frame"
</pre>

<p>
You may also set the environment variables <code>EDITOR</code> and/or <code>VISUAL</code>, but then you
better omit the &ldquo;<code>--no-wait</code>&rdquo; option.
</p>
</div>
</div>

<div id="outline-container-org742a7e4" class="outline-3">
<h3 id="org742a7e4">Plugins</h3>
<div class="outline-text-3" id="text-org742a7e4">
<p>
Aliases are abbreviations or alternative names (usually mnemonics) for commands.
They are commonly used to specify a few options to commands, and then include
the rest of the command line.
</p>

<p>
Aliases should usually be kept simple. If not, they should be converted to:
</p>
<ul class="org-ul">
<li>shell functions, or</li>
<li>shell scripts.</li>
</ul>

<p>
An alias cannot have an argument like <code>$1</code>.
</p>

<div class="note">
<p>
Single quotes are evaluated dynamically:
</p>
<pre class="example">
alias QS='echo $PWD'
</pre>


<p>
Double quotes are evaluated at time of creation and, thereafter, never changes:
</p>
<pre class="example">
alias QD="echo $PWD"
</pre>

</div>
</div>

<div id="outline-container-orgee2ff0d" class="outline-4">
<h4 id="orgee2ff0d">Common aliases</h4>
<div class="outline-text-4" id="text-orgee2ff0d">
<p>
<code>ls</code> options:
</p>

<dl class="org-dl">
<dt><code>-a</code></dt><dd>Do not ignore entries starting with <code>.</code>.</dd>

<dt><code>-C</code></dt><dd>List entries by <b>columns</b>.</dd>

<dt><code>-F</code></dt><dd>Append indicator (one of <code>*/=&gt;@|</code>) to entries.</dd>

<dt><code>-g</code></dt><dd>Like <code>-l</code>, but do not list owner.</dd>

<dt><code>--group-directories-first</code></dt><dd>Group directories before files.</dd>

<dt><code>-G</code></dt><dd>In a long listing, don&rsquo;t print <b>group</b> names.</dd>

<dt><code>-h</code></dt><dd>With <code>-l</code> and/or <code>-s</code>, print <b>human readable</b> sizes (e.g., <code>1K</code> <code>234M</code> <code>2G</code>).</dd>

<dt><code>-l</code></dt><dd>Use a <b>long</b> listing format.</dd>

<dt><code>-s</code></dt><dd>Print the allocated <b>size</b> of each file, in blocks.</dd>
</dl>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">LS_OPTIONS</span>=<span class="org-string">"$LS_OPTIONS --show-control-chars"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Make `ls' produce ISO 8601 format.</span>
<span class="org-builtin">export</span> <span class="org-variable-name">TIME_STYLE</span>=long-iso

<span class="org-comment-delimiter"># </span><span class="org-comment">Enable color support of `ls'.</span>
<span class="org-keyword">if</span> [[ <span class="org-string">"$TERM"</span> != <span class="org-string">"dumb"</span> ]]; <span class="org-keyword">then</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Add my coloration scheme to directory listings.</span>
    <span class="org-keyword">if</span> [[ -f <span class="org-string">"$HOME"</span>/.dircolors ]]; <span class="org-keyword">then</span>
        <span class="org-builtin">eval</span> <span class="org-string">"$(</span><span class="org-sh-quoted-exec">dircolors</span><span class="org-string"> -b $HOME/.dircolors)"</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">See https://github.com/seebi/dircolors-solarized.</span>
    <span class="org-keyword">else</span>
        <span class="org-builtin">eval</span> <span class="org-string">"$(</span><span class="org-sh-quoted-exec">dircolors</span><span class="org-string"> -b)"</span>
    <span class="org-keyword">fi</span>

    <span class="org-builtin">alias</span> <span class="org-variable-name">ls</span>=<span class="org-string">'ls --color=auto -F'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">ll</span>=<span class="org-string">'ls --color=auto -a --group-directories-first -G -h -l'</span>
                                        <span class="org-comment-delimiter"># </span><span class="org-comment">Long listing and hidden files.</span>
<span class="org-keyword">else</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">ls</span>=<span class="org-string">'ls -CF'</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<div class="inlinetask">
<b><span class="todo TODO">TODO</span> Beautify the terminal&rsquo;s ls command, with color and font-awesome icons</b><br />
<p>
<a href="https://github.com/athityakumar/colorls">https://github.com/athityakumar/colorls</a>
</p>
</div>


<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">This alias reloads this file.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">reload</span>=<span class="org-string">'unalias -a &amp;&amp; . "$HOME"/.shellrc'</span>
</pre>
</div>

<p>
Sort of tree:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">dirf</span>=<span class="org-string">'find . -type d | sed -e "s/[^-][^\/]*\//  |/g" -e "s/|\([^ ]\)/|-\1/"'</span>
</pre>
</div>

<p>
<code>df</code> options:
</p>

<dl class="org-dl">
<dt><code>-h</code></dt><dd>Print sizes in powers of 1024 (e.g., <code>1023M</code>).</dd>

<dt><code>-k</code></dt><dd>Like <code>--block-size=1K</code>.</dd>

<dt><code>-T</code></dt><dd>Print file system type.</dd>
</dl>

<p>
Make <code>df</code> human readable.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">df</span>=<span class="org-string">'df -kTh'</span>
</pre>
</div>

<p>
Make <code>du</code> human readable.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">du</span>=<span class="org-string">'du -kh'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">du</span>=<span class="org-string">'du -h'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">du1</span>=<span class="org-string">'du -h --max-depth=1'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">dus</span>=<span class="org-string">'du -ms * | sort -rn'</span>         <span class="org-comment-delimiter"># </span><span class="org-comment">Ordered by size.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">mount</span>=<span class="org-string">'mount | column -t'</span>
</pre>
</div>

<p>
List all the files in this directory, and sort by human-readable file size.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">sizes</span>=<span class="org-string">"du --max-depth=1 -k | sort -nr | cut -f2 | xargs -d '\n' du -sh"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Play safe!  Prevent some accidental mistakes.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">rm</span>=<span class="org-string">'rm -i'</span>                        <span class="org-comment-delimiter"># </span><span class="org-comment">Confirm removing file.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">cp</span>=<span class="org-string">'cp -i'</span>                        <span class="org-comment-delimiter"># </span><span class="org-comment">Confirm copy over an existing file.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">mv</span>=<span class="org-string">'mv -i'</span>                        <span class="org-comment-delimiter"># </span><span class="org-comment">Confirm move over an existing file.</span>
</pre>
</div>

<div class="note">
<p>
The above aliases <b>alter</b> the <b>original</b> meaning of existing commands &#x2013; that
scripts don&rsquo;t expect to see modified!
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Make an extract function!</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tgz</span>=<span class="org-string">'tar -zxvf'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tbz2</span>=<span class="org-string">'tar -jxvf'</span>
</pre>
</div>

<p>
Interesting alias in Oh My Zsh: <code>x</code> / <code>extract</code> to extract an archive of types
tar.{bz2,gz,xz,lzma}, bz2, rar, gz, tbz2, tgz, zip, Z, 7z.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Print a more readable PATH (each directory on a new line).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">path</span>=<span class="org-string">'echo "$PATH" | sed -e "s/:/\n/g"'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">path</span>=<span class="org-string">'sed "s/:/\n/g" &lt;&lt;&lt; "$PATH"'</span> <span class="org-comment-delimiter"># </span><span class="org-comment">here-strings (undefined in POSIX sh).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">path</span>=<span class="org-string">'tr ":" "\n" &lt;&lt;&lt; "$PATH"'</span>    <span class="org-comment-delimiter"># </span><span class="org-comment">here-strings.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">path</span>=<span class="org-string">'echo -e "${PATH//:/\\n}"'</span>   <span class="org-comment-delimiter"># </span><span class="org-comment">Parameter expansion (string replacement undefined in POSIX sh/dash).</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">https://ubuntuplace.info/questions/4532/comment-afficher-les-chemins-dans-path-separement</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Path.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">where</span>=<span class="org-string">'type -a'</span>                   <span class="org-comment-delimiter"># </span><span class="org-comment">Good?</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">mkall</span>=<span class="org-string">'./configure &amp;&amp; make &amp;&amp; sudo make install'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Using sudo with an alias.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">sudo</span>=<span class="org-string">'sudo '</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Become root.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">root</span>=<span class="org-string">'sudo -i'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Make executable.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">exe</span>=<span class="org-string">'chmod +x'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">addx</span>=<span class="org-string">'chmod +x'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Chown current dir and subdirs.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">own</span>=<span class="org-string">'sudo chown -R $USER'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5439256" class="outline-4">
<h4 id="org5439256">Directories</h4>
<div class="outline-text-4" id="text-org5439256">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> -- ..=<span class="org-string">'cd ..'</span>

<span class="org-builtin">alias</span> ...=<span class="org-string">'cd ../..'</span>
<span class="org-builtin">alias</span> ....=<span class="org-string">'cd ../../..'</span>
<span class="org-builtin">alias</span> .....=<span class="org-string">'cd ../../../..'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Aliases '-' to 'cd -'.</span>
<span class="org-builtin">alias</span> -- -=<span class="org-string">'cd -'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> c:=<span class="org-string">'cd /mnt/c'</span>
<span class="org-builtin">alias</span> d:=<span class="org-string">'cd /mnt/d'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">list last used directories (directory history).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">d</span>=<span class="org-string">'dirs -v'</span>
</pre>
</div>

<p>
Normally, you can use <code>cd +1</code> to go to the previous directory and so on.
Oh My Zsh made this even more straightforward, now you can use just the number
of the entry in the directory history you want to visit&#x2026; <code>1</code>.
</p>
</div>
</div>

<div id="outline-container-orgb36af25" class="outline-4">
<h4 id="orgb36af25">Shortcuts (single char)for some commands)</h4>
<div class="outline-text-4" id="text-orgb36af25">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">c</span>=<span class="org-string">'clear'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">j</span>=<span class="org-string">'jobs -l'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">l</span>=<span class="org-string">'ls'</span>                            <span class="org-comment-delimiter"># </span><span class="org-comment">xx</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">m</span>=<span class="org-string">'man'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">alias p='$PAGER'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">q</span>=<span class="org-string">'exit'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">s</span>=<span class="org-string">'sudo'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">t</span>=<span class="org-string">'tail -f'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">alias x='exit' # Conflict with extract (from Oh-my-Zsh?)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org637c033" class="outline-4">
<h4 id="org637c033">Colorize diff output</h4>
<div class="outline-text-4" id="text-org637c033">
<p>
<b>Highlight SVN diffs in the Shell (in Cygwin)???</b>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Make `diff' automatically call `colordiff' (Install `colordiff' package...).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">diff</span>=<span class="org-string">'colordiff'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org237a6aa" class="outline-4">
<h4 id="org237a6aa">Git</h4>
<div class="outline-text-4" id="text-org237a6aa">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">g</span>=<span class="org-string">'git'</span>
</pre>
</div>

<p>
Go to the top of your Git repo.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">alias gitroot='cd $(</span><span class="org-sh-quoted-exec">git</span><span class="org-comment"> rev-parse --show-toplevel)' # Conflict with Oh My Zsh?</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Good alias that will not blow up cd if you aren't in a Git directory.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">cdroot</span>=<span class="org-string">'git rev-parse &amp;&amp; cd "$(</span><span class="org-sh-quoted-exec">git</span><span class="org-string"> rev-parse --show-toplevel)"'</span>
</pre>
</div>

<p>
<a href="http://jonas.nitro.dk/tig/manual.html">http://jonas.nitro.dk/tig/manual.html</a>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">tigs</span>=<span class="org-string">'tig status'</span>                 <span class="org-comment-delimiter"># </span><span class="org-comment">Use it all of the time!</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tigb</span>=<span class="org-string">'tig blame'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tigall</span>=<span class="org-string">'tig --all'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">tigreleases</span>=<span class="org-string">'tig --all --simplify-by-decoration'</span>
</pre>
</div>

<p>
<a href="http://stackoverflow.com/tags/tig/hot">http://stackoverflow.com/tags/tig/hot</a>
</p>
</div>
</div>

<div id="outline-container-org26667a3" class="outline-4">
<h4 id="org26667a3">SVN</h4>
<div class="outline-text-4" id="text-org26667a3">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Search through files, ignoring .svn directories.</span>
<span class="org-builtin">alias</span> svn-find=<span class="org-string">'find . -not \( -name .svn -prune \)'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Grep a string in every SVN revision of a file.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Usage: svn-grep-all-rev PATTERN FILE</span>
<span class="org-function-name">svn-grep-all-rev</span>() {
    svn log <span class="org-string">"$2"</span> <span class="org-sh-escaped-newline">\</span>
        | perl -n -e <span class="org-string">'print "$1\n" if m/^r(\d*)\s+/'</span> <span class="org-sh-escaped-newline">\</span>
        | (
              <span class="org-keyword">while </span><span class="org-builtin">read</span> revision; <span class="org-keyword">do</span>
                  <span class="org-builtin">printf</span> <span class="org-string">"\e[0;33m%s\e[0m\n"</span> <span class="org-string">"Revision $revision:"</span>
                  svn cat -r <span class="org-string">"$revision"</span> <span class="org-string">"$2"</span> | grep <span class="org-string">"$1"</span>
                  <span class="org-builtin">printf</span> <span class="org-string">'\n'</span>
              <span class="org-keyword">done</span>
          )
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">SVN repository path</span>
<span class="org-builtin">alias</span> svn-remote-get-url=<span class="org-string">"svn info | egrep '^URL: (.*)' | sed s/URL\:\ //"</span>
</pre>
</div>

<p>
This alias can be used as:
</p>

<div class="org-src-container">
<pre class="src src-shell">svn COMMAND $(<span class="org-sh-quoted-exec">svn-remote-get-url</span>)       <span class="org-comment-delimiter"># </span><span class="org-comment">Retrieve the full RepoURL.</span>
</pre>
</div>

<p>
See <a href="file:///cygdrive/d/Users/fni/.dotfiles/plugins/git-config/SVN.html">SVN aliases</a> for more information about these:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> svn-log=<span class="org-string">"svn log | perl -l40pe 's/^-+/\n/' | less"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">svn-show release-number</span>
<span class="org-function-name">svn-show</span>() {
    svn diff -c <span class="org-string">"$1"</span> | less
}

<span class="org-comment-delimiter"># </span><span class="org-comment">svn-showtool 123 path/to/file</span>
<span class="org-function-name">svn-showtool</span>() {
    svn diff --diff-cmd=<span class="org-string">'meld'</span> -c <span class="org-string">"$1"</span> <span class="org-string">"$2"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">svn-whatchanged [path/to/file]</span>
<span class="org-builtin">alias</span> svn-whatchanged=<span class="org-string">'svn log -v'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">svn-logfile path/to/file</span>
<span class="org-function-name">svn-logfile</span>() {
    svn log -q <span class="org-string">"$1"</span> | grep <span class="org-string">"^r"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">svn-unmodify path/to/file</span>
<span class="org-function-name">svn-unmodify</span>() {
    svn revert <span class="org-string">"$1"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">svn-logfile-p path/to/file</span>
<span class="org-function-name">svn-logfile-p</span>() {
    svn log --diff <span class="org-string">"$1"</span> | less
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> svn-nevermind=<span class="org-string">'read -p "Destroy all local changes? [y/N]" &amp;&amp; [[ $REPLY =~ ^[yY] ]] &amp;&amp; svn revert . -R &amp;&amp; rm -rf $(</span><span class="org-sh-quoted-exec">awk</span><span class="org-string"> -f &lt;(echo "/^?/{print \$2}") &lt;(svn status) ;)'</span>
</pre>
</div>

<p>
Nuclear version which:
</p>
<ul class="org-ul">
<li>reverts tracked files (discards changes in the working directory), and</li>
<li>cleans untracked files and directories (removes any new files).</li>
</ul>

<p>
See <a href="https://stackoverflow.com/questions/6204572/is-there-a-subversion-command-to-reset-the-working-copy">https://stackoverflow.com/questions/6204572/is-there-a-subversion-command-to-reset-the-working-copy</a>.
</p>
</div>

<ul class="org-ul">
<li><a id="org95f228e"></a><span class="todo TODO">TODO</span> Color lines in shell (GRC, Supercat, Highlight, etc.)<br />
<div class="outline-text-5" id="text-org95f228e">
<p>
<a href="http://stackoverflow.com/questions/4267400/colour-highlighting-output-based-on-regex-in-shell">http://stackoverflow.com/questions/4267400/colour-highlighting-output-based-on-regex-in-shell</a>
</p>

<p>
highlight-lines-matching-regexp &ldquo;ERROR&rdquo;
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orge5fd800" class="outline-4">
<h4 id="orge5fd800">History</h4>
<div class="outline-text-4" id="text-orge5fd800">
<p>
Print the history lines matching a pattern.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">hgrep</span>=<span class="org-string">'history | grep -i'</span>
</pre>
</div>

<div class="warning">
<p>
We can&rsquo;t call this alias <code>hg</code> as that conflicts with the Mercurial prompt of the
Agnoster theme (checking for the presence of the <code>hg</code> command).
</p>

</div>

<p>
Show the top 10 most used commands in your history.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">history</span> <span class="org-sh-escaped-newline">\</span>
    | awk <span class="org-string">'{print $2}'</span> <span class="org-sh-escaped-newline">\</span>
    | awk <span class="org-string">'BEGIN {FS="|"} {print $1}'</span> <span class="org-sh-escaped-newline">\</span>
    | sort <span class="org-sh-escaped-newline">\</span>
    | uniq -c <span class="org-sh-escaped-newline">\</span>
    | sort -nr <span class="org-sh-escaped-newline">\</span>
    | head -10
</pre>
</div>
</div>
</div>

<div id="outline-container-org83ec7bb" class="outline-4">
<h4 id="org83ec7bb">UTF-8</h4>
<div class="outline-text-4" id="text-org83ec7bb">
<p>
Remove the UTF-8 encoded BOM if it exists (make no changes if it doesn&rsquo;t).
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> remove-bom=<span class="org-string">'sed -i "1s/^\xEF\xBB\xBF//"'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ee22a4" class="outline-4">
<h4 id="org6ee22a4">Screen</h4>
<div class="outline-text-4" id="text-org6ee22a4">
<p>
Connect to a host in a new screen tab, with the device name as the tab title.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">s</span>() {
    screen -t <span class="org-string">"$@"</span> /usr/bin/ssh <span class="org-string">"$@"</span>
}

<span class="org-builtin">alias</span> <span class="org-variable-name">screen</span>=<span class="org-string">'screen -U'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">resume</span>=<span class="org-string">'screen -D -R'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">sr</span>=<span class="org-string">'screen -r'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e11070" class="outline-4">
<h4 id="org6e11070">SSH agent / GPG agent</h4>
<div class="outline-text-4" id="text-org6e11070">
<p>
Most of our servers don&rsquo;t listen to SSH on a public VLAN. I can&rsquo;t be bothered to
keep a tunnel open on my laptop when away from the office:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">zugzug</span>() {
    ssh -A -p &lt;non_standard_port&gt; -t &lt;proxy_server&gt; ssh <span class="org-string">"$1"</span>
}
</pre>
</div>

<p>
While it&rsquo;s a function and not an alias, I find it invaluable.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">keyon</span>=<span class="org-string">'ssh-add -t 10800'</span>          <span class="org-comment-delimiter"># </span><span class="org-comment">Add identity.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">keyoff</span>=<span class="org-string">'ssh-add -D'</span>               <span class="org-comment-delimiter"># </span><span class="org-comment">Remove all identities.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">keylist</span>=<span class="org-string">'ssh-add -l'</span>              <span class="org-comment-delimiter"># </span><span class="org-comment">List all identities.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">gpg.</span>
<span class="org-function-name">searchkey</span>() {
    gpg --keyserver pgp.mit.edu --fingerprint --search-key <span class="org-string">"$@"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Get gpg-key from keyserver.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">getkey</span>=<span class="org-string">'gpg --keyserver keys.gnupg.net --recv-keys'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba56560" class="outline-4">
<h4 id="orgba56560">Debian</h4>
<div class="outline-text-4" id="text-orgba56560">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">aps</span>=<span class="org-string">'aptitude search'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdfb9aa" class="outline-4">
<h4 id="orgbdfb9aa">System admin (NMAP, etc.)</h4>
<div class="outline-text-4" id="text-orgbdfb9aa">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Use `pkill' (which is pgrep + kill in a single command).</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Show only my processes.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">mytop</span>=<span class="org-string">'top -u $USERNAME'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">My traceroute.</span>
have mtr &amp;&amp; <span class="org-builtin">alias</span> <span class="org-variable-name">ping</span>=mtr

<span class="org-comment-delimiter"># </span><span class="org-comment">hping[2] (run as root!)</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">myping</span>=<span class="org-string">"hping2 -c 100 -2 -p 7 $1"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">myping2</span>=<span class="org-string">"hping2 -d 500 -c 100 -2 -p 7 $1"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">030925 Compare /proc with ps (against rootkits).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">myps</span>=<span class="org-string">"sudo ls -d /proc/* | grep '[0-9]' | wc -l ; sudo ps ax | wc -l"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment"># 040210 Grep.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">alias g='find . -type f -print0 | xargs -0 grep'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Echo my current external IP address.</span>
have curl &amp;&amp; <span class="org-builtin">alias</span> <span class="org-variable-name">whatismyip</span>=<span class="org-string">'curl -s http://whatismyip.org'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">externalip</span>=<span class="org-string">'wget http://ipinfo.io/ip -qO -'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">internalip</span>=<span class="org-string">'ipconfig getifaddr en0'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Get your external IP address.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">curl ifconfig.me</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Get internal IP address.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">ip</span>=<span class="org-string">'ipconfig getifaddr en0'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">wanip</span>=<span class="org-string">'dig +short myip.opendns.com @resolver1.opendns.com'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> docker-rm-all=<span class="org-string">'sudo docker ps -a | awk "NR &gt; 1{print \$1}" | xargs sudo docker rm'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">040319 Send files via `netcat'.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">on sending side:</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">send() {j=$*; tar cpz ${j/%${!#}/} | nc -w 1 ${!#} 51330;}</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">send dir* $HOST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Info:</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">${!#} gibt den letzten Parameter (den Hostnamen) zurück,</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">${j/%${!#}/} die übrigen (Liste der Dateien oder Verzeichnisse).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">receive</span>=<span class="org-string">'nc -vlp 51330 | tar xzvp'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Sharing file through http 80 port.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">From the other machine open a web navigator and go to ip from the machine who</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">launch netcat, http://ip-address/ If you have some web server listening at 80</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">port then you would need stop them or select another port before launch net</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">cat ;-) * You need netcat tool installed</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">nc -v -l 80 &lt; file.ext</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Honor embedded linefeeds when displaying packets.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">ngrep</span>=<span class="org-string">'ngrep -W byline'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -i -w 'user|pass' port 110</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -d eth0 -i 'USER|PASS' tcp port 80</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep google port 80</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -i 'rcpt to|mail from' tcp port smtp</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ngrep -q -t -wi "login" port 23</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">sniff</span>=<span class="org-string">'sudo ngrep -d "enp6s0" -t "^(GET|POST) " "tcp and port 80"'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">ports</span>=<span class="org-string">'netstat -alpe --ip'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Open ports.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">ports</span>=<span class="org-string">'netstat -tulanp'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">ports</span>=<span class="org-string">'netstat -tulap'</span>

<span class="org-builtin">alias</span> <span class="org-variable-name">openports</span>=<span class="org-string">'netstat -nape --inet'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Scan all open/listening ports.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">sudo nmap -n -PN -sT -sU -p- localhost</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">alias scan='nmap -sS -O'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">nm</span>=<span class="org-string">'nmap -sS -O -PI -PT'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">portscan</span>=<span class="org-string">'nmap -sT -PT -R '</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">nmap_fast</span>=<span class="org-string">'nmap -F -T5 --top-ports 300'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">nmap() {</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">echo "Enter port #"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">read port</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">echo "Enter IP range"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">read range</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">sudo nmap -sT -p $port -P0 -v -T 4 -oG dump-$port-${range////_}.txt $range</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">grep -i open dump-$port-${range////_}.txt</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">have nmap &amp;&amp; {
    <span class="org-comment-delimiter"># </span><span class="org-comment">-- [ nmap ] ---------------------------------------------------</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-sS - TCP SYN scan</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-v - verbose</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-T1 - timing of scan. Options are paranoid (0), sneaky (1), polite (2), normal (3), aggressive (4), and insane (5)</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-sF - FIN scan (can sneak through non-stateful firewalls)</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-PE - ICMP echo discovery probe</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-PP - timestamp discovery probe</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-PY - SCTP init ping</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-g - use given number as source port</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-A - enable OS detection, version detection, script scanning, and traceroute (aggressive)</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-O - enable OS detection</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-sA - TCP ACK scan</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">-F - fast scan</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">--script=vulscan - also access vulnerabilities in target</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_open_ports</span>=<span class="org-string">'nmap --open'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_list_interfaces</span>=<span class="org-string">'nmap --iflist'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_slow</span>=<span class="org-string">'nmap -sS -v -T1'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_fin</span>=<span class="org-string">'nmap -sF -v'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_full</span>=<span class="org-string">'nmap -sS -T4 -PE -PP -PS80,443 -PY -g 53 -A -p1-65535 -v'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_check_for_firewall</span>=<span class="org-string">'nmap -sA -p1-65535 -v -T4'</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_ping_through_firewall</span>=<span class="org-string">"nmap -PS -PA"</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_fast</span>=<span class="org-string">"nmap -F -T5 --version-light --top-ports 300"</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_detect_versions</span>=<span class="org-string">"nmap -sV -p1-65535 -O --osscan-guess -T4 -Pn"</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_check_for_vulns</span>=<span class="org-string">"nmap --script=vulscan"</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_full_udp</span>=<span class="org-string">"nmap -sS -sU -T4 -A -v -PE -PS22,25,80 -PA21,23,80,443,3389 "</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_traceroute</span>=<span class="org-string">"nmap -sP -PE -PS22,25,80 -PA21,23,80,3389 -PU -PO --traceroute "</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_full_with_scripts</span>=<span class="org-string">"sudo nmap -sS -sU -T4 -A -v -PE -PP -PS21,22,23,25,80,113,31339 -PA80,113,443,10042 -PO --script all "</span>
    <span class="org-builtin">alias</span> <span class="org-variable-name">nmap_web_safe_osscan</span>=<span class="org-string">"sudo nmap -p 80,443 -O -v --osscan-guess --fuzzy "</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">localnet - Find the local network in CIDR notation.</span>
<span class="org-function-name">localnet</span>() {
    <span class="org-variable-name">IP_ADDRESS</span>=$(<span class="org-sh-quoted-exec">ifconfig</span> | grep <span class="org-string">"inet addr:"</span> | head -n 1 | sed <span class="org-string">"s/.*addr:\([0-9.]*\).*/\1/"</span>)
    <span class="org-comment-delimiter"># </span><span class="org-comment">we could use `nm-tool' from `network-manager'</span>

    <span class="org-variable-name">NETMASK</span>=$(<span class="org-sh-quoted-exec">ifconfig</span> | grep <span class="org-string">"inet addr:"</span> | head -n 1 | sed <span class="org-string">"s/.*Mask:\([0-9.]*\).*/\1/"</span>)

    <span class="org-comment-delimiter"># </span><span class="org-comment">calculate network value</span>
    <span class="org-builtin">echo</span> $(<span class="org-sh-quoted-exec">ipcalc</span> -n -b $<span class="org-variable-name">IP_ADDRESS</span> $<span class="org-variable-name">NETMASK</span> | grep Network | awk <span class="org-string">'{print $2}'</span>)
}

<span class="org-comment-delimiter"># </span><span class="org-comment">whoisonline [TARGET] - List hosts that are online.</span>
<span class="org-function-name">whoisonline</span>() {
    <span class="org-builtin">local</span> net
    <span class="org-keyword">if</span> [[ -n <span class="org-string">"$1"</span> ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">net</span>=<span class="org-string">"$1"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">net</span>=$(<span class="org-sh-quoted-exec">localnet</span>)
    <span class="org-keyword">fi</span>
    <span class="org-builtin">echo</span> <span class="org-string">"Discovering online hosts in $net..."</span>
    sudo nmap -sP $<span class="org-variable-name">net</span> | awk <span class="org-string">'/Host / &amp;&amp; / up/ { print $0; }'</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">localps [TARGET] - List open ports on hosts that are online.</span>
<span class="org-function-name">localps</span>() {
    <span class="org-builtin">local</span> hostip
    <span class="org-builtin">local</span> t1
    <span class="org-builtin">local</span> t2
    <span class="org-builtin">local</span> t3

    <span class="org-builtin">local</span> net
    <span class="org-keyword">if</span> [[ -n <span class="org-string">"$1"</span> ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">net</span>=<span class="org-string">"$1"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">net</span>=$(<span class="org-sh-quoted-exec">localnet</span>)
    <span class="org-keyword">fi</span>

    <span class="org-keyword">for</span> hostip<span class="org-keyword"> in</span> $(<span class="org-sh-quoted-exec">nmap</span> -sP $<span class="org-variable-name">net</span> | grep -E <span class="org-string">'Host .* up'</span> | cut -d <span class="org-string">" "</span> -f2-2); <span class="org-keyword">do</span>
        <span class="org-variable-name">t1</span>=$(<span class="org-sh-quoted-exec">ping</span> -c 4 $<span class="org-variable-name">hostip</span> | grep -e PING | cut -d <span class="org-string">" "</span> -f1-2 | cut -d <span class="org-string">" "</span> -f2-4)
        <span class="org-variable-name">t2</span>=$(<span class="org-sh-quoted-exec">ping</span> -c 4 $<span class="org-variable-name">hostip</span> | grep -e rtt | cut -d <span class="org-string">"/"</span> -f5-5)
        <span class="org-variable-name">t3</span>=$(<span class="org-sh-quoted-exec">sudo</span> nmap -sS $<span class="org-variable-name">hostip</span> | grep <span class="org-string">" open "</span>)
        <span class="org-builtin">echo</span> -e $<span class="org-variable-name">t1</span> <span class="org-string">" "</span> $<span class="org-variable-name">t2</span> <span class="org-string">"ms\n"</span> $<span class="org-variable-name">t3</span> <span class="org-string">"\n"</span>
    <span class="org-keyword">done</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">watchport HOST PORT - Watch TCP port PORT on machine HOST.</span>
<span class="org-function-name">watchport</span>() {
    <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
        clear
        nmap <span class="org-string">"$1"</span> -PN -p <span class="org-string">"$2"</span>
        sleep 5
    <span class="org-keyword">done</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">rdns [TARGET] - Perform reverse DNS lookups.</span>
<span class="org-function-name">rdns</span>() {
    <span class="org-builtin">local</span> net
    <span class="org-keyword">if</span> [[ -n <span class="org-string">"$1"</span> ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">net</span>=<span class="org-string">"$1"</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">net</span>=$(<span class="org-sh-quoted-exec">localnet</span>)
    <span class="org-keyword">fi</span>
    <span class="org-builtin">echo</span> <span class="org-string">"Performing reverse DNS lookups in $net..."</span>
    nmap -R -sL $<span class="org-variable-name">net</span> |<span class="org-sh-escaped-newline">\</span>
    awk <span class="org-string">'{if ($3 != "not") print "Host " $3 " is " $2}'</span> | grep <span class="org-string">'('</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">You could add "--dns-servers x.x.x.x" after the "-sL" if you need the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">lookups to be performed on a specific DNS server.</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Resume getting a partially-downloaded file.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">wget</span>=<span class="org-string">'wget -c'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Anonymous wget (using Privoxy and Tor).</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">aget</span>=<span class="org-string">'wget --execute "http_proxy = http://127.0.0.1:8118" --proxy'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">mirror</span>=<span class="org-string">'wget -v --tries=0 --continue --force-directories --mirror --no-parent'</span>

<span class="org-builtin">alias</span> download-web-site=<span class="org-string">'wget --random-wait -r -p -e robots=off -U mozilla'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Pöwer off.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">off</span>=<span class="org-string">'sudo /sbin/shutdown -h now'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org656e999" class="outline-4">
<h4 id="org656e999">Org</h4>
<div class="outline-text-4" id="text-org656e999">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">org_test</span>() {
    (
        <span class="org-builtin">cd</span> <span class="org-string">"$HOME"</span>/Public/Repositories/org-mode
        mkdir /tmp/tmp-orgtest 2&gt; /dev/null <span class="org-comment-delimiter"># </span><span class="org-comment">TMPDIR must exist!</span>
        <span class="org-variable-name">TMPDIR</span>=/tmp/tmp-orgtest <span class="org-sh-escaped-newline">\</span>
            emacs -Q --batch -L lisp/ -L testing/ -l org-test.el --eval <span class="org-string">'(setq org-confirm-babel-evaluate nil)'</span> -f org-test-run-batch-tests
    )
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7d904f" class="outline-4">
<h4 id="orgf7d904f">Grep</h4>
<div class="outline-text-4" id="text-orgf7d904f">
<div class="note">
<p>
<code>GREP_OPTIONS</code> causes problems because it <b>applies in scripts</b> that may be relying
on the exact set of options that they pass to <code>grep</code>; it&rsquo;s even officially
<b>deprecated</b> since <code>grep</code> 2.21.  It is better to make <code>grep</code> itself an alias (and also
<code>egrep</code> and <code>fgrep</code> if you use them).
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Display the matched pattern in color.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">grep</span>=<span class="org-string">'grep --color=auto'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">egrep</span>=<span class="org-string">'grep -E --color=auto'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">fgrep</span>=<span class="org-string">'grep -F --color=auto'</span>
</pre>
</div>

<div class="warning">
<p>
If you use <code>--color=always</code>, it&rsquo;ll use color even when piping, which confuses
things.
</p>

</div>

<p>
Change the color of <code>grep</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">GREP_COLORS</span>=<span class="org-string">'0;30;43'</span>
</pre>
</div>

<div class="note">
<p>
The colors are defined by the environment variable <code>GREP_COLORS</code> (used in <code>grep</code>
2.5.2 and later versions). The <b>deprecated</b> environment variable <code>GREP_COLOR</code> (used
in <code>grep</code> 2.5.1) is still supported, but its setting does not have priority.
</p>

<p>
But apparently, this is not the case on my system. <code>GREP_COLOR</code> is the one that
worked&#x2026;
</p>

</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Grep through the running processes.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">pgrep</span>=<span class="org-string">'pgrep -fl'</span>
<span class="org-builtin">alias</span> <span class="org-string">'ps?'</span>=<span class="org-string">'ps ax | grep '</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7037e67" class="outline-4">
<h4 id="org7037e67">Ripgrep</h4>
<div class="outline-text-4" id="text-org7037e67">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">rg</span>=<span class="org-string">"rg --colors 'match:bg:yellow' --colors 'match:fg:black' --colors 'match:style:bold'"</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">srg</span>=<span class="org-string">"rg --colors 'match:bg:yellow' --colors 'match:fg:black' --colors 'match:style:bold' --sort-files"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org332d36f" class="outline-4">
<h4 id="org332d36f">Ag, the Silver Searcher</h4>
<div class="outline-text-4" id="text-org332d36f">
<p>
<a href="https://blog.kowalczyk.info/software/the-silver-searcher-for-windows.html">The Silver Searcher windows port</a>
</p>

<div class="org-src-container">
<pre class="src src-shell">have ag &amp;&amp; <span class="org-builtin">alias</span> <span class="org-variable-name">grep</span>=ag
</pre>
</div>
</div>
</div>

<div id="outline-container-org54de695" class="outline-4">
<h4 id="org54de695">GraphicsMagick</h4>
<div class="outline-text-4" id="text-org54de695">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">GraphicsMagick.</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">GIF</span>=<span class="org-string">'gm convert -verbose -interlace LINE'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">thumb</span>=<span class="org-string">'gm convert -geometry 100x100 -interlace LINE -verbose'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">region</span>=<span class="org-string">'sleep 3; gm import selection$(</span><span class="org-sh-quoted-exec">date</span><span class="org-string"> "+%Y%m%d%H%M%S").jpg'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">screenshot</span>=<span class="org-string">'sleep 5; gm import -window root screen$(</span><span class="org-sh-quoted-exec">date</span><span class="org-string"> "+%Y%m%d%H%M%S").jpg'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">window</span>=<span class="org-string">'sleep 3; gm import -frame window$(</span><span class="org-sh-quoted-exec">date</span><span class="org-string"> "+%Y%m%d%H%M%S").jpg'</span>

<span class="org-function-name">gmresize</span>() {
    <span class="org-variable-name">FILES</span>=<span class="org-string">"$@"</span>
    <span class="org-variable-name">SCALE</span>=<span class="org-string">"1024x768"</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">for i in *.(gif|jpeg|jpg|png);</span>
    <span class="org-keyword">for</span> i<span class="org-keyword"> in</span> $<span class="org-variable-name">FILES</span>; <span class="org-keyword">do</span>
        <span class="org-builtin">echo</span> <span class="org-string">"Processing image $i ..."</span>
        gm convert -scale $<span class="org-variable-name">SCALE</span> <span class="org-string">"$i"</span> $(<span class="org-sh-quoted-exec">basename</span> <span class="org-string">"$i"</span> .${<span class="org-variable-name">i</span>##*.})-$<span class="org-variable-name">SCALE</span>.${<span class="org-variable-name">i</span>##*.}
        <span class="org-comment-delimiter"># </span><span class="org-comment">Obscure but useful string operations.</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">(See http://www.arachnoid.com/linux/shell_programming.html.)</span>
    <span class="org-keyword">done</span>
}

<span class="org-comment-delimiter"># </span><span class="org-comment">find . -name "*png" | xargs -l -i basename -s ".png" "{}" | xargs -l -i  gm convert -quality 85% "{}.png" "{}.jpg"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b7a3fd" class="outline-4">
<h4 id="org3b7a3fd">Other things to sort</h4>
<div class="outline-text-4" id="text-org3b7a3fd">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">GS_OPTIONS</span>=<span class="org-string">'-sPAPERSIZE=a4'</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">pdfmerge</span>=<span class="org-string">'gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile=./pdf-joined.pdf'</span> <span class="org-comment-delimiter"># </span><span class="org-comment">pdfjoin</span>
<span class="org-builtin">alias</span> <span class="org-variable-name">booklet</span>=<span class="org-string">"psbook | psnup -2 | pstops '2:0,1U(21cm,29.7cm)'"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">for Win32, choose gswin32c</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">clean [-r] - Remove useless files (recursively).</span>
<span class="org-function-name">clean</span>() {
    <span class="org-keyword">if</span> [[ <span class="org-string">"$1"</span> = <span class="org-string">"-r"</span> ]]; <span class="org-keyword">then</span>
        find . <span class="org-string">\(</span> -name <span class="org-string">"#*"</span> -o -name <span class="org-string">"*~"</span> -o -name <span class="org-string">".*~"</span> <span class="org-sh-escaped-newline">\</span>
             -o -name <span class="org-string">"*.~[0-9]*~"\ </span>-o -name <span class="org-string">".*.~[0-9]*~"</span> <span class="org-sh-escaped-newline">\</span>
             -o -name <span class="org-string">"*.~BASE~"</span> -o -name <span class="org-string">".*.~BASE~"</span> <span class="org-string">\)</span> <span class="org-sh-escaped-newline">\</span>
             -ok rm <span class="org-string">"{}"</span> <span class="org-string">";"</span>
    <span class="org-keyword">else</span>
        rm -i <span class="org-string">\#</span>* *~ .*~ *.~[0-9]*~ .*.~[0-9]*~ *.~BASE~ .*.~BASE~
    <span class="org-keyword">fi</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">swap FILE1 FILE2 - Swap FILE1 and FILE2.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Useful when you want to try a config file obtained from elsewhere, and also</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">keep the old version.</span>
<span class="org-function-name">swap</span>() {
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">#</span> != 2 ]]; <span class="org-keyword">then</span>
        <span class="org-keyword">return</span> 2
    <span class="org-keyword">fi</span>
    <span class="org-variable-name">tmpfile</span>=/tmp/.swapper.$<span class="org-variable-name">$</span>.$<span class="org-variable-name">RANDOM</span>
    mv -f <span class="org-string">"$1"</span> $<span class="org-variable-name">tmpfile</span>
    mv -f <span class="org-string">"$2"</span> <span class="org-string">"$1"</span>
    mv -f $<span class="org-variable-name">tmpfile</span> <span class="org-string">"$2"</span>
    <span class="org-keyword">return</span> 0
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">saneperms</span>() {
    find . -type d -print0 | xargs -0 chmod 755
    find . -type f -print0 | xargs -0 chmod <span class="org-string">"${1:=644}"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment"># Search for various types or README file in dir and display them in $PAGER.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">readme() {</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">local files</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">files=(./(#i)*(read*me|lue*m(in|)ut)*(ND))</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">if (($#files)); then</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">$PAGER $files</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">else</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">print 'No README files.'</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">fi</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">}</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">safetmp</span>() {
    <span class="org-builtin">test</span> -d <span class="org-string">"$HOME"</span> || <span class="org-keyword">exit</span> 1
    <span class="org-builtin">test</span> -d <span class="org-string">"$HOME"</span>/tmp || mkdir <span class="org-string">"$HOME"</span>/tmp
    <span class="org-builtin">echo</span> <span class="org-string">"$HOME/tmp/safetmp.$(</span><span class="org-sh-quoted-exec">hostname</span><span class="org-string">).$(</span><span class="org-sh-quoted-exec">date</span><span class="org-string"> +%s).$$"</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Immediately opens the first match.</span>
<span class="org-function-name">texman</span>() {
    locate <span class="org-string">"$*"</span> | grep pdf | grep texlive | head -1 | xargs open
}

<span class="org-function-name">texlist</span>() {
    locate <span class="org-string">"$*"</span> | grep <span class="org-string">"\(pdf\|dvi\)"</span> | grep <span class="org-string">"\ (texlive\|gwTeX\)"</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge545435" class="outline-4">
<h4 id="orge545435">Extra</h4>
<div class="outline-text-4" id="text-orge545435">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-function-name">console</span>() {
    <span class="org-keyword">if</span> [[ $<span class="org-variable-name">#</span> &gt; 0 ]]; <span class="org-keyword">then</span>
        <span class="org-variable-name">query</span>=$(<span class="org-sh-quoted-exec">echo</span> <span class="org-string">"$*"</span> | tr -s <span class="org-string">' '</span> <span class="org-string">'|'</span>)
        tail -f /var/log/system.log | grep -i --color=auto -E <span class="org-string">"$query"</span>
    <span class="org-keyword">else</span>
        tail -f /var/log/system.log
    <span class="org-keyword">fi</span>
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6460bf2" class="outline-3">
<h3 id="org6460bf2">NMAP</h3>
</div>

<div id="outline-container-org78972d4" class="outline-3">
<h3 id="org78972d4">Postamble</h3>
<div class="outline-text-3" id="text-org78972d4">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">.shellrc ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfe72d53" class="outline-2">
<h2 id="orgfe72d53">Java</h2>
<div class="outline-text-2" id="text-orgfe72d53">
<ul class="org-ul">
<li>Download Ant and add its <code>/bin</code> directory to <code>PATH</code>.</li>

<li>Add <code>C:\Program Files\Java\jdk1.7.0_80</code> to <code>JAVA_HOME</code> and add <code>%JAVA_HOME%/bin</code>
to <code>PATH</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc7f9c81" class="outline-2">
<h2 id="orgc7f9c81">FAQ</h2>
<div class="outline-text-2" id="text-orgc7f9c81">
</div>
<div id="outline-container-org35e38c0" class="outline-3">
<h3 id="org35e38c0">How to fix &ldquo;zsh compinit: insecure directories&rdquo;?</h3>
<div class="outline-text-3" id="text-org35e38c0">
<p>
Stripping these directories of the group write permission:
</p>

<div class="org-src-container">
<pre class="src src-shell">compaudit | xargs chmod g-w
</pre>
</div>

<p>
will do the trick, see <a href="http://www.wezm.net/technical/2008/09/zsh-cygwin-and-insecure-directories/">zsh, Cygwin and Insecure Directories</a>.
</p>
</div>
</div>

<div id="outline-container-org91b4e1f" class="outline-3">
<h3 id="org91b4e1f">How to run Emacs without showing a terminal window?</h3>
<div class="outline-text-3" id="text-org91b4e1f">
<p>
Use the <code>run</code> command:
</p>

<div class="org-src-container">
<pre class="src src-shell">C:\cygwin64\bin\run.exe /usr/bin/emacs
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
